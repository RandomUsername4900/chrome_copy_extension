"use strict";!function(){const t=/^(https:\/\/)?((app(-.+)?|local|www)\.)?(hubspot)(qa)?(\.com)/,e=document&&document.domain?document.domain.toLowerCase():"";if(!e)return;function n(){const t=/^\/(?:[A-Za-z0-9-_]*)\/(\d+)(?:\/|$)/.exec(document.location.pathname);return t&&t.length>1?t[1]:""}const o=t.test(e);window.hubspot=window.hubspot||{};window.hubspot.notifications=window.hubspot.notifications||{};if(o){let o;try{o=window.hubspot.notifications.dev||window.localStorage.NOTIFICATION_SIDEBAR_DEV}catch(t){o=!1}const i=document.location.host.split("."),a=o?"local":i[0],s=e.indexOf("qa")>=0?"qa":"",c=!o&&e.indexOf("qa")>=0?"-qa":"",d=`//${a}.hubspot${s}.com/notification-sidebar/${n()}`,r=`//${o?"local":"static"}.hsappstatic.net/notification-sidebar/${o?"static/sass":"ex/css"}/notificationSidebarBundle${c}.css`,u=function(t,e,n){t&&(n?t.classList.add(e):t.classList.remove(e))},l="notification-sidebar-container",f=function(){const t=`<iframe id="notification-sidebar-iframe" data-test-id="notification-sidebar-iframe" src="${d}" scrolling="no"></iframe>`,e=document.createElement("div");e.className=l;e.innerHTML=t;return e},m=function(){u(document.body,"notification-sidebar-opened",!1);const t=document.getElementsByClassName(l);t.length>0&&document.body.removeChild(t[0])},p=function(){if(window.hubspot.portal&&window.hubspot.portal.id){u(document.body,"notification-sidebar-opened",!0);document.body.appendChild(f())}},b=function(e){if(!t.test(e.origin))return;if("string"!=typeof e.data)return;let n;try{n=JSON.parse(e.data)}catch(t){o&&console&&console.log("Notification sidebar received an unparsable postMessage:",t,e);return}if(n.name)switch(n.name){case"notification-sidebar:close":m();return;case"notification-sidebar:open":p();return;case"notifications:ready":{const t=document.querySelector("#notifications-iframe");t&&t.setAttribute("data-test-id","notifications-iframe-loaded");return}default:o&&console&&console.log("Notification sidebar received postMessage with no handler:",n);return}},w=function(){const t=document.head||document.body,e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=r;t.appendChild(e);window.hubspot.notifications.openSidebar=p;window.addEventListener&&window.addEventListener("message",b,{capture:!0})};(function(){"loading"!==document.readyState?w():document.addEventListener("DOMContentLoaded",()=>{w()},{capture:!0})})()}}();

//# sourceMappingURL=notificationSidebarLoader.js.map