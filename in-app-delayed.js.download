(window.webpackJsonp=window.webpackJsonp||[]).push([["in-app-delayed"],{141:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="go-to-preferences"},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"c",(function(){return s}));n.d(t,"b",(function(){return a}));const r="browser-notifications",i=53,o="INTERACTION",s={BROWSER_NOTIFICATIONS_INTERACTION:"browser-notifications-interaction"},a={NATIVE_BROWSER_NOTIFICATION_CLICK:"native-browser-notification-click",NATIVE_BROWSER_NOTIFICATION_PREFERENCES_CLICK:"native-browser-notification-preferences-click",NATIVE_BROWSER_NOTIFICATION_PUSH_SUBSCRIPTION_CHANGE:"native-browser-push-subscription-change"}},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));const r=4,i=5;t.c={12:"mention",10001:"example"}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(145);const i="NOTIFICATIONS SERVICE WORKER"+" -";function o(...e){Object(r.b)()&&console.debug(i,...e)}},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));const r=".hubspotqa.";function i(){return"undefined"==typeof window}function o(){return i()&&self.registration.scope.indexOf(r)>=0}},146:function(e,t,n){"use strict";var r=n(240),i=n(250),o=n(242),s=n(151),a=n(129);class c{start(){if(Object(s.a)()&&Object(s.c)()){i.a.registerServiceWorker();o.a.subscribeToPushNotifications()}}showBrowserNotification(e){Object(a.a)("Attempting to show the browser notification",e.id);if(!Object(s.b)(e)){Object(a.a)("Notification doesn't list 'BROWSER' as a delivery method");return}if(!Object(s.c)()){Object(a.a)("User has not granted browser notifications");return}new r.a(e).onClick(e=>{window.parent.focus();window.parent.location.href=e.currentTarget.data.ctaProxyUrl})}}t.a=new c},147:function(e,t,n){"use strict";n.d(t,"h",(function(){return r}));n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"c",(function(){return s}));n.d(t,"e",(function(){return a}));n.d(t,"d",(function(){return c}));n.d(t,"g",(function(){return u}));n.d(t,"f",(function(){return l}));const r="NOTIFICATIONS_DISABLE_PRE_PERMISSION_POPUP",i="BROWSER_NOTIFICATION_LAST_SUBSCRIBED",o="BROWSER_NOTIFICATION_PRE_PERMISSION_POPUP_ACCEPT_TIME",s="BROWSER_NOTIFICATION_PRE_PERMISSION_POPUP_DISMISS_TIME",a=864e5,c=18144e5,u="granted",l="denied"},148:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"c",(function(){return i}));n.d(t,"a",(function(){return o}));const r="NOTIFICATIONS",i="persistent",o="browser"},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return s}));function r(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r}const i=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function o(e){if(e>=i.length)throw new Error("Unable to parse base64 string.");const t=i[e];if(255===t)throw new Error("Unable to parse base64 string.");return t}function s(e){if(e.length%4!=0)throw new Error("Unable to parse base64 string.");const t=e.indexOf("=");if(-1!==t&&t<e.length-2)throw new Error("Unable to parse base64 string.");let n,r=e.endsWith("==")?2:e.endsWith("=")?1:0,i=e.length,s=new Uint8Array(i/4*3);for(let t=0,r=0;t<i;t+=4,r+=3){n=o(e.charCodeAt(t))<<18|o(e.charCodeAt(t+1))<<12|o(e.charCodeAt(t+2))<<6|o(e.charCodeAt(t+3));s[r]=n>>16;s[r+1]=n>>8&255;s[r+2]=255&n}return s.subarray(0,s.length-r)}},151:function(e,t,n){"use strict";n.d(t,"c",(function(){return u}));n.d(t,"e",(function(){return l}));n.d(t,"b",(function(){return h}));n.d(t,"d",(function(){return g}));n.d(t,"a",(function(){return f}));var r=n(147),i=n(152),o=n(148),s=n(129),a=n(239);function c(){return window.Notification.permission===r.f}function u(){return window.Notification.permission===r.g}function l(){return c()||u()?Promise.resolve(!1):Promise.all([Object(a.b)(o.a,r.b),Object(a.b)(o.a,r.c)]).then(([e,t])=>Date.now()-Math.max(e||0,t||0)>r.d)}function d(){return"Notification"in window}function p(){return"serviceWorker"in navigator}function h(e){return e.deliveryMethods&&e.deliveryMethods.indexOf(i.a)>-1}function g(){return Object(a.b)(o.a,r.a).then(e=>Date.now()-e<r.e)}const f=()=>{if(!d()){Object(s.a)("Browser does not support notifications - not subscribing");return!1}if(c()){Object(s.a)("Browser notification permission denied - not subscribing");return!1}if(!p()){Object(s.a)("Browser doesn't support service workers");return!1}return!0}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"e",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"f",(function(){return s}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return c}));const r=6,i=4,o=10,s=1,a={FLOATING:"FLOATING",TEASE:"TEASE"},c="deliveryMethod"},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(150),i=n.n(r);function o(){return i.a.get()}},154:function(e,t){e.exports="//static.hsappstatic.net/notifications/static-1.5528/resources/floating_sound.mp3"},156:function(e,t,n){"use strict";var r=n(157),i=n(235);class o{static getScreen(){return window.top.location.pathname}static getEvent(e,t={}){return Object.assign({action:e},t,{screen:o.getScreen()})}static getInteractionEvent(e,t){i.b.track(r.e.NOTIFICATION_INTERACTION,o.getEvent(e,t))}static getUsageEvent(e,t){i.b.track(r.e.NOTIFICATION_USAGE,o.getEvent(e,t))}static trackBrowserNotificationLoadedIframe(){o.getInteractionEvent(r.b)}constructor(e,t){this.notification=e;this.deliveryMethod=t;this.appName=window.top.HublyticsTracker&&window.top.HublyticsTracker.app}getAdditionalParams(e={}){return Object.assign({},e,{"delivery-method":this.deliveryMethod,"notification-origin-name":this.notification.origin&&this.notification.origin.name,"notification-template-id":this.notification.template,"notification-type-id":this.notification.type})}trackNotificationInteractionEvent(e,t){o.getInteractionEvent(e,this.getAdditionalParams(t))}trackClick(){this.trackNotificationInteractionEvent(r.h)}trackSecondaryClick(){this.trackNotificationInteractionEvent(r.j)}trackDismiss(){this.trackNotificationInteractionEvent(r.i)}trackMenuOpen(){this.trackNotificationInteractionEvent(r.m)}trackMenuItemClick(e){this.trackNotificationInteractionEvent(r.l,{link:e})}trackDontPlayFloatingSound(){this.trackNotificationInteractionEvent(r.d)}trackDontShowAgain(){this.trackNotificationInteractionEvent(r.k)}}t.a=o},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"g",(function(){return i}));n.d(t,"h",(function(){return o}));n.d(t,"i",(function(){return s}));n.d(t,"j",(function(){return a}));n.d(t,"k",(function(){return c}));n.d(t,"l",(function(){return u}));n.d(t,"m",(function(){return l}));n.d(t,"b",(function(){return d}));n.d(t,"d",(function(){return p}));n.d(t,"f",(function(){return h}));n.d(t,"e",(function(){return g}));n.d(t,"c",(function(){return f}));const r="browser-notifications",i="notification-station",o="notification-clicked",s="notification-dismissed",a="notification-secondary-button-clicked",c="tease-btn-stop-action",u="tease-link-click",l="tease-menu-open",d="browser-notifications-iframe-loaded",p="do-not-play-floating-sound",h="go-to-preferences",g={NOTIFICATION_INTERACTION:"notificationInteraction",BROWSER_NOTIFICATIONS_INTERACTION:"browserNotificationsInteraction"},f={NATIVE_REQUEST_ALLOW_CLICKED:"native-request-permission-allow",NATIVE_REQUEST_DENY_CLICKED:"native-request-permission-deny",NATIVE_REQUEST_PERMISSION_SHOWN:"native-request-permission-shown",PRE_PERMISSION_CONTINUE_CLICKED:"pre-permission-continue-clicked",PRE_PERMISSION_MAYBE_LATER_CLICKED:"pre-permission-maybe-later-clicked",PRE_PERMISSION_SHOWN:"pre-permission-shown"}},160:function(e,t){e.exports={notificationInteraction:{name:"notification-interaction",class:"interaction",properties:{"notification-type-id":{type:"string",isOptional:!0},"notification-origin-name":{type:"string",isOptional:!0},"delivery-method":{type:"string",isOptional:!0},"notification-template-id":{type:"string",isOptional:!0},action:"string",screen:"string",link:{type:"string",isOptional:!0}},namespace:"notification-floating-alert"},browserNotificationsInteraction:{namespace:"browser-notifications",name:"browser-notifications-interaction",class:"interaction",properties:{type:{type:"string",isOptional:!0},template:{type:"string",isOptional:!0},action:"string",origin:{type:"string",isOptional:!0},screen:"string"}}}},161:function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return o}));const r='var(--uicomponents-font-family, "Lexend Deca", Helvetica, Arial, sans-serif)',i="Lexend Deca",o="Helvetica, Arial, sans-serif"},162:function(e,t){e.exports="//static.hsappstatic.net/notifications/static-1.5528/img/pre-premission-image.svg"},163:function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return o}));function r(e){const t=document.createElement("div");t.innerHTML=e;return t.children[0]}function i(e,t,n){return new e(Object.assign({},t,{children:n})).getHtml()}class o{constructor(e={}){this.props=e;this.rendered=new Promise(e=>{this.resolve=e})}attachStyle(){if(this.constructor.styleElement)return;const e=document.createElement("style");e.innerHTML=this.constructor.style;this.constructor.styleElement=e;window.top.document.head.appendChild(e)}ReactStyleComponentWillMount(){}componentDidMount(){}getHtml(){if(!this.node){this.attachStyle();this.ReactStyleComponentWillMount();this.node=this.render();this.resolve()}return this.node}}},235:function(e,t,n){"use strict";var r=n(6),i=n(7),o=n(1),s=n.n(o),a=n(158),c=n.n(a),u=n(159),l=n(2),d=n.n(l);const p=53,h="USAGE_TRACKER_JS",g="__hstc",f="__hmpl",b="HUBLYTICS_EVENTS_"+p,m="USAGE_TRACKER_JS_RECORDER_ENABLED",y="USAGE_TRACKER_JS_RECORDED_EVENTS",v="USAGE_TRACKER_JS_RECORDED_EVENT_KEYS",w=["email","userId","hubId","hstc","utk","deviceId","device_id"],O=["userId","hubId","hstc","utk","email","lang","deviceId","namespace"],S=e=>{e();return 0},E=self,I=(e,t)=>"function"==typeof setTimeout?setTimeout(e,t):S(e),_=(e,t=(()=>{}))=>"function"==typeof e?e:t,k=Object.keys,T=e=>Boolean(e)&&"object"==typeof e&&"function"==typeof e.then||e instanceof Promise,N=e=>t=>k(e).reduce(t,{}),j=(e="",t="",n="")=>{const r=e.indexOf(t),i=e.indexOf(n);return e.substr(r+t.length,i-r-n.length)},x=(e,t)=>{let n,r=0;return(...i)=>{r&&clearTimeout(r);r=I(()=>{r=0;n=e.apply(null,i)},t);return n}},C=(e={},t={})=>{const n=N(t)((n,r)=>{void 0===e[r]&&void 0!==t[r]&&(n[r]=t[r]);return n});return Object.assign({},e,{},n)},P=e=>Array.hasOwnProperty("isArray")?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e),A=e=>{let t=typeof e;P(e)&&(t="array");return null===e?"null":t},R=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t;const n=16*Math.random()|0;t="x"===e?n:3&n|8;return t.toString(16)}),$=(e={},t)=>N(e)((n,r)=>{n[r]=t(r,e[r]);return n}),M=(e={},t=[])=>N(e||{})((n,r)=>{t.includes(r)||(n[r]=e[r]);return n}),L=(e={},t=[])=>Object.assign({},...t.map(t=>({[t]:e[t]}))),D=e=>{let t,n;return(...r)=>{if(!t){t=!0;n=e(...r)}return n}},B=(e,t)=>k(t).reduce((n,r)=>{const i=t[r];n[r]=i[e];return n},{}),U=(e="",t="")=>{0===(e=e.replace(/^\s+|\s+$/g,"")).indexOf(t)&&(e=e.substr(t.length));e.indexOf(t)===e.length-t.length&&(e=e.substr(0,e.indexOf(t)));return e},W=(e={})=>N(e)((t,n)=>{t[n]=e[n];return t}),H=(e="",t=256)=>{let n=e;if(n.length>t){n=n.substr(0,t);n+="[..]"}return n},K=()=>{const e=[];return{enqueue:t=>e.unshift(t),dequeue:()=>e.shift(),peek:()=>e[0]}},F=(e=[],t,n=E)=>{let r=n;e.forEach(e=>{r=r&&e in r?r[e]:void 0});return void 0===r?t:r},q=(e="")=>e.toString().replace(/(?:^|\.?)([A-Z]+)/g,(e,t)=>"_"+t.toLowerCase()).replace(/^_/,"").replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).replace(/-/g," ").replace(/_/g," ").replace(/\s{2}/g," "),V=e=>{if(e&&"object"==typeof e&&!Object.isFrozen(e)){Object.freeze(e);Object.getOwnPropertyNames(e).forEach(t=>V(e[t]))}return e},z=e=>t=>(n,r)=>{const i={fingerprint:["usage-tracker-js"],tags:e};return _(t)(n,Object.assign({},i,{},r))},J=e=>e&&"string"==typeof e?e.replace(/^(.{0})[^@]+/,"$1*****"):e,G=e=>"object"==typeof e&&e?N(e)((t,n)=>{t[n]=e[n];w.includes(n)&&"string"==typeof e[n]&&e[n].length>0&&(t[n]="email"===n?J(e[n]):"**********");"function"==typeof e[n]&&(t[n]="Function");void 0!==e[n]&&null!==e[n]||(t[n]=null);return t}):e,Q=e=>{const t=e=>"object"==typeof e.Raven&&"function"==typeof e.Raven.captureException&&"function"==typeof e.Raven.captureMessage;if(void 0===e){let e=0,n=!1;return{hasRaven:t,isDocumentReady:()=>{if(n||e)return n;e=I(()=>{n=!0},6e3);return n},isLocalDeployment:!1,isQaDeployment:!1,isProdDeployment:!1,isDebugEnabled:!1,hasLocalStorage:!1,hasCookieAccess:!1,hasBeaconSupport:!1}}const n=()=>{try{return Boolean(e.localStorage)}catch(e){return!1}},r=()=>{const{navigator:t,document:n}=e;try{return"object"==typeof t&&t.cookieEnabled||"object"==typeof n&&Boolean(n.cookie)}catch(e){return!1}},i=()=>{const{navigator:t}=e;try{return"object"==typeof t&&"function"==typeof t.sendBeacon}catch(e){return!1}};return{hasRaven:t,isDocumentReady:()=>{const{document:t}=e;try{return"object"==typeof t&&"string"==typeof t.readyState&&"complete"===t.readyState}catch(e){return!1}},isLocalDeployment:!d.a.deployed(),isQaDeployment:d.a.isQa(),isProdDeployment:d.a.isProd(),isDebugEnabled:Boolean(d.a.debug(h)),hasLocalStorage:n(),hasCookieAccess:r(),hasBeaconSupport:i()}},{hasRaven:Y,isDocumentReady:X,hasLocalStorage:Z,hasCookieAccess:ee,hasBeaconSupport:te,isLocalDeployment:ne,isQaDeployment:re,isProdDeployment:ie,isDebugEnabled:oe}=Q(void 0!==E?E:void 0);const se=(e,t,n,r=!0)=>{const i=W(n),o=()=>k(i),s=(n,r,s)=>{o().forEach(o=>{const{types:a,oneOf:c,isOptional:u}=i[o],l=n[o],d=void 0!==l,p=A(l);if(!u&&!d)throw t(`Missing required ${e} "${o}". ${r} requires that a value be passed for ${e} "${o}". Received "undefined".`);if(d){if(P(a)&&!a.includes(p))throw t(`Invalid ${e}. ${r} requires that the "${o}" ${e} type be one of ["${a.join('", "')}"]. Received "${p}".`);if("function"!==p){if(P(c)&&!c.includes(String(l)))throw t(`Invalid ${e}. ${r} requires that the "${o}" ${e} be one of ["${c.join('", "')}"]. Received "${l}".`);_(s)({key:o,entry:l,isOptional:u})}}});return!0},a=(e,t)=>{k(e).forEach(n=>{const r=e[n];s(r,t)})},c=e=>{const t=B("default",i),n=C(e,t);return r?L(n,o()):n},u=e=>N(e)((t,n)=>{const r=e[n];t[n]=c(r);return t});return{getKeys:o,mutate:n=>{const o=n($(i,e=>W(i[e])));return se(e,t,o,r)},normalize:c,normalizeEach:u,validate:s,validateEach:a,_peek:()=>V(i)}},ae=(e,t,n)=>{const r=new Error(t);r.name=e;r.stack=`${e}: ${t}`;r.cause=n;return r},ce=e=>{if(e&&e.name&&e.stack&&"object"==typeof e.cause){const t=e.cause;return Boolean(t&&t.type&&t.dangerLevel)}return!1},ue=(e,t)=>ce(e)?"object"==typeof t&&"object"==typeof t.extra?Object.assign({},t,{extra:Object.assign({},t.extra,{},e.cause)}):Object.assign({},t,{extra:Object.assign({},e.cause)}):t,le=e=>ae("UsageTrackerGenericWarning",e,{type:"generic warning",dangerLevel:"This error does not break tracking or the execution thread."}),de=e=>ae("UsageTrackerError",e,{type:"generic error",dangerLevel:"This error breaks the execution thread."}),pe=e=>ae("UsageTrackerConfigError",e,{type:"config error",dangerLevel:"This error breaks the execution thread."}),he=e=>ae("UsageTrackerEventError",e,{type:"event error",dangerLevel:"This error breaks tracking, but not the execution thread."}),ge=se("client dependency",pe,{clientName:{types:["string"],default:"custom"},getDebug:{types:["function"]},getEmail:{types:["function"]},getHubId:{types:["function"]},getHstc:{types:["function"]},getLang:{types:["function"]},getCurrentHref:{types:["function"],isOptional:!0,default:()=>F(["window","location","href"],"")},getReferrer:{types:["function"],isOptional:!0,default:()=>F(["document","referrer"],"")},getUserAgent:{types:["function"],isOptional:!0,default:()=>F(["navigator","userAgent"],"")},getNetworkType:{types:["function"],isOptional:!0,default:()=>F(["navigator","connection","effectiveType"],"")},getNetworkSpeed:{types:["function"],isOptional:!0,default:()=>F(["navigator","connection","downlink"],"")},getScreenWidth:{types:["function"],isOptional:!0,default:()=>F(["screen","width"],"")},getScreenHeight:{types:["function"],isOptional:!0,default:()=>F(["screen","height"],"")},getWindowWidth:{types:["function"],isOptional:!0,default:()=>F(["window","innerWidth"],"")},getWindowHeight:{types:["function"],isOptional:!0,default:()=>F(["window","innerHeight"],"")},getDeployableName:{types:["function"],isOptional:!0,default:()=>F(["window","hubspot","bender","currentProject"],"")},getDeployableVersion:{types:["function"],isOptional:!0,default:()=>F(["window","hubspot","bender","currentProjectVersion"],"")},logMessage:{types:["function"],isOptional:!0,default:(...e)=>F(["console","debug"],(...e)=>e)(...e)},logWarning:{types:["function"],isOptional:!0,default:(...e)=>F(["console","warn"],(...e)=>e)(...e)},logError:{types:["function"],default:(...e)=>F(["console","error"],(...e)=>e)(...e)},reportError:{types:["function"],isOptional:!0,default:()=>{}},reportWarning:{types:["function"],isOptional:!0,default:()=>{}},getTempStorage:{types:["function"]},setTempStorage:{types:["function"]},send:{types:["function"]}}),fe=se("config option",pe,{trackerName:{types:["string"],isOptional:!0,default:"default"},allowUnauthed:{types:["boolean"],isOptional:!0,default:!1},bypassPool:{types:["boolean"],isOptional:!0,default:!1},debug:{types:["boolean","function"],isOptional:!0},events:{types:["object"]},isBeforeUnload:{types:["boolean"],isOptional:!0,default:!1},isExternalHost:{types:["boolean"],isOptional:!0,default:!1},lastKnownEventProperties:{types:["array"],isOptional:!0,default:[]},onError:{types:["function"],isOptional:!0},onWarning:{types:["function"],isOptional:!0},onScheduled:{types:["function"],isOptional:!0,default:()=>{}},preserveTrackerProperties:{types:["boolean"],isOptional:!0,default:!0},preserveTrackerEvents:{types:["boolean"],isOptional:!0,default:!1},properties:{types:["object"],isOptional:!0,default:{}}}),be=se("tracker properties",pe,{email:{types:["string","function","object","null"]},hubId:{types:["number","function","object","null"]},hstc:{types:["string","function","object","null"]},lang:{types:["string","function","object","null"]},deviceId:{types:["string","function","object","null"],isOptional:!0}},!1),me=se("event property",pe,{name:{types:["string"]},namespace:{types:["string"],isOptional:!0,default:""},class:{types:["string"],oneOf:[...["activation","creation","error","exposure","funnel","interaction","none","signup","usage","view","warning"]]},version:{types:["string"],isOptional:!0,default:"v1"},properties:{types:["object"],isOptional:!0,default:{}},meta:{types:["object"],isOptional:!0}}),ye=["boolean","string","number","array"],ve=se("event property",pe,{type:{types:["string","array"],oneOf:[...ye]},isOptional:{types:["boolean"],isOptional:!0,default:!1},description:{types:["string"],isOptional:!0,default:""}}),we=JSON.stringify([]),Oe=(e,t=2e3,n=3)=>{let r=0,i=0,o=e();const s=e=>e(),a=a=>{r||(r=setInterval(()=>{const t=i>=n;o=e()||t;if(o){clearInterval(r);s(a);r=0;i=0}else i+=1},t))},c=x(s,t);return{scheduleFlush:e=>o?c(e):a(e)}},Se=({getTempStorage:e,setTempStorage:t})=>{let n=!1;const r=K();return{getIsInitialized:()=>n,initialize:({normalizeEvent:t})=>{try{const i=e(b)||we,o=JSON.parse(i);o&&P(o)&&o.forEach(e=>{e&&"object"==typeof e&&r.enqueue(t(e))});n=!0}catch(e){}},push:n=>{try{const r=e(b)||we,i=JSON.parse(r);i.push(n);t(b,JSON.stringify(i))}catch(e){}r.enqueue(n)},flush:()=>{const e=[];do{const t=r.dequeue();t&&e.unshift(t)}while(r.peek());try{t(b,we)}catch(e){}return e},peek:r.peek}};var Ee=n(4);const Ie=["what_event_subtype","what_value","what_value_str","where_subscreen2"],_e=["USER_ID","EMAIL"],ke=["TEMP_ID","VISITOR"],Te=(e="",t=[])=>"string"==typeof e&&t.includes(e.split(":")[0]),Ne=(e,t,n)=>{const r=t||n;if(!r||"*"===r)throw he(`Namespace not found for "${e}".`);return r},je=(e,t)=>{!e.who_email&&t.raw.email&&(e.who_email=t.raw.email);!e.who_identifier&&t.raw.userId&&(e.who_identifier=t.raw.userId);e.who_identifier_v2||(e.who_identifier_v2=t.user);e.who_team_identifier||(e.who_team_identifier=t.team);e.utk||(e.utk=t.utk);return e},xe=(e,t)=>{const n=Te(e.user,[..._e]),r=Te(t.who_identifier_v2,[...ke]),i="[NOT YET SET, SHOULD GET SET PRIOR TO FLUSH]"===t.who_identifier_v2;(n&&r||i)&&(t.who_identifier_v2=e.user);return je(t,e)},Ce=(e,t)=>{const{namespace:n,lang:r,screen:i,subscreen:o,timestamp:s,device_id:a,session_id:c,last_sequence_number:u,last_event_id:l}=t,d=Object(Ee.a)(t,["namespace","lang","screen","subscreen","timestamp","device_id","session_id","last_sequence_number","last_event_id"]),h=d,g=M(h,[...w,...Ie]),f=["function","object","null","undefined"],b=N(g)((e,t)=>{let n=h[t];const r=A(n);if(f.includes(r))return e;if("string"===r&&""===n.trim())return e;P(n)&&(n=n.filter(e=>null!=e));e[t]=n;return e});b.locale=r;const m={hublytics_account_id:p,where_app:Ne(d.eventKey,e.namespace,n),where_screen:i||"unknown",where_subscreen:o||"",when_timestamp:s,device_id:a,session_id:c,event_id:l,sequence_number:u,language:r,what_event:e.name,what_event_class:e.class.toUpperCase(),what_version:e.version,what_extra_json:JSON.stringify(b),library:{name:"usage-tracker-js",version:1}};"string"==typeof t.subscreen2&&(m.where_subscreen2=t.subscreen2);Ie.forEach(e=>{const n=t[e],r=A(n);f.includes(r)||(m[e]=n)});return m},Pe=(e,t,n)=>{const r=Ce(e,t);return n?je(r,n):r},Ae=18e5,Re=[{name:"windows 10",pattern:/(Windows 10.0|Windows NT 10.0)/},{name:"windows 8",pattern:/(Windows 8|Windows8.1|Windows NT 6.2|Windows NT 6.3)/},{name:"windows 7",pattern:/(Windows 7|Windows NT 6.1)/},{name:"windows vista",pattern:/Windows NT 6.0/},{name:"windows xp",pattern:/(Windows NT 5.1|Windows XP)/},{name:"android",pattern:/Android/},{name:"linux",pattern:/(Linux|X11)/},{name:"ios",pattern:/(iPhone|iPad|iPod)/},{name:"mac",pattern:/Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh/}];let $e=null;const Me=(e,t)=>({device_id:t||R(),last_event_id:0,last_sequence_number:0,last_timestamp_checked_against_session:e,session_id:e}),Le=(e,t,n)=>{let r=$e;if(!r){const i=e(f);if(i)try{r=JSON.parse(i)}catch(e){r=Me(t,n)}else r=Me(t,n)}return r},De=(e,t)=>{$e=t;e(f,JSON.stringify(t))},Be=(e,t,n)=>{const{device_id:r,last_event_id:i,last_sequence_number:o,last_timestamp_checked_against_session:s,session_id:a}=e,c={device_id:r,last_event_id:i,last_sequence_number:o,last_timestamp_checked_against_session:s,session_id:a};if(t-s>Ae){c.last_event_id=0;c.session_id=t}c.last_event_id=i+1;c.last_sequence_number=o+1;c.last_timestamp_checked_against_session=t;n&&"string"==typeof n&&n!==r&&(c.device_id=n);return c},Ue=(e,t,n,r)=>{const i=Be(Le(e,n,r),n,r);De(t,i);return i},We=e=>{let t="unknown";try{Re.forEach(({name:n,pattern:r})=>{r.test(e)&&(t=n)})}catch(e){}return t.toLowerCase()},He=({getCurrentHref:e,getNetworkType:t,getNetworkSpeed:n,getTempStorage:r,setTempStorage:i},o)=>{const s=Date.now(),a=e(),c=Ue(r,i,s,o),u=Object.assign({},c,{timestamp:s,currentPageUrl:"",networkType:"",networkSpeed:"",hasDeviceIdOverride:!1});u.currentPageUrl=H(a,256);u.networkType=t();u.networkSpeed=n();o&&"string"==typeof o&&(u.hasDeviceIdOverride=!0);return u},Ke=D(({clientName:e,getReferrer:t,getUserAgent:n,getScreenWidth:r,getScreenHeight:i,getWindowWidth:o,getWindowHeight:s,getDeployableName:a,getDeployableVersion:c})=>{const u={windowWidth:-1,windowHeight:-1,screenWidth:-1,screenHeight:-1,screenSize:"",lastPageUrl:"",howOsDetailed:"",singlePageAppSessionId:Date.now(),trackingClient:e||"custom",deployableName:"",deployableVersion:""};u.windowWidth=o();u.windowHeight=s();u.deployableName=a();u.deployableVersion=c();u.howOsDetailed=We(j(n(),"(",")"));u.screenWidth=r();u.screenHeight=i();isNaN(r())||(r()>1024?u.screenSize="large (> 1024)":r()>680?u.screenSize="medium (680 - 1024)":u.screenSize="small (< 680)");const l=t();u.lastPageUrl=H(l,256);return u}),Fe=(e,{deviceIdOverride:t=""}={})=>{const n=Object.assign({},Ke(e),{},He(e,t)),r=k(n).filter(e=>!n[e]);return M(n,r)},qe=(e,t,n)=>{let r=`[usage-tracker-core "${e}"] ${t}`;n&&n.trim().length>0&&(r+=`\n----------------------------------------\n${n}\n----------------------------------------`);return r},Ve=e=>(t,n,r)=>{const{where_app:i,what_event:o}=r||{},s=`eventKey: ${t}\neventType: ${`[${q(i)}] `+q(o)}`,a=JSON.parse(JSON.stringify(r||{}));a.what_extra_json=JSON.parse(a.what_extra_json||"{}");e(qe("debug log",n,s),a)},ze=(e,t)=>(n,r)=>{e(n);_(t)(n,r)},Je=(e,t)=>(n,r)=>{e(n);_(t)(n,r)},Ge=(e,t,n)=>r=>(i,o)=>{e(o);const s=le(`Property "${i}" failed to resolve asynchronously and will fallback to "null".`);t(s);_(n)(o,{extra:{propertyName:i},fingerprint:["usage-tracker-js","tracker:failedResolveProperty","event:"+r]})},Qe=({deviceId:e,utk:t,email:n,hubId:r},{allowUnauthed:i,isExternalHost:o})=>{let s,a,c;r&&(c=r);n?a=`EMAIL:::${n}:::${p}`:t?s=o?`TEMP_ID:::${t}:::${p}`:`VISITOR:::${t}:::${p}`:e&&(s=`TEMP_ID:::${e}:::${p}`);if(!a&&!i)throw he("Could not identify an authenticated user. Please specify an email address (email).");if(!c&&!i)throw he("Could not identify a HubSpot Portal ID. Please specify a Portal ID (hubId).");if(!s&&!a&&i)throw he("Could not identify the user. Please specify an email address (email) or an __hstc cookie (hstc) or a device id (deviceId).");return{user:a||s,team:c}},Ye=e=>{let t;if(e){const n=e.split(".");n.length>1&&(t=n[1])}return t},Xe=({email:e,userId:t,hubId:n,hstc:r,deviceId:i},{allowUnauthed:o,isExternalHost:s})=>{const a=Ye(r),{user:c,team:u}=Qe({deviceId:i,utk:a,email:e,hubId:n},{allowUnauthed:o,isExternalHost:s});return{user:c,team:u,utk:a,raw:{email:e,userId:t,hubId:n,hstc:r,deviceId:i}}},Ze=e=>$(e,t=>{const n=e[t];n.properties=$(n.properties,(e,t)=>"string"==typeof t||P(t)?{type:t,isOptional:!1}:t);n.properties=ve.normalizeEach(n.properties);return n}),et=e=>{const t=Object.freeze(e),n=e=>{const n=t[e];if(!n||"object"!=typeof n)throw he(`Invalid event key. The event definition for "${e}" is undefined. Check your events.yaml dictionary.`);return n},r=(e,t={})=>{const r=n(e).properties||{},i=t||{},o=[...ye,"null"],s=$(r,e=>{const{type:t,isOptional:n}=r[e];if(n)return{types:o,isOptional:!0};if("string"==typeof t){if(ye.includes(t))return{types:[t],isOptional:!1};if(t.includes("oneOf")){return{oneOf:j(t,"[","]").split(",").map(e=>U(U(e,'"'),"'")),isOptional:!1}}}return{oneOf:t,isOptional:n}}),a=$(i,()=>({types:o,isOptional:!0})),c=C(s,a);return se("event property",he,c,!1)};return{getDefinition:n,createPropertySchema:r,getAll:()=>t}},tt=(e,t)=>{const n=me.normalizeEach(e);me.validateEach(n,t);return Ze(n)},nt=e=>{const t=z({"tracker.client":e.clientName,"tracker.name":e.trackerName}),n=Ve(e.logMessage),r=ze(e.logError,t(e.onError)),i=et(e.events),o=be.mutate(e=>({email:Object.assign({},e.email,{types:["string","null"]}),hubId:Object.assign({},e.hubId,{types:["number","null"]}),hstc:Object.assign({},e.hstc,{types:["string","null"]}),lang:Object.assign({},e.lang,{types:["string","null"]}),deviceId:Object.assign({},e.deviceId,{types:["string"]})})),s=_(e.debug,()=>e.debug)(),a=(e,t)=>{try{i.createPropertySchema(e,t).mutate(e=>Object.assign({},e,{},o._peek())).validate(t,`Event "${e}"`);return!0}catch(n){r(n,{extra:{eventKey:e,eventProperties:G(t)},fingerprint:["usage-tracker-js","tracker:validateProperties","event:"+e]});return!1}},c=e=>{try{return i.getDefinition(e)}catch(t){r(t,{extra:{eventKey:e},fingerprint:["usage-tracker-js","tracker:getDefinition","event:"+e]});return null}},u=(t,n)=>{const i={email:n.email,userId:n.userId,hubId:n.hubId,hstc:n.hstc};n.deviceId&&(i.deviceId=n.deviceId);const o={allowUnauthed:e.allowUnauthed,isExternalHost:e.isExternalHost};try{return Xe(i,o)}catch(e){r(e,{extra:Object.assign({eventRawIdentifiers:G(i),eventProperties:G(n)},o),fingerprint:["usage-tracker-js","tracker:getIdentifiers","event:"+t]});return null}},l=(e,t,n,i)=>{try{return Pe(t,n,i)}catch(t){r(t,{extra:{eventKey:e,eventProperties:G(n),eventIdentifiers:G(i?i.raw:void 0)},fingerprint:["usage-tracker-js","tracker:createEvent","event:"+e]});return null}},d=(t,n,i)=>{try{e.scheduleEvent(e,i,t,n);_(e.onScheduled)(t);return!0}catch(e){r(e,{extra:{eventKey:t,eventIdentifiers:G(i.raw)},fingerprint:["usage-tracker-js","tracker:dispatchEvent","event:"+t]});return!1}};return(e,t,r)=>{const i=c(e);if(!i)return!1;const o=r(i);if(!a(e,o))return!1;const p=C(o,t),h=u(e,p),g=Object.assign({},M(p,["hasDeviceIdOverride","deviceId"]),{eventKey:e}),f=l(e,i,g,h||void 0);if(h&&f){s&&n(e,"Event is being dispatched to be sent.",f);return d(e,f,h)}s&&n(e,"Event was not dispatched.",f||void 0);return!1}},rt=(e={},t,n)=>{const r={},i=k(e),o=i.length,s=i.reduce((t,n)=>{const i=e[n];if(i&&"function"==typeof i){t.push({key:n,func:i});return t}if(i&&T(i)){t.push({key:n,promise:i});return t}r[n]=i;return t},[]),a=()=>{Object.keys(r).length===o&&t(r)};if(s.length){const e=(e,t)=>{r[e]=t;a()},t=(e,t)=>{r[e]=null;_(n)(e,t);a()};return s.forEach(({key:n,promise:r,func:i})=>{const o=i?new Promise(e=>e(i())):r;o&&o.then(t=>e(n,t)).catch(e=>t(n,e))})}return t(r)},it=e=>{let t=Object.assign({},e.properties);const n=z({"tracker.client":e.clientName,"tracker.name":e.trackerName}),r=Ge(e.logError,e.logWarning,n(e.onError)),i=_(e.debug,()=>e.debug)(),o=Je(e.logWarning),s=n=>{const r=e.lastKnownEventProperties;r&&r.length&&r.forEach(e=>{const r=n[e],i=A(r);ye.includes(i)&&(t[e]=r)})};return{resolveProperties:(e,n,i)=>{rt(t,e=>{t=C(e,t);s(n);i(W(t))},r(e))},createPropertiesFilter:(t,n)=>r=>{const s=k(r.properties),a=e=>O.includes(e)||s.includes(e),c=Object.keys(n).filter(e=>!a(e));if(c.length){o(le(`Event "${t}" is possibly being tracked with unexpected properties. See go/unexpectedproperties`));i&&e.logMessage(qe("debug log",`Event "${t}" has unexpected Properties.`,"unexpectedProperties: "+c.map(e=>`"${e}"`).join(", ")))}return n},getCache:()=>W(t),addToCache:(e,n)=>{t[e]=n}}},ot=(e,t)=>{if(!t||"object"!=typeof t)throw pe(`Invalid argument. The "createTracker" function requires to be passed a config argument of type "object". Received type "${typeof t}".`);const n=fe.mutate(t=>Object.assign({},t,{debug:Object.assign({},t.debug,{default:e.getDebug}),onError:Object.assign({},t.onError,{default:e.reportError}),onWarning:Object.assign({},t.onWarning,{default:e.reportWarning})})),r=be.mutate(t=>Object.assign({},t,{email:Object.assign({},t.email,{default:e.getEmail}),hubId:Object.assign({},t.hubId,{default:e.getHubId}),hstc:Object.assign({},t.hstc,{default:e.getHstc}),lang:Object.assign({},t.lang,{default:e.getLang})})),i=n.normalize(t);n.validate(i,'"createTracker"');const o=r.normalize(i.properties||{});r.validate(o,'"createTracker"');const s=tt(i.events,'"createTracker"');return Object.assign({events:s,properties:o},M(i,["events","properties"]),{},e)},st=(e,t={})=>{const n=ot(e,t),r=nt(n),i=it(n),o=_(t.debug,()=>t.debug)();return{clone:(t={})=>{if(!t||"object"!=typeof t)throw de(`Invalid argument. The "clone" method requires to be passed a valid tracker config of type "object". Received type "${typeof t}".`);const r=M(C(t,n),k(e)),o=L(i.getCache(),be.getKeys()),s=M(i.getCache(),k(o));r.properties=C(t.properties||{},o);r.preserveTrackerProperties&&(r.properties=C(r.properties,s));r.preserveTrackerEvents&&(r.events=C(r.events||{},n.events));return st(e,r)},getConfig:()=>{if(o)return Object.assign({},M(n,["properties"]),{properties:i.getCache()});throw de("Invalid call. This method should only be used when 'debug: true'. Please do not use this in production.")},setProperties:(e={})=>{if(!e||"object"!=typeof e)throw de(`Invalid argument. The "setProperties" method requires to be passed a properties argument of type "object". Received type "${typeof e}".`);k(e).forEach(t=>{i.addToCache(t,e[t])})},track:(e,t={})=>{if(!e||"string"!=typeof e)throw de(`Invalid argument. The "track" method requires to be passed an eventKey of type "string". Received type "${typeof e}".`);if(!t||"object"!=typeof t)throw de(`Invalid argument. The "track" method requires the 2nd arg to be passed eventProperties of type "object". Received type "${typeof t}".`);t.deviceId&&i.addToCache("deviceId",t.deviceId);i.resolveProperties(e,t,o=>{const s=o.deviceId,a=n.getMetaProperties({deviceIdOverride:s?s.toString():null});r(e,a,i.createPropertiesFilter(e,C(t,o)))})}}},at=(e={})=>{const t=ge.normalize(e);ge.validate(t,'"createClient"');const{clientName:n,getDebug:r,getEmail:i,getHubId:o,getHstc:s,getLang:a,getCurrentHref:c,getReferrer:u,getUserAgent:l,getNetworkType:d,getNetworkSpeed:p,getScreenWidth:h,getScreenHeight:g,getWindowWidth:f,getWindowHeight:b,getDeployableName:w,getDeployableVersion:O,getTempStorage:S,logMessage:E,logWarning:I,logError:_,reportError:k,reportWarning:T,send:N,setTempStorage:j}=t,x=Se({getTempStorage:S,setTempStorage:j}),{scheduleFlush:C}=Oe(X),P=(e,t)=>{const{identifiers:n,isBeforeUnload:r,isExternalHost:i}=e,o=!(!n.raw.email||!n.raw.hubId);let s="clientSendTimestamp="+Date.now();i&&(s+="&dil=true");N({events:t,isBeforeUnload:!!r,isAuthed:o,query:s})},A=e=>{const t=x.flush();t&&t.length&&P({identifiers:e},t)},R=(e,t)=>{x.getIsInitialized()||x.initialize({normalizeEvent:(...t)=>xe(e,...t)});x.push(t);C(()=>A(e))},$=()=>"true"===S(m),M=(e,t,n)=>{try{const r=JSON.parse(S(e)||JSON.stringify([]));n&&r.length>=n&&r.shift();r.push(t);j(e,JSON.stringify(r))}catch(e){}},L={clientName:n,getCurrentHref:c,getReferrer:u,getUserAgent:l,getNetworkType:d,getNetworkSpeed:p,getScreenWidth:h,getScreenHeight:g,getWindowWidth:f,getWindowHeight:b,getDeployableName:w,getDeployableVersion:O,getTempStorage:S,setTempStorage:j},D=e=>Fe(L,e),B=(e,t,n="",r)=>{e.bypassPool||e.isBeforeUnload?P(Object.assign({},e,{identifiers:t}),[r]):R(t,r);if($()){M(v,n,1e3);M(y,r,25)}};return{createTracker:e=>st({clientName:n,getMetaProperties:D,getDebug:r,getEmail:i,getHubId:o,getHstc:s,getLang:a,logError:_,logMessage:E,logWarning:I,reportError:k,reportWarning:T,scheduleEvent:B},e)}},ct=(e,t)=>{const n=("; "+t).split(";");if(n.length)for(let t=0;t<n.length;t++){const r=n[t].split("=");if(2===r.length&&r[0].trim()===e)return r[1]}return null},ut=5184e6,lt=e=>ee?ct(e,E.document.cookie):null,dt=(e,t,n=ut)=>{if(ee){const r=new Date,i=new Date(r.setTime(r.getTime()+n)).toUTCString();E.document.cookie=`${e}=${t};expires=${i};path=/`}};function pt(){return lt(g)||null}var ht={getItem:(e="")=>{let t="";if(Z)try{t=E.localStorage.getItem(e)||""}catch(n){t=lt(e)}return t},setItem:(e="",t="")=>{if(Z)try{E.localStorage.setItem(e,t||"")}catch(n){dt(e,t)}return t}};var gt={getHstc:pt,sendBeacon:(e,t,n=(()=>{}))=>{let r=!1;if(te)try{const n=new Blob([JSON.stringify(t)],{type:"text/plain"});r=E.navigator.sendBeacon(e,n)}catch(e){}r||"function"!=typeof n||n();return r},reportError:(e,t={})=>"object"==typeof E&&Y(E)&&E.Raven.captureException(e,ue(e,Object.assign({},t,{level:"error"}))),reportWarning:(e,t={})=>"object"==typeof E&&Y(E)&&E.Raven.captureException(e,ue(e,Object.assign({},t,{level:"warning"}))),getDebug:()=>oe,getLang:(e="en-US")=>{if(void 0!==E&&"object"==typeof E.navigator){const e=E.navigator.languages?E.navigator.languages[0]:E.navigator.language;if(e)return e.toLocaleLowerCase()}return e},getTempStorage:ht.getItem,setTempStorage:ht.setItem,logError:(...e)=>{(ne||re||oe)&&console.error(...e)},logWarning:(...e)=>{(ne||re||oe)&&console.warn(...e)}};const ft=Object(u.getFullUrl)("app-api"),bt="/usage-logging/v1/log/hublytics-multi/no-auth",mt=e=>gt.reportError(e,{fingerprint:["usage-tracker-js","network"]});const yt=at({clientName:"app",getDebug:gt.getDebug,getHstc:gt.getHstc,getTempStorage:gt.getTempStorage,setTempStorage:gt.setTempStorage,logWarning:gt.logWarning,logError:gt.logError,reportWarning:gt.reportWarning,reportError:gt.reportError,getEmail:()=>s()({ignoreRedirect:!0}).then(({user:e})=>e.email),getHubId:()=>s()({ignoreRedirect:!0}).then(({portal:e})=>e.portal_id),getLang:()=>r.a.Info.then(i.a),send:({events:e,query:t,isBeforeUnload:n})=>{const r=`${ft}${bt}?${t}`,i=e,o=()=>{c.a.post(r,{data:i}).catch(mt)};n?gt.sendBeacon(r,i,o):o()}}).createTracker;var vt=n(160),wt=n.n(vt),Ot=n(157);n.d(t,"a",(function(){return St}));const St=yt({events:wt.a,properties:{namespace:Ot.a}}),Et=yt({events:wt.a,properties:{namespace:Ot.g},allowUnauthed:!0});t.b=Et},236:function(e,t,n){"use strict";n.r(t);var r=n(146);function i(e){let t;try{t=localStorage.getItem(e)}catch(e){}return t}function o(){const e="CROSS_TAB_TEST_KEY";let t=!!window.localStorage;if(t)try{localStorage.setItem(e,"");localStorage.removeItem(e)}catch(e){t=!1}return t}const s="CROSS_TAB",a="CROSS_TAB_DEBUG";function c(){return"true"===i(a)}function u(e,t){if(c()){const n=`${s} - ${e}`;t?console.debug(n,t):console.debug(n)}}function l(e){return`${e}-${Date.now()}-${Math.random().toFixed(10).substr(2)}`}class d{constructor(){this.callbacks={}}addEventListener(e,t){this.callbacks[e]||(this.callbacks[e]=[]);this.callbacks[e].push(t)}removeEventListener(e,t){this.callbacks[e]=this.callbacks[e].filter(e=>e!==t)}trigger(e,...t){this.callbacks[e]&&this.callbacks[e].forEach(e=>e(...t))}}class p{constructor(e){this.handleStorageEvent=this.handleStorageEvent.bind(this);this.eventManager=new d;this.namespace="";e||!o()?this.storage=e||{}:window.addEventListener("storage",this.handleStorageEvent)}setNamespace(e){this.namespace=e}setKey(e,t){this.storageKey=e;this.storageSubKey=t}getNamespacedKey(e){return this.namespace?`${this.namespace}-${e}`:e}getItem(e){try{const t=this.getNamespacedKey(e);return this.storage?this.storageKey?this.storage[this.storageKey][this.storageSubKey][t]:this.storage[t]:this.storageKey?JSON.parse(localStorage.getItem(this.storageKey))[this.storageSubKey][t]:JSON.parse(localStorage.getItem(t))}catch(e){u("Error while reading localStorage value:",e);return null}}setItem(e,t){const n=this.getNamespacedKey(e),r=this.storageKey||n;let i=t;if(this.storageKey){let e;try{e=this.storage?this.storage[this.storageKey][this.storageSubKey]:JSON.parse(localStorage.getItem(this.storageKey))[this.storageSubKey]}catch(t){u("Error while writing localStorage value:",t);e={}}i={[this.storageSubKey]:Object.assign({},e,{[n]:t})}}if(this.storage){this.storage[r]=i;this.eventManager.trigger(e,t)}else try{localStorage.setItem(r,JSON.stringify(i));this.eventManager.trigger(e,t)}catch(e){}}getArrayItem(e){const t=this.getItem(e);return Array.isArray(t)?t:[]}pushItem(e,t){this.setItem(e,this.getArrayItem(e).concat([t]))}removeArrayItem(e,t){this.setItem(e,this.getArrayItem(e).filter(e=>e!==t))}moveItemToFront(e,t){this.setItem(e,[t,...this.getArrayItem(e).filter(e=>e!==t)])}handleStorageEvent({key:e,newValue:t,oldValue:n}){let r;if(this.storageKey){if(e&&this.storageKey===e){r=null;try{const e=JSON.parse(n)[this.storageSubKey],i=JSON.parse(t)[this.storageSubKey];r=[...Object.keys(e),...Object.keys(i)].find(t=>JSON.stringify(e[t])!==JSON.stringify(i[t]))}catch(e){u("Error while parsing localStorage value:",e)}}}else r=e;if(r&&r.indexOf(this.namespace)>-1){const e=r.replace(this.namespace+"-","");this.eventManager.trigger(e,this.getItem(e))}}removeItemChangeListener(e,t){this.eventManager.removeEventListener(e,t)}onItemChange(e,t){this.eventManager.addEventListener(e,t)}}const h=1e3,g=2*h,f=3*h,b="TABS_HEARTBEAT",m="TABS_MESSAGE",y="TABS_LIST",v="becomeMaster",w="surrenderMaster",O="anyMessage",S="message",E="removed";class I{constructor(e,t,n=new p,r=window){this.checkMasterIsAlive=this.checkMasterIsAlive.bind(this);this.handleReceivedMessage=this.handleReceivedMessage.bind(this);this.handleUpdatedTabs=this.handleUpdatedTabs.bind(this);this.heartbeat=this.heartbeat.bind(this);this.unregister=this.unregister.bind(this);this.currentTab=l("tab");this.storage=n;this.options=t;n.setNamespace(e);n.setKey(...t.storageKey||[]);this.eventManger=new d;Object.keys(t).filter(e=>/^on[A-Z]/.test(e)).forEach(e=>{this[e]&&t[e]&&this[e](t[e])});this.storage.onItemChange(m,this.handleReceivedMessage);if(!this.options.passive){this.storage.onItemChange(y,this.handleUpdatedTabs);r.addEventListener("beforeunload",this.unregister);this.register();this.checkMasterAliveInterval=setInterval(this.checkMasterIsAlive,g)}}checkMasterIsAlive(){const e=this.getMasterTab();if(Date.now()-this.storage.getItem(b)>f){u(`Master (${e}) removed due to inactivity`);this.storage.removeArrayItem(y,e)}}didBecomeMasterTab(){u("Tab is now master");this.eventManger.trigger(v);this.heartbeat();this.heartbeatInterval=setInterval(this.heartbeat,h)}register(){if(this.options.passive)u("Tab is passive. Won't be registered");else{u("Registered current tab with id:",this.currentTab);this.storage.pushItem(y,this.currentTab)}}reRegister(){u("Current tab was removed from localStorage. Re-registering");clearInterval(this.heartbeatInterval);this.eventManger.trigger(E);this.register()}dispatchMessage(e){u("Dispatching message:",e);this.storage.setItem(m,{from:this.currentTab,id:l("message"),message:e})}getMasterTab(){return this.storage.getArrayItem(y)[0]}isCurrentTabMaster(){return this.getMasterTab()===this.currentTab}isCurrentTabInTabList(){return this.storage.getArrayItem(y).indexOf(this.currentTab)>-1}handleReceivedMessage(e){if(e){if(e.from!==this.currentTab){u("Received message:",e);this.eventManger.trigger(O,e);e.from===this.getMasterTab()&&this.eventManger.trigger(S,e)}}else u("Received undefined or null message. currentTab: "+this.currentTab)}handleUpdatedTabs(){const e=this.currentMasterTab,t=this.getMasterTab();this.currentMasterTab=t;if(t!==e)if(t===this.currentTab)this.didBecomeMasterTab();else{u("Master updated:",this.getMasterTab());clearInterval(this.heartbeatInterval);this.eventManger.trigger(w)}this.isCurrentTabInTabList()||this.reRegister()}heartbeat(){this.storage.setItem(b,Date.now())}onBecomeMaster(e){this.eventManger.addEventListener(v,e)}onSurrenderMaster(e){this.eventManger.addEventListener(w,e)}onMessageFromMaster(e){this.eventManger.addEventListener(S,e)}onMessage(e){this.eventManger.addEventListener(O,e)}onRemoved(e){this.eventManger.addEventListener(E,e)}unregister(){this.storage.removeItemChangeListener(y,this.handleUpdatedTabs);this.storage.removeArrayItem(y,this.currentTab)}}var _=I,k=n(130),T=n(129),N=n(153),j=n(251),x=n(243),C=n(126);let P;function A(){x.a.setIsMaster(!0);x.a.getCanPlaySounds()||x.a.getPlaySoundFunction({isDummySound:!0})()}function R(){x.a.setIsMaster(!1)}function $(){x.a.setIsMaster(!1)}function M({message:e}){if(e.type)switch(e.type){case k.a:x.a.notificationClosed(e.id);break;case k.b:C.a.resetCounter();break;default:Object(T.a)("The received message type is unknown:",e.type)}}function L(){const e="NOTIFICATIONS_"+Object(N.a)();P=new _(e,{onBecomeMaster:A,onSurrenderMaster:$,onMessage:M,onRemoved:R});x.a.onClose(e=>{Object(j.d)(e)&&P.dispatchMessage({id:e.id,type:k.a})});return P}var D=n(239),B=n(128),U=n.n(B);const W="/persistent-notifications/v1";function H(e,t,n){return U.a.put(`${W}/notifications/notification/${e}/deliveryMethod/${t}/action/${n}`)}function K(){return U.a.get(W+"/notifications")}const F="HAS_BANNER_NOTIFICATIONS",q="LAST_CHECKED",V=6e5;var z=n(148),J=n(150),G=n.n(J),Q=n(132);const Y="/banner-notifications/"+G.a.get(),X="notifications-banner-iframe";function Z(){const e=window.top.document.getElementById(Q.p);return e?{element:e,useAsContainer:!0}:{element:window.top.document.getElementById(Q.t),useAsContainer:!1}}function ee(){return window.top.document.getElementById(X)}function te(){const e=Z();if(!e.element){Object(T.a)("Nav is not available, returning");return}const t=window.top.document.createElement("iframe");t.setAttribute("src",Y);t.setAttribute("id",X);const n=t.style;n.border="0";n.display="block";n.height="0";n.transitionDuration=".2s";n.width="100%";e.useAsContainer?e.element.appendChild(t):e.element.parentNode.insertBefore(t,e.element)}function ne(){return Promise.all([Object(D.b)(z.c,F),Object(D.b)(z.c,q)]).then(([e,t])=>{const n=Date.now()-t;return Object(T.b)()||!t||e||n>V})}class re{static handleError(e){throw e}static loadBannerIframe(){if(ee())Object(T.a)("Banner iframe already exists - not loading iframe");else{Object(T.a)("Loading banner iframe");te()}}static handleBannerNotifications(e=[]){if(e&&e.length>0){this.loadBannerIframe();return Object(D.c)(z.c,F,!0)}Object(T.a)("User has no banner notifications - not loading iframe");return Object(D.c)(z.c,F)}static checkForNotification(){K().then(({banner:e})=>{this.handleBannerNotifications(e.notifications)}).catch(this.handleError)}static markAs(e,t,n){return H(e,t,n).catch(this.handleError)}static setup(){ne().then(e=>{if(e){Object(T.a)("Checking for persistent notifications");this.checkForNotification();Object(D.c)(z.c,q,Date.now())}else Object(T.a)("Persistent notifcations status cached - not checking for new notifications")})}}var ie=n(158),oe=n.n(ie),se=n(234),ae=n(3),ce=n.n(ae);const ue=["403"];function le(e){const t=G.a.get(),n=new RegExp(t,"g");return e.replace(n,"<portal_id>")}function de(e){const t=/\/(?:user)\/(\d+)?(?:\/|$)/.exec(e),n=t&&t.length&&t.length>1?t[1]:void 0,r=new RegExp(n,"g");return n?e.replace(r,"<user_id>"):e}function pe(e){return e.replace(/\?.*$/,"")}function he(e){return de(le(pe(e)))}function ge(e){const t=e.errorCode||e.status;if(e.options&&e.options.url){const n=he(e.options.url);t&&ce.a.captureMessage(e,{fingerprint:ue.includes(t.toString())?[t]:[n,t],message:`${t}: ${n}`})}throw e}const fe="PRESENCE_TOKEN";function be(e,t){return`/presence/v1/presence/portal/${e}/user/${t}`}function me(e){Object(se.a)().then(t=>oe.a.put(be(Object(N.a)(),t),{data:{token:e}})).catch(ge).catch(()=>Object(D.a)().then(e=>e.delete(fe)).catch(e=>{console.error("Cannot access IndexedDB: "+e)}))}function ye(){U.a.put("/presence/v1/presence").then(e=>Object(D.a)().then(t=>{t.set(fe,e).catch(e=>{console.error("Cannot access IndexedDB, stopping presence ping: "+e);Ee()})})).catch(ge).catch(e=>{e&&e.status&&[401,403].includes(e.status)&&Ee()}).catch(e=>{setTimeout(()=>{throw e})})}function ve(){Object(T.a)("Ping presence API");Object(D.a)().then(e=>e.get(fe)).then(e=>{e?me(e):ye()}).catch(e=>{console.log("Cannot access IndexedDB: "+e);Ee()})}const we=6e4;let Oe;const Se=()=>{ve();Oe=setInterval(ve,we)},Ee=()=>{clearInterval(Oe)};var Ie=n(140),_e={setup(){n.e("ably").then(n.bind(null,237)).then(e=>e.default).then(e=>e.setup()).catch(Ie.a)}};const ke="#0091ae",Te="#7fd1de",Ne="#e5f5f8",je="#ff8f59",xe="#f5c26b",Ce="#425b76",Pe="#7c98b6",Ae="#ffffff",Re="#007a8c";var $e=n(161);const Me=""+$e.c;class Le{constructor(){this.styles=`\n      .${Q.l} {\n        background-color: ${Ne};\n        border: 1px solid ${Te};\n        box-sizing: border-box;\n        color: ${Ce};\n        cursor: default;\n        font-family: ${Me};\n        font-size: 14px;\n        font-weight: 500;\n        left: 50%;\n        line-height: 24px;\n        max-width: 900px;\n        min-width: 500px;\n        opacity: 0;\n        padding: 17px 60px 17px 20px;\n        position: fixed;\n        top: 62px;\n        transform: translateX(-50%);\n        transition: opacity ${Q.i}ms;\n        z-index: 1300;\n      }\n\n      .${Q.m} {\n        cursor: pointer;\n        opacity: 1;\n        transition: opacity ${Q.g}ms;\n      }\n\n      .${Q.l} a {\n        color: ${ke};\n        text-decoration: none;\n      }\n\n      .${Q.l} a:hover {\n        color: ${Re};\n        text-decoration: underline;\n      }\n\n      .${Q.k} {\n        background: scroll border-box transparent none 0% 0% repeat;\n        border: 0px none;\n        box-sizing: border-box;\n        color: ${Pe};\n        cursor: pointer;\n        display: block;\n        font-kerning: auto;\n        height: 16px;\n        line-height: 24px;\n        margin: 0;\n        outline-offset: 0px;\n        overflow: visible;\n        padding: 0px;\n        position: absolute;\n        right: 24px;\n        text-align: start;\n        text-transform: none;\n        top: 22px;\n        transition: all 0.15s ease-out 0s;\n        width: 16px;\n      }\n\n      .${Q.k}:after {\n        display: block;\n        background: rgba(255, 255, 255, 0);\n        border-radius: 100%;\n        padding: 20px;\n        content: ' ';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translateZ(0) translate(-50%, -50%);\n        transition: all 150ms ease-out;\n      }\n\n      .${Q.k}:hover:after {\n        background: rgba(255, 255, 255, 0.1);\n      }\n\n      .${Q.k} path {\n        fill: currentColor;\n        stroke: currentColor;\n        stroke-width: 2;\n      }\n\n      .${Q.j} {\n        border: 0 !important;\n        clip: rect(0, 0, 0, 0) !important;\n        height: 1px !important;\n        margin: -1px !important;\n        overflow: hidden !important;\n        padding: 0 !important;\n        position: absolute !important;\n        width: 1px !important;\n      }\n\n      #${Q.q} .${Q.r} {\n        background-color: rgb(242, 84, 125);\n        box-shadow: rgb(255 255 255) 0px 0px 0px 1px;\n        display: block;\n        position: absolute;\n        top: -2px;\n        left: 10px;\n        pointer-events: none;\n        text-align: center;\n        vertical-align: baseline;\n        border-radius: 100%;\n        height: 10px;\n        text-indent: -1000rem;\n        width: 10px;\n      }\n\n      #${Q.s} .${Q.r} {\n        background-color: #F3547D !important;\n        border: 1px solid white !important;\n        border-radius: 500px !important;\n        box-shadow: 0 0 0 1px #FFF !important;\n        color: #FFF !important;\n        display: inline-block !important;\n        font-size: .6875rem !important;\n        font-weight: 600 !important;\n        line-height: 1.1875rem !important;\n        min-height: 1.23rem !important;\n        min-width: 1.23rem !important;\n        padding: 0 .25rem !important;\n        position: absolute !important;\n        right: 3px !important;\n        text-align: center !important;\n        top: 2px !important;\n        vertical-align: baseline !important;\n        transform: scale(0.8) !important;\n        -webkit-transform: scale(0.8) !important;\n        -moz-transform: scale(0.8) !important;\n      }\n\n    `}getStyleElement(){const e=document.createElement("style");e.innerHTML=this.styles;return e}}var De=new Le;function Be(){const e=window.top.document.head;if(e){const t=De.getStyleElement();e.appendChild(t)}}var Ue=n(242),We=n(250),He=n(6),Ke=n(162),Fe=n.n(Ke),qe=n(163);const Ve="fade-in",ze="browser-notifications-pre-permission-popup";class Je extends qe.a{constructor(e){super(e);this.close=this.close.bind(this);this.handleContinueClick=this.handleContinueClick.bind(this);this.handleMaybeLaterClick=this.handleMaybeLaterClick.bind(this)}close(){this.node.parentNode.removeChild(this.node)}handleContinueClick(){this.close();this.props.onContinueClick()}handleMaybeLaterClick(){this.close();this.props.onMaybeLaterClick()}render(){const e=Object(qe.c)(`\n      <div class="${ze}">\n        <img src="${Fe.a}" />\n        <header>\n          ${He.a.text("app.prePermission.header")}\n        </header>\n        <p>\n          ${He.a.text("app.prePermission.bodyTextTop")}\n        </p>\n        <p>\n          ${He.a.text("app.prePermission.bodyTextBottom")}\n        </p>\n        <div>\n          <button data-selenium='pre-permission-continue'>\n            ${He.a.text("app.prePermission.continueButton")}\n          </button>\n          <a data-selenium='pre-permission-later'>\n            ${He.a.text("app.prePermission.maybeLaterLink")}\n          </a>\n        </div>\n      </div>\n    `);e.querySelector("button").addEventListener("click",this.handleContinueClick);e.querySelector("a").addEventListener("click",this.handleMaybeLaterClick);return e}}Je.style=`\n    .${ze} {\n      background: linear-gradient(to top left, ${je}, ${xe});\n      border-radius: 3px;\n      color: ${Ae};\n      font-family: ${$e.b}, ${$e.a};\n      font-size: 14px;\n      left: 15px;\n      opacity: 0;\n      padding: 30px 20px;\n      position: fixed;\n      text-align: center;\n      top: 15px;\n      transition: opacity 0.5s ease;\n      width: 420px;\n      z-index: 11111;\n    }\n\n    .${ze}.${Ve} {\n      opacity: 1;\n    }\n\n    .${ze} ::after {\n      border-color: ${xe} transparent;\n      border-width: 0 15px 15px;\n      border-style: solid;\n      bottom: auto;\n      content: "";\n      display: block;\n      left: 75px;\n      position: absolute;\n      right: auto;\n      top: -15px;\n      width: 0;\n    }\n\n    .${ze} img {\n      margin-bottom: 10px;\n      width: 120px;\n    }\n\n    .${ze} header {\n      font-size: 20px;\n      font-weight: 500;\n      line-height: 23px;\n      margin-bottom: 10px;\n    }\n\n    .${ze} header + p {\n      margin-bottom: 25px\n    }\n\n    .${ze} p {\n      margin: 0 0 10px;\n      line-height: 20px;\n    }\n\n    .${ze} button {\n      background-color: ${Ae};\n      border: 0;\n      border-radius: 3px;\n      color: ${je};\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      margin: 5px 0 10px;\n      padding: 5px;\n      width: 200px\n    }\n\n    .${ze} a {\n      display: block;\n      color: ${Ae};\n      cursor: pointer;\n      font-size: 12px;\n      text-decoration: none;\n    }\n  `;const Ge="denied",Qe="granted";var Ye=n(147);const Xe="overlay";class Ze extends qe.a{render(){return Object(qe.c)(`\n      <div class=${Xe}></div>\n    `)}}Ze.style=`\n  .${Xe} {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0; \n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0,0,0,0.5);\n    z-index: 11111;\n  }\n`;var et=n(157),tt=n(235);class nt{static getScreen(){return window.top.location.pathname}static getEvent(e,t={}){return Object.assign({action:e},t,{screen:nt.getScreen()})}trackBrowserNotificationEvent(e,t){tt.a.track(et.e.BROWSER_NOTIFICATIONS_INTERACTION,nt.getEvent(e,t))}trackNativeRequestPermissionShown(){this.trackBrowserNotificationEvent(et.c.NATIVE_REQUEST_PERMISSION_SHOWN)}trackNativeRequestAllowClicked(){this.trackBrowserNotificationEvent(et.c.NATIVE_REQUEST_ALLOW_CLICKED)}trackNativeRequestDenyClicked(){this.trackBrowserNotificationEvent(et.c.NATIVE_REQUEST_DENY_CLICKED)}trackPrePermissionPopupShown(){this.trackBrowserNotificationEvent(et.c.PRE_PERMISSION_SHOWN)}trackPrePermissionContinueClicked(){this.trackBrowserNotificationEvent(et.c.PRE_PERMISSION_CONTINUE_CLICKED)}trackPrePermissionMaybeLaterClicked(){this.trackBrowserNotificationEvent(et.c.PRE_PERMISSION_MAYBE_LATER_CLICKED)}}var rt=new nt,it=n(151);class ot{constructor(){this.overlay=Object(qe.b)(Ze);this.parent=window.top.document.body;this.popup=null}addOverlay(){this.parent.appendChild(this.overlay)}removeOverlay(){this.parent.removeChild(this.overlay)}renderPopup(e,t){this.popup=Object(qe.b)(Je,{onContinueClick:e,onMaybeLaterClick:t});window.top.document.body.appendChild(this.popup);this.popup.clientHeight;this.popup.classList.add(Ve)}show(e=!1){let t=!1;try{t="true"===localStorage.getItem(Ye.h)}catch(e){console.log("localStorage not accessible")}(e||!t&&Object(it.a)())&&Object(it.e)().then(e=>{e&&this.renderPrePermissionPopup()})}remove(){this.parent.removeChild(this.overlay);this.parent.removeChild(this.popup)}renderPrePermissionPopup(){rt.trackPrePermissionPopupShown();this.addOverlay();this.renderPopup(()=>Object(D.c)(z.a,Ye.b,Date.now()).then(()=>{this.requestNotificationPermission(()=>{We.a.registerServiceWorker();Ue.a.subscribeToPushNotifications();rt.trackNativeRequestAllowClicked()},()=>{rt.trackNativeRequestDenyClicked()});rt.trackPrePermissionContinueClicked()}),()=>Object(D.c)(z.a,Ye.c,Date.now()).then(()=>{this.removeOverlay();rt.trackPrePermissionMaybeLaterClicked()}))}requestNotificationPermission(e,t){rt.trackNativeRequestPermissionShown();Notification.requestPermission(n=>{n===Qe?e():n===Ge&&t();this.removeOverlay()})}}var st=new ot,at=n(138);class ct{init(){window.addEventListener("message",this.receiveMessage.bind(this))}receiveMessage(e){if(!e.origin.match(/\.hubspot(qa)?\.com/))return;let t;try{t=JSON.parse(e.data)}catch(t){console&&console.log("Notifications received an unparsable postMessage: ",t,e);return}if(t.name)switch(t.name){case at.e:{const e=!(!t.force||!0!==t.force);st.show(e);break}case at.d:st.remove();break;case at.a:C.a.resetCounter(!0)}else console.log("Notifications received a postMessage with no name: ",e)}}var ut=new ct;n.d(t,"default",(function(){return lt}));function lt(){const e=L();ut.init();_e.setup();Se();re.setup();r.a.start();Be();C.a.setup(e);window.parent.postMessage(JSON.stringify({name:at.c}),window.location.origin)}},239:function(e,t,n){"use strict";var r=n(2),i=n.n(r);const o=e=>{e&&console.warn(e);return Promise.resolve()},s=4,a=new Error("IndexedDB capacity exceeded"),c=()=>{if(window.navigator&&window.navigator.storage&&window.navigator.storage.estimate)try{return window.navigator.storage.estimate().then(({quota:e,usage:t})=>{if(!e||!t)throw new Error("Browser storage estimate APIs did not perform as expected");return e-t}).catch(o)}catch(e){return o(e)}return o()};var u=()=>c().catch(o).then(e=>{if(!e){"prod"!==i.a.getShort()&&console.warn("Support for making estimate of available storage is missing on this browser.");return Promise.resolve()}if(e<s){"prod"!==i.a.getShort()&&console.warn(a);return Promise.reject(a)}return Promise.resolve()});const l={__superstoreNull:!0},d="hs.superstore",p="default";var h=n(150),g=n.n(h),f=e=>{let t=e.namespace;e&&e.namespace&&(t=`${d}.${e.namespace}`);if(!e.global){let n;n=e.partition&&"function"==typeof e.partition?e.partition:()=>g.a.get();let r=n();r=r?"."+r:"";t=`${t}${r}`}return t},b=e=>{try{return JSON.stringify(e).length}catch(e){return-1}};const m=()=>{const e=new Map,t=(t,n)=>e.set(t,b(n));return{recordSizes:e,getRecordCallback:t}},y=e=>{const{recordSizes:t,getRecordCallback:n}=m();return e(n).then(()=>t)},v=5;var w=(e,t=v)=>"Top Records:\n"+Array.from(e.entries()).sort((e,t)=>t[1]-e[1]).slice(0,t).map(e=>`${e[0]} : (${e[1]}b)`).join("\n");const O=Object.freeze({alreadyOpen:"A backend connection is already open. To open another connection, create a new Superstore instance.",asyncOnly:"The IndexedDB backend only supports asynchronous calls.",blocked:"Superstore can't create a store because open connections are blocking it.Make sure you're closing your store connections with `.close()`.",browserPrivacy:"HubSpot superstore library: indexedDB.open failed. Common reasons: browser security settings, Firefox Private windows. Original error: ",needBackend:"No backend connection is open. Open a new database or connect to an existing one using .open()",noEvent:"the wrapped call did not return an event",unsupported:"IndexedDB is not supported in this environment.",unknown:"Unknown backend error"}),S=e=>{try{if("object"==typeof e){const t=Object.keys(l),n=Object.keys(e);if(t.length===n.length)return t.every(t=>{const r=n[n.indexOf(t)];return l[t]===e[r]})}return!1}catch(e){return!1}},E=new Error(O.unsupported),I={error:[({error:e},{reject:t})=>t(new Error(e&&e.message||O.unknown))],success:[({result:e},{resolve:t})=>t(e)]},_=(e,t,n=[],r=I,i,o=!0)=>new Promise((s,a)=>{try{let o=e[t](...n);!o&&i?o=i:o||a(new Error(O.noEvent));Object.keys(r).forEach(e=>{const[t,n]=r[e];o.addEventListener(e,()=>t(o,{resolve:s,reject:a}),Object.assign({once:!0},n))})}catch(c){if(o&&e instanceof IDBObjectStore&&"TransactionInactiveError"===c.name){const{mode:o,db:c}=e.transaction,u=c.transaction(e.name,o).objectStore(e.name);_(u,t,n,r,i,!1).then(s).catch(a)}else a(c)}}),k=e=>e&&e.commit&&"function"==typeof e.commit?_(e,"commit",[],Object.assign({},I,{complete:[({result:e},{resolve:t})=>t(e)]}),e):Promise.resolve();class T{constructor(e){if(!e.async)throw new Error(O.asyncOnly);this._database=void 0;this._objectStoreName=p;this._dbName=f(e)}_checkInit(){return this._database?Promise.resolve():Promise.reject(new Error(O.needBackend))}open(){if(this._database)return Promise.reject(new Error(O.alreadyOpen));try{if(!window.indexedDB)return Promise.reject(E)}catch(e){return Promise.reject(E)}const e=(e=1)=>_(window.indexedDB,"open",[this._dbName,e],Object.assign({},I,{upgradeneeded:[({result:e,transaction:t},{resolve:n})=>{e.objectStoreNames.contains(this._objectStoreName)||e.createObjectStore(this._objectStoreName);t.addEventListener("complete",()=>n(e),{once:!0})}],blocked:[(e,{reject:t})=>t(new Error(O.blocked))],error:[({error:e},{reject:t})=>t(new Error(`${O.browserPrivacy}${e}`))]}));return e().then(t=>{if(t.objectStoreNames.contains(this._objectStoreName)){this._database=t;return this}t.close();return e(t.version+1).then(e=>{this._database=e;return this})})}close(){return this._checkInit().then(()=>{this._database.close();delete this._database})}has(e){return this._checkInit().then(()=>this._database.transaction(this._objectStoreName,"readonly")).then(t=>{const n=t.objectStore(this._objectStoreName);return _(n,"openCursor",[e]).then(e=>k(t).then(()=>!!e))})}get(e){return this._checkInit().then(()=>this._database.transaction(this._objectStoreName,"readonly")).then(t=>{const n=t.objectStore(this._objectStoreName);return _(n,"get",[e]).then(e=>k(t).then(()=>S(e)?null:e))})}getAllKeys(e,t){return this._checkInit().then(()=>this._database.transaction(this._objectStoreName,"readonly")).then(n=>{const r=n.objectStore(this._objectStoreName),i=[];if(void 0!==e){i.push(e);void 0!==t&&i.push(t)}return _(r,"getAllKeys",i).then(e=>k(n).then(()=>e))})}getAllRecords(e){return this._checkInit().then(()=>this._database.transaction(this._objectStoreName,"readonly")).then(t=>{const n=t.objectStore(this._objectStoreName);let r=0;const i=({result:t},{resolve:n})=>{if(null===t)n(r);else{e(t.key,t.value);r++;t.continue()}};return _(n,"openCursor",[],Object.assign({},I,{success:[i,{once:!1}]}))})}set(e,t){null===t&&(t=l);return this._checkInit().then(u).then(()=>this._database.transaction(this._objectStoreName,"readwrite")).then(n=>{const r=n.objectStore(this._objectStoreName);return _(r,"openCursor",[e]).then(e=>!!e).then(i=>_(r,i?"put":"add",[t,e]).then(()=>k(n).then(()=>t))).catch(n=>y(this.getAllRecords.bind(this)).then(r=>{const i=w(r);return Promise.reject(new Error(`Encountered error: ${n} while setting ${e}:(${b(t)}b), ${i}`))}))})}delete(e){return this._checkInit().then(()=>this._database.transaction(this._objectStoreName,"readwrite")).then(t=>{const n=t.objectStore(this._objectStoreName);return _(n,"get",[e]).then(r=>_(n,"delete",[e]).then(()=>k(t).then(()=>r)))})}clear(){return this._checkInit().then(()=>this._database.transaction(this._objectStoreName,"readwrite")).then(e=>{const t=e.objectStore(this._objectStoreName);return _(t,"clear").then(()=>k(e)).then()})}}var N=function(e){return new T(e)};const j={async:!0};function x(e){if(!e||!e.namespace)throw new Error("Configuration error: Superstore must be instantiated with a namespace.");if("string"!=typeof e.namespace)throw new Error("Configuration error: `namespace` must be of type string.");if(e.global){if(e.partition)throw new Error("Configuration error: `partition` and `global` are mutually exclusive.")}else if(e.partition&&"function"!=typeof e.partition)throw new Error("Configuration error: `partition` must be a function.")}const C=function e(t){if(!t||!t.backend)throw new Error("Configuration error: Superstore must be instantiated with a backend.");x(t);return t.backend(Object.assign({},e._defaultOpts,{},t))};C._defaultOpts=j;var P=C;const A=N;var R=n(148);n.d(t,"c",(function(){return L}));n.d(t,"b",(function(){return D}));let $;const M=()=>{$||($=new P({namespace:R.b,backend:A}).open());return $};t.a=M;function L(e,t,n){return M().then(t=>t.get(e).then(e=>e||{}).then(e=>({store:t,json:e}))).then(({store:r,json:i})=>{void 0!==n?i[t]=n:delete i[t];return r.set(e,i)}).then(()=>!0).catch(e=>{console.error("Cannot access IndexedDB: ",e);return!1})}function D(e,t){return M().then(t=>t.get(e).then(e=>e||{})).then(e=>e[t]).catch(e=>{console.log("Cannot access IndexedDB: "+e);return Promise.resolve(null)})}},240:function(e,t,n){"use strict";const r="hubSpotNotificationPreferences";var i=n(141),o=n(142);function s(e){return e.replace(/<[^>]+>/g,"")}var a=n(143);function c(e){return a.c[e]}const u={mention:"mention"};function l(e,t){return e&&e.find(e=>e.key===t)}function d(e){const t=c(e);return u[t]}function p(e,t){const n=l(e,d(t));return n&&n.value?s(n.value):null}var h=n(144),g=n(145),f={de:{},en:{[r]:"HubSpot notification preferences"},es:{},fr:{},ja:{},"pt-br":{}};const b="en";function m(e=b,t){return f[e][t]||f[b][t]}var y=n(246);n.d(t,"a",(function(){return O}));const v="https://static.hsappstatic.net/browser-notifications/ex/hubspot-logo.png",w={};class O{static trigger(e){const{data:{id:t}}=e.notification||e.currentTarget;return e.action?w[t].handleActionClick(e.action,e):w[t].handleClick(e)}constructor(e){this.data=e;this.actionsListeners={};this.actionsTracking={};this.clickListeners=[];Object(h.a)("Notification data:",e);this.promise=Promise.all([this.show()])}show(){const{context:e,id:t,translatedTemplate:{body:n,subject:o},type:s,userLang:a}=this.data;w[t]=this;const c=p(e,s)||n,u=[o,{actions:Object(g.a)()?[{action:i.a,title:m(a,r)}]:void 0,body:c,data:this.data,icon:v,silent:!1}];if(Object(g.a)())return self.registration.showNotification(...u);const l=new window.Notification(...u);l.onclick=this.handleClick.bind(this);return l}getPromise(){return this.promise}handleClick(e){return Promise.all([Object(y.a)(o.b.NATIVE_BROWSER_NOTIFICATION_CLICK,this.data),...this.clickListeners.map(t=>t(e))])}handleActionClick(e,t){let n=[Object(y.a)(this.actionsTracking[e],this.data)];this.actionsListeners[e]&&(n=n.concat(this.actionsListeners[e].map(e=>e(t))));return Promise.all(n)}onClick(e){this.clickListeners.push(e)}onActionClick(e,t,n){this.actionsListeners[e]||(this.actionsListeners[e]=[]);this.actionsTracking[e]=t;this.actionsListeners[e].push(n)}}},242:function(e,t,n){"use strict";var r=n(128),i=n.n(r);const o="/notification-station/user-preferences/v1/browser/subscription",s="BKWUzaaTCMi91x-vrvnDMCBauMuHFOHvqf3xy5cYYHTrSHrqcBegTCrvxw0xmbPiBZQeigb2Ut9OYFr7jyyOau0",a="BNoT2GhFilVOiVkbpTS_h3wiFEt7DdIx9R8VEmGpUiZitUWMAg_PBuP5c6J8uvN6uLls2lnXNGQEgS_VNSERvXo";var c=n(129);function u(e){return i.a.post(o,{data:e}).catch(e=>Object(c.a)("Notifications subscription: Error sending subscription to backend",e))}var l=n(147),d=n(148),p=n(149),h=n(2),g=n.n(h);function f(){return g.a.isQa()?s:a}var b=n(239),m=n(151);class y{subscribeToPushNotifications(){Object(c.a)("Checking to see if the subscription has expired");Object(m.c)()&&navigator.serviceWorker.ready.then(e=>{Object(c.a)("Notifications service worker ready - getting subscription");return e.pushManager.getSubscription().then(t=>({registration:e,subscription:t})).catch(e=>Object(c.a)("Notifications subscription: Could not get Subscription",e))}).then(({registration:e,subscription:t})=>{Object(c.a)("Notifications subscription: ",t);return Object(m.d)().then(n=>{if(!t||!n){Object(c.a)("Subscription has expired or does not exist, attempting to subscribe");return new Promise(e=>t?t.unsubscribe().then(e()).catch(t=>{Object(c.a)("Notifications subscription: Error unsubscribing: ",t);return e()}):e()).then(()=>e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Object(p.b)(f())}).catch(e=>Object(c.a)("Notifications subscription: Error subscribing: ",e)))}return null})}).then(e=>{if(e){Object(c.a)("Notifications subscription: ",e);Object(b.c)(d.a,l.a,Date.now());return u(e)}return null}).catch(e=>{console.log(e)})}}t.a=new y},243:function(e,t,n){"use strict";var r=n(127),i=n(152),o=n(130),s=n(140),a=n(251);function c(){return!document.hidden}var u=n(252),l=n(146),d=n(155),p=n(137),h=n(129);class g{constructor(){this.predicates=Object(d.Map)();Object(p.b)("registerPreemptPredicate",this.registerPreemptPredicate.bind(this));this.handleSetupComplete()}handleSetupComplete(){const e=Object(p.a)("onPreemptApiSetupCallbacks");e&&e.length&&e.forEach(e=>{"function"==typeof e&&e()})}registerPreemptPredicate({origin:e,predicate:t}={}){if(!e)throw new Error("PreemptUtil origin required to register predicate");if("function"!=typeof t)throw new Error("Predicate must be a functcion");this.predicates=this.predicates.update(e,e=>e?e.add(t):Object(d.Set)([t]));return this.deregisterPreemptPredicate.bind(this,{origin:e,predicate:t})}deregisterPreemptPredicate({origin:e,predicate:t}){const n=this.predicates.get(e)||Object(d.Set)();this.predicates.set(e,n.remove(t))}shouldBlockNotification(e){if(!e||!e.origin)return!1;const{name:t}=e.origin,n=(this.predicates.get(t)||Object(d.Set)()).reduce((t,n)=>t||!1===n(e),!1);n&&Object(h.a)("Notification blocked by preempt predicate");return n}}const f=new g,b=f.shouldBlockNotification.bind(f);function m(e,t,n){const r=-1===e.indexOf("?")?"?":"&";return`${e}${r}${t}=${n}`}var y=n(133),v=n(156);class w{constructor(){this._onVisibilityChanged=()=>{this.canPlaySounds||this.getPlaySoundFunction({isDummySound:!0})()};this.isMaster=!1;this.canPlaySounds=!1;this.onCloseListeners=[];this._setupVisibilityListeners();window.addEventListener("beforeunload",this._cleanupVisibilityListeners)}showNotification(e){return this._renderNotification(e,this.isMaster).then(t=>{t.playSound&&this._playSound(e)})}_renderNotification(e,t){const n={playSound:!1};if(Object(a.d)(e)){if(Object(a.c)(e))return this._showFloating(e,t);{const r=c();return Promise.all([this._showTease(e,t,r),this._showBrowser(e,t,r)]).then(e=>e.reduce((e,t)=>({playSound:e.playSound||t.playSound}),n))}}return Promise.resolve(n)}_showFloating(e,t){e.ctaProxyUrl&&(e.ctaProxyUrl=m(e.ctaProxyUrl,i.c,i.b.FLOATING));t&&Object(r.b)(e,i.b.FLOATING);return this._importFloating().then(n=>{const r=this._getNotificationsUsageTracker(e,t,i.b.FLOATING);n.addNotificationToPage(e,{onCloseListeners:this.onCloseListeners,tracker:r});return{playSound:!1}}).catch(s.a)}_showTease(e,t,n){e.ctaProxyUrl&&(e.ctaProxyUrl=m(e.ctaProxyUrl,i.c,i.b.TEASE));t&&Object(r.b)(e,i.b.TEASE);return this._importTease().then(r=>{const o=this._getNotificationsUsageTracker(e,t,i.b.TEASE);if(!b(e)){r.init();r.addNotificationToPage(e,{onCloseListeners:this.onCloseListeners,tracker:o});if(t&&n)return{playSound:!0}}return{playSound:!1}}).catch(s.a)}_showBrowser(e,t,n){if(!n&&t){l.a.showBrowserNotification(e);return Promise.resolve({playSound:!0})}return Promise.resolve({playSound:!1})}_importFloating(){return n.e("floating").then(n.bind(null,245)).then(e=>e.default)}_importTease(){return n.e("tease").then(n.bind(null,238)).then(e=>e.default)}_getNotificationsUsageTracker(e,t,n){return t?new v.a(e,n):void 0}_playSound(e){return this.getPlaySoundFunction({notification:e,isMaster:this.isMaster,userAttributesManager:new u.a})()}getPlaySoundFunction(e){const{notification:t,isMaster:n,userAttributesManager:r,isDummySound:i=!1}=e;let o=Promise.resolve(!1);i?o=Promise.resolve(!0):n&&(o=r.getAttributeValue(y.b).then(e=>void 0===e||e));return()=>o.then(e=>e?Object(a.f)(Object(a.a)(),i):Promise.resolve()).then(()=>{this.setCanPlaySounds(!0)}).catch(e=>{t&&console.error("Could not play audio",e)})}onClose(e){this.onCloseListeners.push(e)}notificationClosed(e){dispatchEvent(new CustomEvent(`${o.a}-${e}`,{detail:{id:e,type:o.a}}))}setIsMaster(e){this.isMaster=e}getCanPlaySounds(){return this.canPlaySounds}setCanPlaySounds(e){this.canPlaySounds=e}_setupVisibilityListeners(){window.addEventListener("visibilitychange",this._onVisibilityChanged)}_cleanupVisibilityListeners(){window.removeEventListener("visibilitychange",this._onVisibilityChanged)}}t.a=new w},246:function(e,t,n){"use strict";var r=n(247);const i=Object(r.a)()+"/usage-logging/v1/log/hublytics-multi/no-auth";function o(e,t){return fetch(`${i}?${"clientSendTimestamp="+t}`,{body:JSON.stringify([e]),headers:{"Content-Type":"application/json"},method:"post"})}var s=n(142);n.d(t,"a",(function(){return l}));function a(e){if(!e)return{};const{origin:t,template:n,type:r}=e;return{origin:t,template:n,type:r}}function c(e,t,n,r){const i=JSON.stringify(Object.assign({action:e},a(t))),o={hublytics_account_id:s.d,what_event:s.c.BROWSER_NOTIFICATIONS_INTERACTION,what_event_class:r,what_extra_json:i,when_timestamp:n,where_app:s.a,where_screen:s.a,who_team_identifier:s.d},{portalId:c,userId:u}=t;u&&c&&(o.who_identifier_v2=`USER_ID:::${u}:::53`);return o}function u(e,t,n){const r=Date.now();return o(c(t,n,r,e),r)}function l(...e){u(s.e,...e)}},247:function(e,t,n){"use strict";function r(){return location.origin}n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return s}));function i(){const e=r(),t=/^https:\/\/(app|local)(-([a-zA-Z0-9]+))?\.hubspot(qa)?\.com/.exec(e);if(!t)return null;const[n,i,o,s,a]=t;return{url:n,hubletPrefixed:o,hublet:s,isLocal:"local"===i,isQa:"qa"===a}}function o(){const e=i();return`https://api${e&&e.hubletPrefixed?e.hubletPrefixed:""}.hubspot${e&&e.isQa?"qa":""}.com`}function s(e,t){const n=i();return`https://app${n&&n.hubletPrefixed?n.hubletPrefixed:""}.hubspot${n&&n.isQa?"qa":""}.com/notification-preferences/${e}/desktop?highlight=${t}`}},250:function(e,t,n){"use strict";const r="/notifications/",i="/notifications/service-worker.js";var o=n(129);class s{registerServiceWorker(){return navigator.serviceWorker.register(i,{scope:r}).then(()=>{Object(o.a)("Notifications service worker registered")}).catch(e=>{console.log(e);Object(o.a)("Notifications service worker failed to register, error:",e)})}}t.a=new s},251:function(e,t,n){"use strict";var r=n(154),i=n.n(r),o=n(152);const s=20,a=21,c=133;var u=n(143);n.d(t,"g",(function(){return d}));n.d(t,"h",(function(){return p}));n.d(t,"e",(function(){return h}));n.d(t,"c",(function(){return g}));n.d(t,"d",(function(){return b}));n.d(t,"b",(function(){return m}));n.d(t,"a",(function(){return y}));n.d(t,"f",(function(){return w}));const l=5e3;function d(e,t){return e===u.a&&(t===s||t===a||t===c)}function p(e){return e===u.b}function h(e){return e&&e.deliveryMethods&&e.deliveryMethods.indexOf(o.e)>-1}function g(e){return e.deliveryMethods&&e.deliveryMethods.indexOf(o.d)>-1}function f(e){return e.deliveryMethods&&e.deliveryMethods.indexOf(o.f)>-1}function b(e){return f(e)||g(e)}function m(){return l}function y(){return window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext}const v=(e,t,n,r,i)=>{const o=1.3*i,s=o+n,a=e.createOscillator();a.frequency.value=t;const c=e.createGain();c.gain.setValueAtTime(1e-34,0);a.connect(c);c.connect(e.destination);c.gain.exponentialRampToValueAtTime(.5*r,e.currentTime+s+.1);c.gain.exponentialRampToValueAtTime(1e-5,e.currentTime+o+1.3);c.gain.setValueAtTime(1e-34,e.currentTime+o+1.3);c.connect(e.destination);a.start(o)};function w(e,t){if(!e){const e=new Audio(i.a);t&&(e.muted="muted");const n=e.play();return void 0!==n?n:Promise.resolve()}return t?Promise.resolve():Promise.resolve().then(()=>{const t=new e;v(t,620,0,1,0);v(t,940,.1,.6,0)})}}}]);
//# sourceMappingURL=in-app-delayed.js.map