!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};e[s].call(o.exports,o,o.exports,n);o.l=!0;return o.exports}n.m=e;n.c=t;n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})};n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};n.t=function(e,t){1&t&&(e=n(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);n.r(s);Object.defineProperty(s,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s};n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/";n(n.s=13)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return o}));function s(){return"undefined"!=typeof window&&window||void 0!==e&&e||{}}function o(){return s().hubspot=s().hubspot||{}}}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/logo.jpg"},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/help-icon.png"},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/help-icon-jp.png"},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/isc-chat-icon.svg"},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/marketingHubIcon.svg"},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/salesHubIcon.svg"},function(e,t){e.exports="//static.hsappstatic.net/ZorseButtonUI/static-1.1109/images/close-icon.svg"},,,,,function(e,t,n){"use strict";n.r(t);const s=["api","local","app","private","platform","tools","meetings"],o=["hubspotstarter","hubspotfree"],i=["growth"],r={com:["hubspot","hubteam","grader","getsignals","getsidekick","gettally","hubspotemail","customer-hub","hubspotservicehub","hubspotquote"].join("|"),net:o.join("|"),org:i.join("|")};var a=function e(t){const n=new RegExp(`^(?!local|test|selenium)(.*\\.)?(${Object.entries(r).map(([e,t])=>`(?:${t})(qa)?\\.${e}`).join("|")}|(?:connect)\\.com|(?:connect)(qa)\\.co)$`).test(t.hostname),o=new RegExp(Object.entries(r).map(([e,t])=>`(?:${t})qa\\.${e}`).join("|")+"|(?:connect)qa\\.co"),i=new RegExp(`^(?:${s.join("|")})-(.*).(?:hubspot|hubteam)(?:qa)?.com`),a=new RegExp("^(.*).(?:hubspotquote)(?:qa)?.com"),c="ENV",l="Enviro error: the default argument for .get and .getShort is no longer supported",u=e=>{let t=window[e];if(null==t)try{t=window.sessionStorage.getItem(e)}catch(e){}if(null==t)try{t=window.localStorage.getItem(e)}catch(e){}return t},d=()=>{const e=u(c);return e||(o.test(t.host)?"qa":"prod")},h=(e,t)=>{window[e]=t;return t},p={prod:"production",qa:"development"},g=e=>{if("string"==typeof e){const t=e.toLowerCase();return p[t]||t}return e},m=e=>{e="string"==typeof e?e.toLowerCase():void 0;return Object.keys(p).find(t=>e===p[t])||e},f=(e,t)=>{if(null!=t)throw new Error(l);let n=null;if(e){const t=e.split(".").reverse();for(let e=0;e<t.length;e++){const s=t[e];n=u(s.toUpperCase()+"_ENV");if(n)break}}if(null==n){const e=d();n=null!=e?e:"qa"}return g(n)},w=(e,t)=>{if(null!=t)throw new Error(l);return m(f(e))},b=w,y=e=>"prod"===b(e),v=e=>"qa"===b(e);return{createEnviro:e,debug:(e,t=!1)=>{let n;"string"==typeof e&&(n=u(e.toUpperCase()+"_DEBUG"));null==n&&(n=u("DEBUG"));return null==n?t:n},denormalize:m,deployed:e=>{let t;"string"==typeof e&&(t=u(e.toUpperCase()+"_DEPLOYED"));null==t&&(t=u("DEPLOYED"));return null==t?n:!!t},enabled:(e,t=!1)=>{let n=u(e.toUpperCase()+"_ENABLED");null==n&&(n=JSON.stringify(t));return"true"===(""+n).toLowerCase()},get:f,getHublet:()=>{const e=u("HUBLET");return e||(i.test(t.hostname)?i.exec(t.hostname)[1]:a.test(t.hostname)?a.exec(t.hostname)[1]:"na1")},getInternal:w,getShort:b,isProd:y,isQa:v,normalize:g,set:function(e,t){if(1===arguments.length){t=e;e=c}return h(e,t)},setDebug:(e,t=!0)=>{if("string"==typeof e)try{t?localStorage.setItem(e.toUpperCase()+"_DEBUG",JSON.stringify(!0)):localStorage.removeItem(e.toUpperCase()+"_DEBUG")}catch(n){h(e.toUpperCase()+"_DEBUG",t||void 0)}else{t=null==e||e;try{t?localStorage.setItem("DEBUG",JSON.stringify(t)):localStorage.removeItem("DEBUG")}catch(e){h("DEBUG",t||void 0)}}}}}(document.location);const c=e=>"function"==typeof e,l=Object.getOwnPropertySymbols||(()=>[]);var u=e=>{if(a.deployed("hub-http")||!Object.freeze)return e;Object.freeze(e);Object.getOwnPropertyNames(e).concat(l(e)).forEach(t=>{c(e)&&"caller"!==t&&"callee"!==t&&null!=e[t]&&!Object.isFrozen(e[t])&&Object.freeze(e[t])});return e};const d=(e,t)=>Promise.resolve(e(u(Object.assign({},t,{_input:t})))),h=(...e)=>{const[t,...n]=e;return e=>0===n.length?d(t,e):n.reduce((e,t)=>e.then(t),d(t,e))};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const g=(e,t)=>n=>{(n=Object.assign({},n))[e]=t;return n},m=(e,t)=>n=>g(e,[...n[e]||[],t])(n),f=e=>"string"==typeof e[0]||e[0]instanceof String||"symbol"===p(e[0])?u({}):u([]),w=(e,t)=>(n=f(e))=>1===e.length?g(e[0],t)(n):g(e[0],w(e.slice(1),t)(n[e[0]]))(n),b=(e,t)=>"function"==typeof e?e(t):e,y=e=>"function"==typeof e?e():e,v=(e,t,n)=>s=>b(e,s)?g(t,y(n))(s):s,I=Symbol("responseHandlers"),R=e=>e[I],O=e=>m(I,e),T=(e,t,n,s)=>Object.assign(new Error,e,{message:t,code:n,previousError:s}),E=/^(?:(?:([^:/?#]+):)?(?:\/\/([^:/?#]+)(?::([0-9]+))?)+?)?([^?#]+)?(?:\?([^#]*))?(?:#(.+))?/,C=e=>{const t=(e||"").toLowerCase();return t?"http"===t?80:"https"===t?443:null:null},S=e=>{const[,t,n,s,o,i,r]=E.exec(e);return{protocol:t,hostname:n,port:void 0!==s?parseInt(s,10):C(t),path:o,query:i,hash:r}},x=e=>{if(e&&e.hostname){const t=e.hostname.split(".");if(3!==t.length)return{};const[n]=t,[s]=n.split("-");return{loadBalancer:n,loadBalancerBase:s}}return{}},N=e=>{if(!e.port)return!0;if(!e.protocol)return!0;const t=(e.protocol||"").toLowerCase();return"http"===t&&80===e.port||"https"===t&&443===e.port},q=e=>[e.hostname?(e.protocol||"https")+"://":"",e.hostname,N(e)?"":":"+e.port,e.hostname&&e.path&&"/"!==e.path.substr(0,1)?"/"+e.path:e.path,e.query?"?"+e.query:"",e.hash?"#"+e.hash:""].join("");function $(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(null==t?"":t)}`}function j(e,t){return t.reduce((t,n)=>{null!=n&&t.push($(""+e,n));return t},[]).join("&")}const A=e=>null==e?"":"string"==typeof e||e instanceof String?e:Object.keys(e).reduce((t,n)=>{const s=e[n];Array.isArray(s)?s.length>0&&t.push(j(n,s)):null!=s&&t.push($(n,s));return t},[]).join("&"),k=e=>null==e||""===e.trim()?{}:e.split("&").reduce((e,t)=>{const[n,s]=t.split("=");let o=n;const i=decodeURIComponent(s);o.length>2&&o.lastIndexOf("[]")===o.length-2&&(o=o.substring(0,o.length-2));const r=e[o];void 0!==r?Array.isArray(r)?r.push(i):e[o]=[r,i]:e[o]=i;return e},{}),B=(e,t)=>{const n=t.headers;if(n)for(const t in n)if(n.hasOwnProperty(t)&&t.toLowerCase()===e.toLowerCase())return n[t]},_=(e,t,n)=>{const s=n.headers;for(const o in s)if(s.hasOwnProperty(o)&&o.toLowerCase()===e.toLowerCase())return w(["headers",o],t)(n);return w(["headers",e],t)(n)};function H(e){return Boolean(e.mockAuth)}const L="unauthorized",P="portal moved",z="migration in progress";function W(){try{if(window.self!==window.top)return window.top}catch(e){return null}return null}const U=(e,t,n)=>fe(s=>{if(e.includes(s.status)){t.postMessage(n,"*");return Promise.reject(T(s,`Aborting: notifying parents of ${n} response`))}return s}),M=e=>e&&"true"===e.toLowerCase(),D=e=>e.safeMode||e.localStorage&&M(e.localStorage.getItem("HUB-HTTP_SAFE_MODE")),F=()=>{},G=(e,t)=>{const n=Object.keys(e),s=Object.keys(t);return n.length===s.length&&Object.keys(e).every(n=>{const s=e[n],o=t[n];return!!Object.prototype.hasOwnProperty.call(t,n)&&("string"==typeof s?"string"==typeof o&&o===s:!!Array.isArray(s)&&(Array.isArray(o)&&s.every(e=>o.includes(e))&&o.every(e=>s.includes(e))))})},J=(e,t,n=F)=>{if(H(t))return!1;const s="HUB-HTTP_IGNORE_REDIRECTS",o=e=>e&&"true"===e.toLowerCase(),i=[[()=>t.ignoreRedirect,"ignoreRedirect option is set"],[()=>t.localStorage&&o(t.localStorage.getItem(s)),`local storage key ${s} is set to "true"`],[()=>D(t),"safe mode is enabled"],[()=>{try{const n=new URL(e),s=t.location,o=k((n.search||"").substring(1)),i=k((s.search||"").substring(1));return n.protocol===s.protocol&&n.hostname===s.hostname&&n.pathname===s.pathname&&n.hash===s.hash&&G(o,i)}catch(e){console.error("Error checking for infinite redirect",e);return!1}},"redirect URL is identical to current location"]].find(([e])=>e());if(i){console.log("[hub-http] Skipping redirect because "+i[1]);return!1}n(t);t.location.href=e;return!0},V=()=>{try{return window.localStorage}catch(e){return}},Q=()=>window.hubspot&&window.hubspot.bender?{name:window.hubspot.bender.currentProject,version:window.hubspot.bender.currentProjectVersion}:null,Z=e=>Object.assign({location:window.location,cookies:window.document.cookie,localStorage:V(),document:window.document,appInfo:Q()},e),X=e=>{const t=a.getShort("hub-http"),n="local"===t?"local":"deployed",s=e[n]?e[n][t]:null;if(!s)throw new Error(`No hostname defined for environment ${t} and ${n}`);return s},K=Symbol("url"),Y=e=>t=>{let n=t[K]||S(t.url);n=e(n);t=g(K,n)(t);return t=g("url",q(n))(t)},ee=(e,t)=>{const n=t&&t._input?t._input:t;return void 0!==n[e]?n[e]:void 0},te=(e,t)=>n=>void 0===ee(e,n)?g(e,t)(n):n,ne=e=>te("method",e),se=(e,t,n)=>s=>n||void 0===B(e,s)?_(e,t,s):s,oe=Symbol("initialQuery"),ie=Symbol("noOverrideQuery"),re=Symbol("overrideQuery"),ae=(e,t=!0)=>Y(n=>{let s=n;void 0===s[oe]&&(s=g(oe,n.query||"")(s));const[o,i,r]=t?[re,s[re],e]:[ie,e,s[ie]];s=w([o],Object.assign({},i,{},r))(s);return g("query",[s[oe],A(Object.assign({},s[re],{},s[ie]))].filter(Boolean).join("&"))(s)}),ce=e=>ae(e.query,!1)(e),le=Y(g("protocol","https")),ue=e=>t=>Y(n=>{!n.protocol&&t.location&&(n.protocol=t.location.protocol.slice(0,-1));if(!n.hostname){const s=t.api||e;n.hostname=X(s)}return n})(t),de=e=>{if(e&&"na1"!==e)return"-"+e;const t=a.getHublet();return"na1"===t||"na1"===e?"":"-"+t},he=(e,t,n)=>{const s=de(n);return{local:{qa:`local${s}.${t}qa.com`,prod:`local${s}.${t}.com`},deployed:{qa:`${e}${s}.${t}qa.com`,prod:`${e}${s}.${t}.com`}}},pe=(e,t)=>n=>{(n=se("content-type",e)(n)).rawData?n.data=n.rawData:"function"==typeof t&&B("content-type",n)===e&&(n.data=t(n.data));return n},ge=e=>void 0!==e.data||void 0!==e.rawData?pe("application/json",JSON.stringify)(e):e,me=e=>t=>{try{return e(t)}catch(e){e.response=t;throw e}},fe=e=>O(t=>t.then(me(e))),we=e=>O(t=>t.catch(me(e))),be=e=>e&&e.headers&&B("content-type",e)||"",ye=h(se("Accept","application/json, text/javascript, */*; q=0.01"),fe(e=>v("string"==typeof e.data&&0===be(e).indexOf("application/json"),"data",()=>e.data.length?JSON.parse(e.data):void 0)(e))),ve=fe(e=>"OPTIONSERROR"===e.errorCode?Promise.reject(T(e,"hub-http error building request options: "+e.options.error.message)):e),Ie=(e,t)=>{const n=T(e,`Request for ${t.split("?")[0]} failed with status ${e.status}. ${e.statusText||""}`);n._hsAdditionalProperties={queryParamsString:t.split("?")[1]};return n},Re=e=>fe(t=>t.status>=200&&t.status<300?t:Promise.reject(Ie(t,e.url)))(e),Oe=(e,{reason:t,maxRetries:n=1,delay:s=250,onMaxAttemptsReached:o}={})=>i=>{const r=o=>{if(e(o)){const e=g("retry",{reason:t,maxRetries:n,delay:s,exceededRetries:o.options.retryAttempts>=n})(o);return Promise.reject(T(e,`Request for ${i.url} failed with status ${o.status}. ${o.statusText||""}`))}return o};if(0===n)return i;return(i.retryAttempts>=n&&"function"==typeof o?h(fe(r),o):fe(r))(i)},Te=g("safeMode",!0),Ee=(e,t)=>n=>fe(n=>{if(e(n)){let e;try{e="function"==typeof t?t(n):t;J(e,n.options);return Promise.reject(T(n,"Aborting: redirection in progress"))}catch(e){return Promise.reject(T(n,"Aborting: status indicates redirect required, but redirect URL could not be formed"))}}return n})(n),Ce=e=>{if(e.skipMigrationCheck||H(e))return e;const t=W();return t?U([477],t,z)(e):Ee(e=>477===e.status,q({hostname:X(he("app","hubspot")),path:`/data-transfer-status/${e.portalId}/`}))(e)},Se=e=>{if(H(e))return e;const t=W();return t?U([488],t,P)(e):Ee(e=>488===e.status,t=>{const n=B("x-hubspot-correct-hublet",t);if(!n)throw new Error("488 response missing X-Hubspot-Correct-Hublet header");const s=e.location;return q({protocol:s.protocol&&s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol,port:s.port,path:s.pathname,query:""!==s.search?s.search.substring(1):void 0,hash:""!==s.hash?s.hash:void 0,hostname:X(he(x(e.location).loadBalancerBase||"app","hubspot",n))})})(e)},xe=e=>H(e)?e:ae({skipMigrationCheck:e.skipMigrationCheck},!1)(e),Ne=(e,t)=>{const n="HUB-HTTP-LABS:"+e,s=t.localStorage&&t.localStorage.getItem(n);if(s&&"true"===s.toLowerCase()){console.log(`Using localStorage override for ${n}: ${s}`);return"true"===s.toLowerCase()}return"object"==typeof t.labs&&t.labs[e]},qe=(e,t,n=(e=>e))=>s=>Ne(e,s)?t(s):n(s),$e="hapijs_options",je=e=>`${$e}:${e.portalId}`;var Ae={get(e){const t=e.localStorage&&e.localStorage.getItem(je(e));return t?JSON.parse(t):{}},set(e,t){e.localStorage&&e.localStorage.setItem(je(e),JSON.stringify(t))},clear(e){e.localStorage&&e.localStorage.removeItem(je(e))}};const ke=e=>Object.assign({},{timeout:14e3,withCredentials:!0,portalId:window.hubspot&&window.hubspot.portal&&window.hubspot.portal.id,labs:window.hubspot&&window.hubspot["__hub-http-labs"]},e),Be=e=>t=>e(Y(e=>{if(e.hostname||t.api)return e;let n=e.path;if(n.startsWith("/api/")||n.startsWith("api/"))return e;n=n.startsWith("/")?"/api"+n:"/api/"+n;e.path=n;return e})(t)),_e=qe("HUBONEDOMAIN",Be(ue(he("app","hubspot"))),ue(he("api","hubspot"))),He=e=>{if(H(e))return e;const{hostname:t}=S(e.url),n=0===t.indexOf(`api${de()}.hubspot`);return g("useIframeRequest",n)(e)},Le=e=>H(e)||"number"!=typeof e.timeout?e:ae({clienttimeout:e.timeout})(e),Pe=(e,t)=>{const n={hostname:X(he("app","hubspot")),path:e.loginPathOverride||"/login/"},s={loginRedirectUrl:e.location.href};t&&t["x-hubspot-auth-failure"]&&Object.assign(s,{authFailureReason:t["x-hubspot-auth-failure"]});e.portalId&&(s.loginPortalId=e.portalId);n.query=A(s);return q(n)},ze=e=>Ae.clear(e),We=e=>{const t=Pe(e);if(J(t,e,ze))throw new Error("Aborting: redirection in progress");return e},Ue=e=>{const t=e.options,n=Pe(t,e.headers);J(n,t,ze);return Promise.reject(T(e,"Aborting: redirection in progress"))},Me=we(Ue),De=e=>t=>fe(t=>e(t)?Ue(t):t)(t),Fe=e=>401===e.status&&!!B("x-hubspot-auth-failure",e),Ge=e=>{if(H(e))return e;const t=W();return t?U([401],t,L)(e):De(Fe)(e)},Je=e=>{if(!e.portalId){console.log("[hub-http] Could not find portal id. Redirecting");return We(e)}return e},Ve=Oe(e=>"GET"===e.options.method&&(e.status>=500||0===e.status&&"NETWORKERROR"===e.errorCode),{reason:"Server error"}),Qe=(e,t)=>{let n=JSON.parse(t);if(!Array.isArray(n)){console.error("REWRITE_URL local storage key must be a stringified array");return e}if(!n.length)return e;let s=q(e);("string"==typeof n[0]||n[0]instanceof String)&&(n=[n]);n.forEach(([e,t])=>{s=s.replace(new RegExp(e),t)});return S(s)},Ze=(e,t)=>{const n=JSON.parse(t);if(!Array.isArray(n)){console.error("LOCAL_API_OVERRIDES local storage key must be a stringified array");return e}let s=q(e);n.forEach(e=>{s.includes(e)&&(s=s.replace(/https:\/\/(app|api)/,"https://local").replace("/api/","/"))});return S(s)},Xe=e=>Y(t=>{const n=e.localStorage&&e.localStorage.getItem("URL_REWRITE");if(n)return Qe(t,n);const s=e.localStorage&&e.localStorage.getItem("LOCAL_API_OVERRIDES");return s?Ze(t,s):t})(e),Ke="HUB-HTTP_TIMEOUT",Ye=e=>{const t=e.localStorage&&e.localStorage.getItem(Ke);if(null!=t){console.log(`[hub-http] Using localStorage override ${Ke} for request timeout.`);return g("timeout",parseInt(t,10))(e)}return e},et="HTTP_FAILURE_INJECTION",tt="default",nt={rate:1,sleep:1e3},st=e=>1===e?"1.0":String(e),ot=e=>`${e.type};${e.scope};ABORT;1;${st(e.rate)};${e.sleep}`,it=e=>{let t;try{t=JSON.parse(e)}catch(e){console.error("failure injection config must be valid config object, see failure injection docs for more info")}return t},rt=e=>{if(!a.isQa())return e;const t=e.localStorage&&e.localStorage.getItem(et);if(!t)return e;const n=it(t);if(!n)return e;const s=Object.assign({},nt,{},n);if(!s.type||!s.scope){console.error("failure injection config missing required property (required: type, scope). see failure injection docs for more info");return e}const{path:o=""}=S(e.url);return"INCOMING_HTTP"!==s.type||s.scope===tt||o.includes(s.scope)?se("X-HubSpot-Failure-Injection",ot(s))(e):e},at=e=>H(e)?e:qe("HUBONEDOMAIN",rt)(e),ct=(e,t)=>{const n=("; "+t).split(";");if(n.length)for(let t=0;t<n.length;t++){const s=n[t].split("=");if(2===s.length&&s[0].trim()===e)return s[1]}return null},lt=e=>{const t=S(e.url);return k(t.query).portalId?e:h(Je,ae({portalId:e.portalId}))(e)},ut=h(e=>De(()=>!ct(e.csrfCookieName,e.cookies))(e),e=>se("X-HubSpot-CSRF-hubspotapi",ct(e.csrfCookieName,e.cookies))(e),e=>e.allowMissingPortalId?e:lt(e)),dt=(e=>t=>{if(H(t))return t;const n=e,s=S(t.url).hostname,o=n.find(e=>e.matcher.test(s));return ut(Object.assign({},t,{csrfCookieName:o.csrfCookieName}))})([{csrfCookieName:"csrf.api",matcher:/^[a-z0-9-]+\.hubapi(qa)?\.com$/},{csrfCookieName:"csrf.app",matcher:/^[a-z0-9-]+\.hubspot(qa)?\.com$/}]);var ht=h(Z,ke,Ye,ge,le,_e,dt,ce,Xe,at,Le,He,ve,Ge,xe,Ce,Se,Ve,Re,ye);function pt(e,t){if(null==e)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++){n=i[s];t.indexOf(n)>=0||(o[n]=e[n])}return o}const gt=window&&window.performance&&window.performance.timing&&window.performance.timing.navigationStart,mt=window&&window.performance&&window.performance.now,ft=gt?window.performance.timing.navigationStart:(new Date).valueOf(),wt=mt?window.performance.now.bind(window.performance):()=>(new Date).valueOf()-ft;let bt=1;function yt(e,t=""){if("succeeded"===e||"timedOut"===e||"failed"===e||"aborted"===e)return!0;console&&console.error&&console.error(`Invalid state passed ${t?"to "+t:""} (${e})`);return!1}function vt(e,t=""){if("pending"===e||yt(e,t))return!0;console&&console.error&&console.error(`Invalid state passed ${t?"to "+t:""} (${e})`);return!1}const It=e=>vt(e,"getHttpRequestStatsByState")&&window.hubspot&&window.hubspot._httpRequestStats&&window.hubspot._httpRequestStats[e]?Object.keys(window.hubspot._httpRequestStats[e]).map(t=>window.hubspot._httpRequestStats[e][t]):[],Rt=()=>It("pending").concat(It("succeeded"),It("timedOut"),It("failed"),It("aborted"));if(window.hubspot){window.hubspot.getAllHttpRequestStats||(window.hubspot.getAllHttpRequestStats=Rt);window.hubspot.getHttpRequestStatsByState||(window.hubspot.getHttpRequestStatsByState=It)}const Ot=(e,t)=>{const n=bt++;if(window.hubspot){window.hubspot._httpRequestStats||(window.hubspot._httpRequestStats={pending:{},succeeded:{},timedOut:{},failed:{},aborted:{}});window.hubspot._httpRequestStats.pending||(window.hubspot._httpRequestStats.pending={});window.hubspot._httpRequestStats.pending[n]={id:n,started:wt(),state:"pending",url:e,via:t}}return n},Tt=(e,t,n="succeeded",s={})=>{if(yt(n,"finishTrackingRequest for "+t)&&window.hubspot&&window.hubspot._httpRequestStats&&window.hubspot._httpRequestStats.pending){const t=window.hubspot._httpRequestStats.pending[e];if(t){delete window.hubspot._httpRequestStats.pending[e];t.finished=wt();t.state=n;window.hubspot._httpRequestStats[n]||(window.hubspot._httpRequestStats[n]={});window.hubspot._httpRequestStats[n][e]=t;Object.keys(s).forEach(e=>{null==t[e]&&null!=s[e]&&(t[e]=s[e])})}}},Et=(e,t)=>t.reduce((e,t)=>t(e),e),Ct=e=>(e.getAllResponseHeaders()||"").trim().split("\n").reduce((e,t)=>{const n=t.trim().split(":"),s=n.shift().trim(),o=n.join(":").trim();e[s]=o;return e},{}),St=(e,t)=>{e=g("options",t)(e);const n=R(t);return n&&n.length?Et(Promise.resolve(e),n):Promise.resolve(e)},xt=e=>{try{return 0===e.getResponseHeader("content-type").indexOf("application/json")?JSON.parse(e.responseText):void 0}catch(e){return}},Nt=e=>({status:e.status,statusText:e.statusText,data:"response"in e?e.response:e.responseText,headers:Ct(e),xhr:e,responseText:"text"===e.responseType||""===e.responseType?e.responseText:"",responseJSON:xt(e)}),qt=(e,t,n)=>{const s=Nt(e);return Object.assign(s,{statusText:s.statusText||t,responseJSON:xt(e),errorMessage:t,errorCode:n})},$t=e=>{let t;const n="REQUEST ERROR";e instanceof Error?t=e:("string"==typeof e||e instanceof String)&&(t=new Error(e));return Object.assign(t,{code:n,status:0,statusText:t.message})},jt=Symbol("requestId"),At=e=>{if(!0===e.doNotTrack)return e;{const t=Ot(e.url,"hub-http"),n=Object.assign({},e);n[jt]=t;return n}},kt=(e,{willBeRetried:t=!1,retryReason:n,retryAttempt:s}={})=>{e.options&&void 0!==e.options[jt]&&("ABORT"===e.errorCode?Tt(e.options[jt],e.options.url,"aborted",{status:e.status}):"TIMEOUT"===e.errorCode?Tt(e.options[jt],e.options.url,"timedOut",{status:e.status}):Tt(e.options[jt],e.options.url,"failed",{status:e.status,statusText:e.statusText,willBeRetried:t,retryReason:n,retryAttempt:s}));return e},Bt=(e,t)=>{const n=e.retryAttempts||0;return t(Object.assign({},e,{retryAttempts:n})).catch(s=>{if(s.retry&&s.retry.exceededRetries)return Promise.reject(T(s,`Request for ${s.options.method} ${s.options.url} failed with status code ${s.status} after max retries exceeded (${s.retry.maxRetries}). ${s.statusText||""}`));if(s.retry){const o=s.retry.reason?" Reason: "+s.retry.reason:"";kt(s,{willBeRetried:!0,retryReason:o,retryAttempt:n+1});console.log(`Retrying. Retry attempt ${n+1} of ${s.retry.maxRetries}.${o}`);return new Promise(o=>{setTimeout(()=>o(Bt(Object.assign({},e,{retryAttempts:n+1}),t)),s.retry.delay)})}return Promise.reject(s)})},_t=e=>{e.options&&void 0!==e.options[jt]&&Tt(e.options[jt],e.options.url,"succeeded",{status:e.status,statusText:e.statusText});return e},Ht=e=>null==e?"unknown":"static"===e?"dev":e.replace("static-",""),Lt=e=>e.appInfo?se("X-HubSpot-Static-App-Info",`${e.appInfo.name}@${Ht(e.appInfo.version)}`)(e):e,Pt=e=>{if(!e.appInfo)return e;const t=k(S(e.url).query);return ae({hs_static_app:t.hs_static_app||e.appInfo.name,hs_static_app_version:t.hs_static_app_version||""+Ht(e.appInfo.version)})(e)};function zt(e){return t=>Object.assign({},t,{mockAuth:e})}var Wt=n(0);function Ut(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){t.push(n);t.push(String(e[n]))}return t.sort().toString()}const Mt=60*1e3;let Dt;function Ft(e,t){const n=Object(Wt.a)();return Dt?Dt(e,t):n.navigator&&n.navigator.sendBeacon(e,t)}function Gt(e,t=""){if(Ft)try{Ft(e,t)}catch(e){}}const Jt={package:Object(Wt.b)()&&Object(Wt.b)().bender&&Object(Wt.b)().bender.currentProject||"unknown",version:Object(Wt.b)()&&Object(Wt.b)().bender&&Object(Wt.b)().bender.currentProjectVersion||"unknown"};function Vt(){return`https://metrics-fe-${a.getHublet()}.hubspot${a.isQa()?"qa":""}.com/metrics/v1/frontend/custom/send?hs_static_app=${Jt.package}&hs_static_app_version=${Jt.version}`}function Qt(e){if(a.deployed("METRICS")){a.debug("METRICS")&&console.log("[metrics-js] Datapoint sent",e);Gt(Vt(),JSON.stringify(e))}else a.debug("METRICS")&&console.log("[metrics-js] Dropping local datapoint",e)}let Zt=null;const Xt="__metricsJsDisabled";const Kt=()=>!("object"!=typeof window.safari||!window.safari.pushNotification);class Yt{constructor(){this.metrics=new Map;this.interval=void 0;this.flush=(e=!1)=>{const t=[];this.metrics.forEach(n=>{n.canFlush(e)&&t.push(n.flush())});t.length>0&&Qt(t)};this.eagerlyFlushQueueOnUnload=()=>{"hidden"!==document.visibilityState&&"beforeunload"!==this.listenTo||this.stop()};this.listenTo=Kt()?"beforeunload":"visibilitychange"}static instance(){Zt=Zt||new Yt;return Zt}clearMetricCache(){this.metrics.clear()}run(){if(!(Object(Wt.a)()&&Object(Wt.a)().hubspot&&Object(Wt.a)().hubspot[Xt]||this.interval)){this.interval=setInterval(this.flush,Mt);this.interval.unref&&this.interval.unref();try{window.addEventListener(this.listenTo,this.eagerlyFlushQueueOnUnload,!0)}catch(e){}}}stop(){clearInterval(this.interval);this.interval=void 0;this.flush(!0);this.clearMetricCache();try{window.removeEventListener(this.listenTo,this.eagerlyFlushQueueOnUnload)}catch(e){}}getMetricCacheKey(e,t){return`${e}-${Ut(t)}`}getMetric(e,t,n){const s=this.getMetricCacheKey(e,t);if(this.metrics.has(s))return this.metrics.get(s);const o=new n(e,t);this.metrics.set(s,o);return o}}class en{constructor(e,t){this.name=e;this.dimensions=t}getDimensions(){return this.dimensions}getName(){return this.name}getSeries(e){return[this.name,e].join(".")}toString(){return JSON.stringify({name:this.getName(),dimensions:this.getDimensions()},null,2)}}class tn extends en{constructor(...e){super(...e);this.count=0;this.hasUpdated=!1}safeStep(e){if("number"!=typeof e||e%1==0){this.hasUpdated=!0;this.count+=e}else 0}increment(e=1){this.safeStep(e)}decrement(e=1){this.safeStep(-1*e)}canFlush(e=!1){return this.hasUpdated}flush(){const e={name:this.getName(),values:[this.count],type:"COUNTER",dimensions:this.getDimensions()};this.count=0;this.hasUpdated=!1;return e}}class nn extends en{constructor(...e){super(...e);this.values=[]}update(e){this.values.push(e)}canFlush(){return this.values.length>0}flush(){const e={name:this.getName(),type:"HISTOGRAM",values:this.values.slice(),dimensions:this.getDimensions()};this.values=[];return e}}class sn extends tn{canFlush(e){return e}flush(){const e=super.flush();e.type="HISTOGRAM";return e}}function on(e){return e&&"function"==typeof e.then}class rn extends en{constructor(...e){super(...e);this.values=[]}update(e){this.values.push(e)}time(e){const t=performance.now(),n=e();if(on(n))return n.then(e=>{this.update(performance.now()-t);return e});this.update(performance.now()-t);return n}canFlush(){return this.values.length>0}flush(){const e={name:this.getName(),type:"TIMER",values:this.values.slice(),dimensions:this.getDimensions()};this.values=[];return e}}const an=Symbol("SessionCounter");class cn{constructor(e,t={}){this.namespace=e;this.globalDimensions=t}namespaceMetric(e){return`${this.namespace}.${e}`}counter(e,t={}){return Yt.instance().getMetric(this.namespaceMetric(e),Object.assign({},this.globalDimensions,{},t),tn)}[an](e,t={}){return Yt.instance().getMetric(this.namespaceMetric(e),Object.assign({},this.globalDimensions,{},t),sn)}histogram(e,t={}){return Yt.instance().getMetric(this.namespaceMetric(e),Object.assign({},this.globalDimensions,{},t),nn)}timer(e,t={}){return Yt.instance().getMetric(this.namespaceMetric(e),Object.assign({},this.globalDimensions,{},t),rn)}}let ln;function un(e){Object(Wt.b)().__metricsSetupComplete=e}function dn(){return Object(Wt.b)().__metricsSetupComplete}function hn(){if(!ln&&!dn()){ln=new cn("metrics",{});ln.counter("loaded").increment();un(!0)}}let pn,gn=window;const mn=new Set;function fn(e){gn=e||gn;if(!pn){pn=new cn("js",{});try{gn.addEventListener("error",In);gn.addEventListener("unhandledrejection",yn);gn.addEventListener("rejectionhandled",vn)}catch(e){}}}const wn=/@<inline>|moz-extension:\/\/|chrome-extension:\/\/|safari-web-extension:\/\/|safari-extension:\/\//;function bn(e){if(e&&e.stack&&e.stack.match(wn)){pn&&pn.counter("browser-extension-errors").increment();return!0}return!1}function yn(e){pn&&(e.reason&&bn(e.reason)||pn.counter("unhandled-promise-rejection").increment())}function vn(){pn&&pn.counter("handled-promise-rejection").increment()}function In(e){if(!pn)return;if(!(e instanceof ErrorEvent))return;const t=e.error||new Error(e.message);if(!mn.has(t))if(Rn(t))pn.counter("configured-ignored-errors").increment();else if(!bn(t)){pn.counter("errors").increment();pn[an]("errors-per-session").increment();mn.add(t);On(t)}}function Rn(e){return!!(window.hubspot&&window.hubspot._shouldIgnoreJsError&&window.hubspot._shouldIgnoreJsError(e))}function On(e){setTimeout(()=>mn.delete(e),250)}function Tn(){const e=Yt.instance();e.run();return e}function En(e,t={}){if(!e)throw new Error("[metrics-js] A namespace is required for a Metrics factory.");Tn();fn();const n=t.dimensions||{};t.library&&(n.fe_library=t.library);return new cn(e,n)}hn();const Cn=En("http",{library:"hub-http"}),Sn=1e4,xn=`https://${X(he("app","hubspot"))}/api/metrics/v1/frontend/send`,Nn=new Set,qn=Boolean(navigator.sendBeacon);let $n=void 0,jn=!1;const An=e=>{const t=e.performance.getEntriesByType("resource");if(!t||!t.length)return{};const n=t.filter(e=>"xmlhttprequest"===e.initiatorType),s={};n.forEach(({name:e,duration:t,requestStart:n,responseStart:o,transferSize:i})=>{s[e]||(s[e]=[]);s[e].push({duration:t,transferSize:i,serverTime:o-n,requestStart:n})});return s},kn=(e,t)=>{if(!e)return{};const n=e.filter(e=>t-e.requestStart<10);return n.length?n[0]:{}},Bn=()=>{try{if(0===Nn.size)return;const e=[...Nn];Nn.clear();let t,n={};try{t=window.apiIframeUsed&&window.apiIframe&&window.apiIframe.contentWindow;n=t?An(window.apiIframe.contentWindow):{}}catch(e){}let s={};try{s=An(window)}catch(e){}const o=Object.assign({},s,{},n),i=e.map(({url:e,sendTime:t,statusCode:n,statusDesc:s})=>{const i={url:e,statusCode:n};s&&(i.statusDesc=s);const r=kn(o[e],t);return Object.assign({},i,{},r)});navigator.sendBeacon(xn,JSON.stringify({datapoints:i}))||e.forEach(e=>Nn.add(e))}catch(e){}},_n=e=>{if(qn){Nn.add(e);clearTimeout($n);Nn.size>=25&&Bn();$n=setTimeout(Bn,Sn);if(!jn){window.addEventListener("unload",Bn,!1);jn=!0}}},Hn=e=>{if("string"==typeof e)try{const{hostname:t}=S(e),[n,s,o]=t.split(".");Cn.counter("request-sent",{hostname:[n.replace(/\d+/,""),s.replace(/qa$/,""),o].join("."),prom_only:!0}).increment()}catch(e){}},Ln=e=>new Promise(t=>{const n=new(e.Request||XMLHttpRequest);if(e.error){t(St(qt(n,e.error.message,"OPTIONSERROR"),e));return}if(e.externalResponse){const s=e.externalResponse instanceof XMLHttpRequest?Nt(e.externalResponse):Object.assign(Nt(n),e.externalResponse);t(St(s,e));return}Hn(e.url);n.open(e.method||"GET",e.url,!0);"number"==typeof e.timeout&&(n.timeout=e.timeout);n.withCredentials=e.withCredentials;e.responseType&&(n.responseType=e.responseType);"function"==typeof e.withXhr&&e.withXhr(n);Object.keys(e.headers||{}).forEach(t=>{!1!==e.headers[t]&&n.setRequestHeader(t,e.headers[t])});const s=performance.now();n.addEventListener("load",()=>{_n({url:n.responseURL,sendTime:s,statusCode:n.status});return t(St(Nt(n),e))});n.addEventListener("error",()=>{_n({url:n.responseURL,sendTime:s,statusCode:n.status,statusDesc:"NETWORKERROR"});return t(St(qt(n,"Network request failed","NETWORKERROR"),e))});n.addEventListener("timeout",()=>{_n({url:n.responseURL,sendTime:s,statusCode:n.status,statusDesc:"TIMEOUT"});return t(St(qt(n,"Request timeout","TIMEOUT"),e))});n.addEventListener("abort",()=>{_n({url:n.responseURL,sendTime:s,statusCode:n.status,statusDesc:"ABORT"});return t(St(qt(n,"Request aborted","ABORT"),e))});n.send(void 0===e.data?null:e.data)}),Pn=e=>Promise.reject($t(e)),zn=h(At,e=>{const t=e.useIframeRequest&&window.iframeXMLHttpRequest&&window.apiIframe&&window.apiIframe.contentDocument,n=e.useIframeRequest&&window.iframeXMLHttpRequestPromise;if(!(t||n))return g("Request",e.Request||XMLHttpRequest)(e);window.apiIframeUsed=!0;const s=Object.assign({"X-HS-Referer":window.location.href},e.headers),o=Lt(g("headers",s)(e));return n?window.iframeXMLHttpRequestPromise.then(e=>g("Request",e)(o)).catch(()=>g("Request",e.Request||XMLHttpRequest)(e)):g("Request",window.iframeXMLHttpRequest)(o)},Pt);let Wn=!1,Un=!1;const Mn=e=>{Wn=!0;const t=(t,n)=>{const s=S(t);s.hostname&&s.hostname.match(/^api(-[a-z]{2}\d{1})?\.hubspot(qa)?\.com/)&&Cn.counter("hardcoded-api-hubspot-domain").increment();return Bt(Object.assign({},n,{url:t}),t=>e(t).catch(Pn).then(zn).then(Ln)).then(_t,e=>Promise.reject(kt(e)))},n=e=>(n,s)=>t(n,Object.assign({},s,{method:e})),s=e=>(t,s)=>n(e)(t,s).then(({data:e})=>e);return Object.assign(t,{get:s("GET"),post:s("POST"),put:s("PUT"),patch:s("PATCH"),delete:s("DELETE"),options:s("OPTIONS"),getWithResponse:n("GET"),postWithResponse:n("POST"),putWithResponse:n("PUT"),patchWithResponse:n("PATCH"),deleteWithResponse:n("DELETE"),optionsWithResponse:n("OPTIONS")})};var Dn=e=>Mn(h(zt(Un),e));function Fn(e){let t=!0;const n=()=>t,s=e=>{t=e},o=(...t)=>e(n)(...t);return Object.assign(o,{setEnabled:s})}var Gn=Fn;const Jn=e=>0===e.xhr.readyState?{status:e.status,statusText:e.statusText,data:e.data}:e.xhr,Vn=e=>t=>g("externalResponse",Jn(t))(e),Qn=e=>e.recycledPromise?e.recycledPromise.then(Vn(e),Vn(e)):e,Zn=e=>403===e.status||401===e.status,Xn=e=>{const t=W();return t?U([401,403],t,L)(e):De(Zn)(e)},Kn=Oe(e=>200!==e.status&&!Zn(e),{reason:"Error fetching user data",maxRetries:3,onMaxAttemptsReached:Me}),Yn=e=>g("data",{portalId:e.portalId})(e),es=e=>{const t=X(he("app","hubspot")),n=e.portalId||"";return q({hostname:t,path:`/account-and-billing/${n}/forbidden`})},ts=e=>{const t=e.options,n=es(t);return J(n,t)?Promise.reject(T(e,"Aborting: redirection in progress")):e},ns=e=>!!e.options&&!e.options.allowSuspended&&!!e.data&&!!e.data.user&&Array.isArray(e.data.user.scopes)&&-1!==e.data.user.scopes.indexOf("suspended"),ss=h(e=>Y(e=>"/login-verify"===e.path?Object.assign({},e,{path:"/login-verify/hub-user-info"}):e)(e),ne("GET"),e=>qe("HUBONEDOMAIN",Be(ue(he("app","hubspot",e.hubletOverride))),ue(he("api","hubspot",e.hubletOverride)))(e),e=>ae({portalId:e.portalId})(e)),os=Gn(e=>t=>e()?fe(e=>ns(e)?ts(e):e)(t):t);var is=Dn(h(Z,ke,Qn,Ye,Yn,pe("application/x-www-form-urlencoded",A),ss,le,Xe,ve,Xn,xe,Ce,Se,Kn,ye,os));let rs,as;function cs(){return rs}function ls(e){rs=e}function us(e){as=e}const ds=(e,t)=>{let n;if("function"==typeof window.Event)n=Object.assign(new Event(e),t);else{n=Object.assign(document.createEvent("Event"),t);n.initEvent(e,!0,!0)}window.dispatchEvent(n)},hs=()=>Boolean(window.newrelic),ps="mark_user_info_start",gs="mark_user_info_success",ms="measure_user_info_time",fs="measure_api_verify_time",ws=(e,t)=>{hs()&&window.newrelic.setCustomAttribute(e,t)},bs=e=>{const{cached:t=!0}=e,n=pt(e,["cached"]);!t&&n.externalResponse&&delete n.externalResponse;const s=cs();t&&s&&(n.recycledPromise=s);const o=is("/login-verify",n);t&&s||ls(o);return o.then(({data:e})=>e)};let ys;const vs=()=>{ys||(ys=new Promise((e,t)=>{const n=window.quickFetch&&window.quickFetch.getRequestStateByName("api-verify");if(!n){t(new Error("No quick-fetch early login-verify request found"));ws("earlyRequesterRequestNotFound","true");ws("earlyRequesterFinished","false");return}const s=n.finished;n.whenFinished(t=>{ws("earlyRequesterFinished",""+Boolean(s));window.performance&&"function"==typeof window.performance.getEntriesByName&&window.performance.getEntriesByName(fs).length&&ws("earlyRequesterApiTime",window.performance.getEntriesByName(fs)[0].duration);return e(t)});n.onError(e=>{t(new Error(`[hub-http] EarlyRequester token refresh attempt failed with status ${e.status}: ${e.statusText}`))})}));return ys},Is=e=>{const t=t=>{t&&console.error(t.message);return bs(e)},n=e=>({status:200,statusText:"OK",data:e});return vs().then(t=>bs(Object.assign({},e,{externalResponse:n(t)}))).catch(t).then(({auth:e,portal:t,user:n})=>{const s={user:n,gates:t.enabled_gates,portal:t};e&&(s.auth=e);if(window.performance&&"function"==typeof window.performance.mark&&"function"==typeof window.performance.measure&&"function"==typeof window.performance.getEntriesByName){window.performance.mark(gs);window.performance.measure(ms,ps,gs);const e=window.performance.getEntriesByName(ms).length?window.performance.getEntriesByName(ms)[0].duration:-1;ws("userInfoTime",e)}ds("hubspot:userinfochange",s);return s})},Rs=(e={})=>{const t=Object.assign({},e);window.performance&&"function"==typeof window.performance.mark&&window.performance.mark(ps);return Is(t).then(e=>{us(e);return e})},Os=e=>Rs(Object.assign({},e,{safeMode:!0}));var Ts=n(2),Es=n.n(Ts),Cs=n(3),Ss=n.n(Cs),xs=n(4),Ns=n.n(xs),qs=n(5),$s=n.n(qs),js=(n(6),n(7),n(8)),As=n.n(js),ks={id:null,pathRegex:/^\/(?:[A-Za-z0-9-_]*)\/(\d+)(?:\/|$)/,queryParamRegex:/(?:\?|&)portalid=(\d+)/i,getPortalIdFromPath(e){if(document){null==e&&(e=this.pathRegex);return this.parsePortalIdFromString(document.location.pathname,e)}},getPortalIdFromQueryParam(){if(document)return this.parsePortalIdFromString(document.location.search,this.queryParamRegex)},parsePortalIdFromString(e,t){const n=t.exec(e),s=null!=n?n[1]:void 0;return s?+s:void 0},get(e){null==e&&(e={});if(this.id&&!e.reparse)return this.id;const t=this.getPortalIdFromPath(e.regex)||this.getPortalIdFromQueryParam();if(!e.preserveGlobalId){null==window.hubspot&&(window.hubspot={});null==window.hubspot.portal&&(window.hubspot.portal={});null==window.hubspot.portal.id&&(window.hubspot.portal.id=t);t&&(this.id=t)}return t}};const Bs="na1",_s={APP:"app",APP_API:"app-api"};function Hs(e){const t=e&&e.hubletOverride?e.hubletOverride:a.getHublet();return t===Bs?"":"-"+t}function Ls(e,t){if(t&&t.hubletPostfixLocation&&"domain"===t.hubletPostfixLocation)return e;e===_s.APP_API&&(e=_s.APP);return`${e}${Hs(t)}`}function Ps(e){return`${Ws(e)}${zs(e)}${Us(e)}`}function zs(e){return"qa"===(e&&e.envOverride?e.envOverride:a.getShort())?"qa":""}function Ws(e){return e&&e.domainOverride?e.domainOverride:"hubspot"}function Us(e){return e&&e.hubletPostfixLocation&&"domain"===e.hubletPostfixLocation?Hs(e):""}function Ms(e){return e&&e.tldOverride?e.tldOverride:"com"}function Ds(e){return e===_s.APP_API?"/api":""}function Fs(e,t){return`https://${Ls(e,t)}.${Ps(t)}.${Ms(t)}${Ds(e)}`}function Gs(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,()=>{n.call(e)})}function Js(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function Vs(e,t){e.appendChild(t)}function Qs(e){let t=document.createElement("div");t.innerHTML=e;return t}function Zs(e,t){if(e)if(e.classList)e.classList.remove(t);else{const n=new RegExp(`(^|\\b)${t.split(" ").join("|")}(\\b|$)`,"gi");e.className.replace(n," ")}}function Xs(e,t){e&&(e.classList?e.classList.add(t):e.className+=" "+t)}function Ks(e,t){void 0!==e.textContent?e.textContent=t:e.innerText=t}function Ys(e,t,n){e.setAttribute(t,n)}const eo=()=>"in-app-help-auto-open-widget:"+(window.hubspot&&window.hubspot.portal&&window.hubspot.portal.id),to=()=>{const e=new Date;e.setDate(e.getDate()+1);localStorage.setItem(eo(),e.getTime())},no=()=>{localStorage.removeItem(eo())},so=e=>{let t=0;try{const n=localStorage.getItem(eo());t=parseInt(n,10)}finally{Date.now()<t&&setTimeout(e)}},oo=1e3,io=600,ro=440,ao=9e5,co="autoOpenZorseCreateView=true",lo="autoOpenWidgetRoute=",uo="autoOpenWidgetArticle=",ho="zorse/v2/notifications",po="zorse-webticket",go="zorse/v2/messages/tokens/create",mo="hubspot:livechat:identificationToken",fo=3e5,wo="livechat-public/v1/message/public",bo="hubspot:isc:userIsEligibleForIscChat",yo="hubspot:isc:userHasDismissedIscEligibilityPopup",vo=3e4,Io="en",Ro={VARIANT_1:"variant1",VARIANT_2:"variant2",CONTROL:"control"},Oo={VARIANT_1:"variant1",VARIANT_2:"variant2",CONTROL:"control"};class To{constructor(e,t){this.cleanAutoOpenQueryString=this.cleanAutoOpenQueryString.bind(this);this.closeWidget=this.closeWidget.bind(this);this.handleReceivePostMessage=this.handleReceivePostMessage.bind(this);this.hideShowWidget=this.hideShowWidget.bind(this);this.maybeGetNotifications=this.maybeGetNotifications.bind(this);this.openWidget=this.openWidget.bind(this);this.renderNotifications=this.renderNotifications.bind(this);this.removeNavHelpNotificationClass=this.removeNavHelpNotificationClass.bind(this);this.maybeAddNavHelpNotificationClass=this.maybeAddNavHelpNotificationClass.bind(this);this.resizeIframe=this.resizeIframe.bind(this);this.setHelpButtonAndBindButtonEvents=this.setHelpButtonAndBindButtonEvents.bind(this);this.userCanCreateTickets=this.userCanCreateTickets.bind(this);this.widgetContentsLoaded=this.widgetContentsLoaded.bind(this);this.onOpenCloseWidget=this.onOpenCloseWidget.bind(this);this.fireOpenCloseWidgetCallbacks=this.fireOpenCloseWidgetCallbacks.bind(this);this.handleIscEligibilityResponse=this.handleIscEligibilityResponse.bind(this);this.maybeRequestIsUserIscChatEnabled=this.maybeRequestIsUserIscChatEnabled.bind(this);this.makeIsUserIscChatEnabledRequest=this.makeIsUserIscChatEnabledRequest.bind(this);this.maybeIscPopupTemplate=this.maybeIscPopupTemplate.bind(this);this.closeIscPopup=this.closeIscPopup.bind(this);this.setupZorse=this.setupZorse.bind(this);this.handleUrlParams=this.handleUrlParams.bind(this);this.makeIsFreeTierRequest=this.makeIsFreeTierRequest.bind(this);this.logErrorToConsole=this.logErrorToConsole.bind(this);this.setIscLocalStorageKey=this.setIscLocalStorageKey.bind(this);this.initInAppHelpWidget=this.initInAppHelpWidget.bind(this);this.initHelp020=this.initHelp020.bind(this);this.setHasGlobalToolbar=this.setHasGlobalToolbar.bind(this);this.applyGlobalToolbarClass=this.applyGlobalToolbarClass.bind(this);this.openCloseWidgetCallbacks=[];this.userIsEligibleForIscChat=!1;this.shouldShowInAppHelpWidget=!1;const n=()=>/(^|\?|&)wp=/.test(window.location.search);if(window.location.pathname.startsWith("/academy/")||n()){this.isHelpInTheNav=!1;this.help015Variant=Ro.CONTROL;this.help20Variant=Oo.CONTROL}else{this.isHelpInTheNav=window.hubspot.zorse&&window.hubspot.zorse.isHelpInTheNav||!1;this.help020Variant=window.hubspot&&window.hubspot.zorse&&window.hubspot.zorse.help020||Oo.CONTROL;this.help015Variant=window.hubspot&&window.hubspot.zorse&&window.hubspot.zorse.help015||Ro.CONTROL}this.help020RenderHelpNav=this.help020Variant===Oo.VARIANT_1||this.help020Variant===Oo.VARIANT_2;this.hasGlobalToolbar=!1;ks.get();this.hubhttp=e;this.userInfo=t;this.maybeGetNotifications();this.maybeRequestIsUserIscChatEnabled();this.chatMessageCount=0;this.appName=window.hubspot.bender?window.hubspot.bender.currentProject:null}setHasGlobalToolbar(e){e&&e.enabled_gates&&Array.isArray(e.enabled_gates)&&(this.hasGlobalToolbar=e.enabled_gates.includes("navigation:preact:GlobalToolbar")||e.enabled_gates.includes("navigation:react:GlobalToolbar"))}applyGlobalToolbarClass(){return this.hasGlobalToolbar?"global-toolbar":""}initHelp020(){if(this.help020RenderHelpNav&&this.isHelpInTheNav){this.shouldShowInAppHelpWidget=!0;so(()=>this.openWidget({reopened:!0}))}}initInAppHelpWidget({user:{scopes:e}}){e&&-1===e.indexOf("zorse-chatflow-targeting-enterprise")&&-1===e.indexOf("zorse-chatflow-targeting-pro")&&e.indexOf("zorse-chatflow-targeting-starter")>-1&&(this.shouldShowInAppHelpWidget=!0);this.initHelp020();this.help015Variant===Ro.VARIANT_1&&so(()=>this.openWidget({reopened:!0}))}logErrorToConsole(e,t){hubspot.zorse&&hubspot.zorse.dev&&console&&console.log(e,t)}setupZorse(){const e=this.userIsEligibleForIscChat?this.closedIscWidgetTemplate():this.closedWidgetTemplate();this.widget=Qs(e);Vs(document.body,this.widget);this.setHelpButtonAndBindButtonEvents(this.openWidget,this.closeIscPopup);const t=document.getElementsByTagName("html");if(t&&t[0]){this.html=t[0];Xs(this.html,"zorse")}window.addEventListener&&window.addEventListener("message",this.handleReceivePostMessage);this.handleUrlParams()}handleUrlParams(){const e=e=>-1!==window.location.search.indexOf(e);if(window.location&&window.location.search)if(e(co)){this.openWidget({create:!0,autoOpened:!0});setTimeout(()=>this.cleanAutoOpenQueryString(co),oo)}else if(e(lo+"chat")){this.userIsEligibleForIscChat?this.openWidget({isc:!0}):this.openWidget({create:!0,autoOpened:!0});setTimeout(()=>this.cleanAutoOpenQueryString(lo+"chat"),oo)}else if(e(lo+"welcome")){this.openWidget();setTimeout(()=>this.cleanAutoOpenQueryString(lo+"welcome"),oo)}else if(e(uo)){const e=window.location.search.indexOf(uo)+uo.length,t=window.location.search.indexOf("&",e);let n="";n=-1!=t?window.location.search.substring(e,t):window.location.search.substr(e);this.openWidget({url:n});setTimeout(this.cleanAutoOpenArticleQueryString,oo,n)}}isChatActive(){return document&&document.cookie&&(-1!==document.cookie.indexOf("_bc-curl")||-1!==document.cookie.indexOf("zorse-active-conversation"))}getLang(){return"undefined"!=typeof I18n?I18n.lang:Io}setIscLocalStorageKey(e){localStorage.setItem(bo,JSON.stringify({eligible:e,portalId:window.hubspot.portal.id,timestamp:Date.now()}))}makeIsFreeTierRequest(){this.hubhttp.get("customer-inventory/v1/inventory/").then(({products:e})=>{const t=Array.isArray(e)&&0===e.length;this.userIsEligibleForIscChat=t;this.setIscLocalStorageKey(t);this.handleIscEligibilityResponse()}).catch(()=>{this.handleIscEligibilityResponse()})}getLiveChatIdentificationToken(){const e=localStorage.getItem(mo);if(e){const t=JSON.parse(e);return Date.now()-t.timestamp>=fo?this.makeLiveChatIdentificationTokenRequest():t.token}return this.makeLiveChatIdentificationTokenRequest()}makeLiveChatIdentificationTokenRequest(){return this.hubhttp.post(go).then(({token:e})=>{this.setLiveChatTokenLocalStorage(e);return e}).catch(e=>{this.logErrorToConsole("Caught error from token request:",e)})}setLiveChatTokenLocalStorage(e){localStorage.setItem(mo,JSON.stringify({timestamp:Date.now(),token:e}))}makeRequest(e,t,n){return new Promise((s,o)=>{const i=new XMLHttpRequest;i.open(e,t);i.setRequestHeader("X-HubSpot-Messages-Uri",n);i.onload=function(){this.status>=200&&this.status<300?s(JSON.parse(i.response)):o({status:this.status,statusText:i.statusText})};i.onerror=function(){o({status:this.status,statusText:i.statusText})};i.send()})}getLiveChatEndpointUrl(e){return`${Fs("app-api",{hubletOverride:"na1"})}/${wo}?portalId=${this.isQa()?99535353:53}&email=${e.email}&identificationToken=${e.token}`}makeIscLiveChatAvailabilityRequest(e,t){return this.makeRequest("GET",this.getLiveChatEndpointUrl(e),t)}makeIsUserIscChatEnabledRequest(){const e=this.getLang(),t=`${window.location.href}${window.location.search?"&":"?"}iscChatLang=${e}`;Promise.all([this.userInfo(),this.getLiveChatIdentificationToken()]).then(([e,n])=>{const{user:{email:s}}=e;this.makeIscLiveChatAvailabilityRequest({email:s,token:n},t).then(e=>{if("HIDE_WIDGET"!==e.type)this.makeIsFreeTierRequest();else{this.setIscLocalStorageKey(!1);this.handleIscEligibilityResponse()}},()=>{this.handleIscEligibilityResponse()})})}maybeRequestIsUserIscChatEnabled(){if(localStorage.getItem(bo+":override")){this.userIsEligibleForIscChat=!0;this.setIscLocalStorageKey(!0);this.handleIscEligibilityResponse()}else if(window.hubspot.portal&&window.hubspot.portal.id){let e,t=!1;try{const n=localStorage.getItem(bo);if(n){e=JSON.parse(n);const s=Date.now()-e.timestamp<=ao,o=e.portalId===window.hubspot.portal.id;t=s&&o;t||localStorage.removeItem(bo)}}catch(e){this.logErrorToConsole("Caught error from parsing local storage:",e)}if(t){this.userIsEligibleForIscChat=e.eligible;this.handleIscEligibilityResponse();this.initHelp020()}else this.userInfo().then(e=>{const{user:t,portal:n}=e;this.setHasGlobalToolbar(n);this.initInAppHelpWidget(e);this.userCanCreateTickets(t,n)?this.setupZorse():this.makeIsUserIscChatEnabledRequest()},()=>this.setupZorse())}}cleanAutoOpenArticleQueryString(e){void 0!==window.history&&window.history&&window.history.replaceState&&document.title&&window.history.replaceState({},document.title,`${window.location.pathname}${window.location.search.replace(uo+e,"")}`)}cleanAutoOpenQueryString(e){void 0!==window.history&&window.history&&window.history.replaceState&&document.title&&window.history.replaceState({},document.title,`${window.location.pathname}${window.location.search.replace(e,"")}`)}hasAutoOpenQuery(){return[lo,co,uo].find(e=>-1!==window.location.search.indexOf(e))}handleReceivePostMessage(e){let t;try{t="object"==typeof e.data?e.data:JSON.parse(e.data)}catch(t){hubspot.zorse.dev&&console&&console.error("Help button received an unparsable postMessage:",t,e);return}if(t.name)switch(t.name){case"close":return this.closeWidget();case"minimize":return this.hideShowWidget(!0);case"restore":return this.hideShowWidget(!1);case"loaded":return this.widgetContentsLoaded(t);case"resize":return this.resizeIframe(t);case"start-dragging":return this.startDragging(t);case"chat-message":return this.renderChatNotifications(!0);case"minimize-button":return this.hideShowButton(!0);case"restore-button":return this.hideShowButton(!1);default:this.logErrorToConsole("Help button received postMessage with no handler:",t)}}maybeGetNotifications(){this.userInfo().then(({user:e,portal:t})=>{this.userCanCreateTickets(e,t)&&this.hubhttp.get(ho).then(e=>{this.renderNotifications(e);this.maybeAddNavHelpNotificationClass()}).catch(e=>{this.logErrorToConsole("Caught error from notifications request:",e)})}).catch(e=>{this.logErrorToConsole("Caught error from userInfo request:",e)})}maybeAddNavHelpNotificationClass(){if(this.isHelpInTheNav&&this.notificationResponse&&this.notificationResponse.count){Xs(window.parent.document.querySelector(".navHelpNotification"),"unread")}}renderNotifications(e){this.notificationResponse=e||this.notificationResponse;if(this.notificationResponse&&this.notificationResponse.count){const e=document.getElementById("help-widget-toggle"),t=document.getElementById("zorse-button-zorse-notification"),n=document.getElementById("zorse-button-zorse-notification-count"),s=document.getElementById("zorse-button-zorse-notification-avatar"),o=document.getElementById("help-question-mark-icon");if(e&&t){Xs(o,"hidden");Ks(n,this.notificationResponse.count);Xs(e,"has-notification");!this.userIsEligibleForIscChat&&s&&Ys(s,"src",this.notificationResponse.agentAvatarUrl);Zs(t,"hidden")}}}renderChatNotifications(e){const t=document.getElementById("zorse-button-chat-notification"),n=document.getElementById("zorse-button-chat-notification-count");if(t)if(e){if(!this.isWidgetOpen()){this.chatMessageCount++;Ks(n,this.chatMessageCount);Zs(t,"hidden")}}else{Xs(t,"hidden");this.chatMessageCount=0}}removeNavHelpNotificationClass(){const e=document.getElementsByClassName("navHelpNotification");Array.from(e).forEach(e=>{Zs(e,"unread")})}openWidget(e){e=e||{};if(!this.hasAutoOpenQuery()||!e.reopened){(this.help015Variant===Ro.VARIANT_1||this.help020RenderHelpNav)&&to();!this.isHelpInTheNav&&this.helpButton&&Js(this.helpButton,"click",this.openWidget);this.isHelpInTheNav&&this.removeNavHelpNotificationClass();if(window.hubspot.portal&&window.hubspot.portal.id){this.userIsEligibleForIscChat&&localStorage.setItem(yo,"true");const t=window.hubspot.portal.id,n=this.addCorsSensitivePropertiesToRoute(this.getRouteFromOptions(e)),s=(this.notificationResponse?this.notificationResponse.count:void 0)?"has-notification":"";this.widget.innerHTML=this.openWidgetTemplate(t,n,s);this.setHelpButtonAndBindButtonEvents(()=>this.hideShowWidget(!1),this.closeIscPopup);this.fireOpenCloseWidgetCallbacks(!0)}else console&&console.error("Could not deduce portal id from hubspot object")}}getRouteFromOptions(e){if((e=e||{}).create)return"create?autoOpened="+!!e.autoOpened;if(e.migrationId)return"migration?migrationId="+e.migrationId;if(e.feedback)return"feedback";if((e.url||e.kbArticle)&&this.validateUrl(e.url||e.kbArticle))return this.generateUrlRoute(e.url||e.kbArticle);if(e.chat)return"chat";if(e.isc)return"isc-chat";const{segments:t}=e;return t?"string"==typeof t?"segments/"+t:"segments":e.reopened?"?reopened=true":""}validateUrl(e){-1===e.indexOf("/")&&(e=decodeURIComponent(e));return e.toLowerCase().startsWith("https://")}generateUrlRoute(e){-1===e.indexOf("/")&&(e=decodeURIComponent(e));e=e.split("#").length>1?`${e.split("#")[0]}${-1===e.indexOf("?")?"?":"&"}zorseWidget#${e.split("#")[1]}`:`${e}${-1===e.indexOf("?")?"?":"&"}zorseWidget`;return"url?location="+encodeURIComponent(e)}addCorsSensitivePropertiesToRoute(e){const t={title:window.document&&window.document.title?window.document.title:"",href:window.location&&window.location.href?window.location.href:"",pathname:window.location&&window.location.pathname?window.location.pathname:"",navigation_rendered_mode:hubspot.navigation_rendered_mode||"MARKETING",appName:this.appName,isHelpInTheNav:this.isHelpInTheNav,help015:this.help015Variant,help020:this.help020Variant},n=Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&");return-1!==e.indexOf("?")?`${e}&${n}`:`${e}?${n}`}widgetContentsLoaded(){const e=document.getElementById("zorse-iframe"),t=document.querySelector("#help-widget .zorse-loading-container"),n=document.querySelector("#in-app-help-close-button");Zs(e,"hidden");Zs(n,"hidden");t&&t.parentNode&&t.parentNode.removeChild(t);this.toggleZorseOpenedClass(!0)}resizeIframe(e){const t=document.getElementById("zorse-iframe"),n=document.querySelector("#help-widget.in-app-help")||document.querySelector("#help-widget.in-app-help-nav"),s=void 0!==e&&e&&e.payload&&e.payload.height,o=Math.max(s||0,io),i=void 0!==e&&e&&e.payload&&e.payload.width,r=Math.max(i||0,ro);if(t)if(n){n.style.height=isNaN(s)?s:s+"px";n.style.width=isNaN(i)?i:i+"px";t.style.height="100%";t.style.width="100%"}else{t.style.height=o+"px";t.style.width=r+"px"}}startDragging(e){const t=void 0!==e&&e&&e.payload&&e.payload.mouseDownX,n=void 0!==e&&e&&e.payload&&e.payload.mouseDownY;if(Number.isNaN(+t)||Number.isNaN(+n))return;const s=document.getElementById("zorse-iframe"),o=document.querySelector("#help-widget.in-app-help")||document.querySelector("#help-widget.in-app-help-nav");if(!o||!s)return;const i=o.getBoundingClientRect(),r=t+i.x,a=n+i.y,c=window.getComputedStyle(o),l=parseFloat(c.right),u=e=>{const{scrollX:t}=window,{scrollHeight:n}=document.body,s=e.pageX-r,c=e.pageY-a;let u=l-s+t,d=i.top+c;const h=16,p=16;u<h-t&&(u=-t+h);d>n-i.height-h&&(d=n-i.height-h);if(e.pageX<i.width+h){o.style.right="unset";o.style.left=`max(${h}px, ${i.x+s}px)`}else{o.style.right=`min(100vw - ${i.width+p+h}px, ${u}px)`;o.style.left=""}o.style.top=`max(${h}px, ${d}px)`};Xs(s,"is-dragging");const d=()=>{document.body.removeEventListener("mousemove",u);Zs(s,"is-dragging")};document.body.addEventListener("mousemove",u);document.body.addEventListener("mouseup",d);document.body.addEventListener("mouseleave",d)}setHelpButtonAndBindButtonEvents(e,t){if(this.isHelpInTheNav)return;if(this.userIsEligibleForIscChat){const e=document.getElementById("bubble-close-button");e&&Gs(e,"click",t);this.helpButton=document.getElementById("isc-help-button");Gs(this.helpButton,"click",this.openWidget);this.iscChatButton=document.getElementById("isc-chat-button");Gs(this.iscChatButton,"click",this.openWidget.bind(this,{isc:!0}))}else{this.helpButton=document.getElementById("help-widget-toggle");this.helpButton.tabIndex=0;Gs(this.helpButton,"click",e);Gs(this.helpButton,"keydown",t=>{13!==t.keyCode&&32!==t.keyCode||e()})}const n=document.getElementById("in-app-help-close-button");n&&Gs(n,"click",()=>this.hideShowWidget(!0));this.helpCloseButton=document.getElementById("zorse-help-close-button");this.helpCloseButton&&Gs(this.helpCloseButton,"click",e=>{this.hideShowButton(!0);e.stopPropagation()})}handleIscEligibilityResponse(){this.setupZorse();this.userIsEligibleForIscChat&&this.setHelpButtonAndBindButtonEvents(()=>this.openWidget({isc:!0}),this.closeIscPopup)}closeWidget(){(this.help015Variant===Ro.VARIANT_1||this.help020RenderHelpNav)&&no();this.userIsEligibleForIscChat?this.widget.innerHTML=this.closedIscWidgetTemplate():this.widget.innerHTML=this.closedWidgetTemplate();this.maybeGetNotifications();this.setHelpButtonAndBindButtonEvents(this.openWidget,this.closeIscPopup);this.toggleZorseOpenedClass(!1);this.fireOpenCloseWidgetCallbacks(!1)}fireOpenCloseWidgetCallbacks(e){this.openCloseWidgetCallbacks.forEach(t=>{if("function"==typeof t)try{t(e)}catch(e){console.error(e)}})}onOpenCloseWidget(e){if("function"!=typeof e)return!1;const t=t=>t===e;if(this.openCloseWidgetCallbacks.some(t))return!1;this.openCloseWidgetCallbacks.push(e);return!0}hideShowWidget(e){const t=document.getElementById("zorse-iframe"),n=document.getElementById("help-widget-toggle");if(t&&n){t.style.display=e?"none":"";n.style.display=e?"":"none"}(this.help015Variant===Ro.VARIANT_1||this.help020RenderHelpNav)&&(e?no():to());this.renderNotifications();this.toggleZorseOpenedClass(!e);this.userIsEligibleForIscChat||this.renderChatIcon();e||this.renderChatNotifications(!1);const s=document.getElementById("in-app-help-close-button");s&&(s.style.display=e?"none":"");const o=document.querySelector("#help-widget.in-app-help-nav");o&&(o.style.display=e?"none":"")}hideShowButton(e){e&&this.hideShowWidget(e);const t=document.getElementById("chat-widget")||document.getElementById("isc-zorse-widget");t&&(t.style.display=e?"none":"block")}renderChatIcon(){if(this.isHelpInTheNav)return;const e=document.getElementById("help-widget-toggle"),t=document.querySelector(".zorse-help-text"),n=document.querySelector(".zorse-help-text-minimized"),s=document.getElementById("help-question-mark-icon"),o=document.querySelector(".zorse-chat-container"),i=document.getElementById("zorse-button-zorse-notification");t.textContent=this.getHelpText();if(this.isChatActive()){o.style.display="block";Xs(s,"hidden");Xs(t,"zorse-chat-margin");Xs(n,"zorse-chat-margin");Zs(e,"has-notification");Xs(e,"has-chat");this.notificationResponse&&this.notificationResponse.count&&(i.style.display="none")}else{o.style.display="none";Zs(s,"hidden");Zs(t,"zorse-chat-margin");Zs(n,"zorse-chat-margin");Zs(e,"has-chat");this.notificationResponse&&this.notificationResponse.count&&(i.style.display="inline-block")}}getHelpText(){return this.isChatActive()?this.translatedChatText():this.translatedHelpText()}getMinimizedHelpIconDisplay(){return this.isChatActive()?"none":"inherit"}toggleZorseOpenedClass(e){this.html&&(e?Xs(this.html,"zorse-opened"):Zs(this.html,"zorse-opened"))}isWidgetOpen(){return"none"!==document.getElementById("zorse-iframe").style.display}closedWidgetTemplate(e=!0){if(this.isHelpInTheNav)return"";const t=this.isJapanese()?"help-widget-japanese":"";return`<div id='chat-widget' data-html2canvas-ignore='true'>\n        <div id='help-widget' class='${this.applyUiClass()} ${e?"fade-in":""}'>\n          <a id='help-widget-toggle' class='${t}'>\n            ${this.widgetLinkTemplate()}\n          </a>\n        </div>\n      </div>`}closedIscWidgetTemplate(e=!0){return this.isHelpInTheNav?"":`\n    <div id="isc-zorse-widget" data-html2canvas-ignore="true">\n      ${this.maybeIscPopupTemplate()}\n      <div id="isc-help-widget" class="${e?"fade-in":""}">\n          <div id='zorse-button-chat-notification' class='zorse-notification hidden'>\n            <div id='zorse-button-chat-notification-count' class='zorse-notification-count'>1</div>\n          </div>\n          <div class="isc-help-widget__layout-container">\n            <div class="isc-help-widget__button-container" id="isc-chat-button">\n                <div class="isc-help-widget__chat-button">\n                  <img class="isc-help-widget__chat-icon" src="${$s.a}" />${this.translatedChatText()}\n                </div>\n            </div>\n            <div class="isc-help-widget__button-container" id="isc-help-button"><span class="isc-help-widget__help-button">${this.translatedHelpText()}</span></div>\n          </div>\n          ${this.helpCloseButtonTemplate()}\n      </div>\n    </div>\n    `}openWidgetTemplate(e,t,n){if(this.isHelpInTheNav&&this.shouldShowInAppHelpWidget)return`<div id='chat-widget' data-html2canvas-ignore='true'>\n          <div id='help-widget' class='in-app-help-nav help-in-nav ${this.applyGlobalToolbarClass()}'>\n            <iframe\n              id='zorse-iframe' class='zorse-widget-container'\n              src="${this.getWidgetDomain()}/in-app-help/${e}/${t}"\n              scrolling='yes' allowFullscreen='true'\n            ></iframe>\n            <a id='help-widget-toggle' class='hidden'>\n            ${this.userIsEligibleForIscChat?this.closedIscWidgetTemplate(!1):this.widgetLinkTemplate()}\n          </a>\n          </div>\n        </div>`;const s=this.userIsEligibleForIscChat&&this.getLang()===Io;return this.shouldShowInAppHelpWidget||s?`<div id='chat-widget' data-html2canvas-ignore='true'>\n          <div id='help-widget' class='in-app-help ${this.applyUiClass()}'>\n            <a class='zorse-loading-container ${n}'>\n              <div class='loading loading_1'></div>\n              <div class='loading loading_2'></div>\n              <div class='loading loading_3'></div>\n            </a>\n            <iframe\n              id='zorse-iframe' class='zorse-widget-container hidden'\n              src="${this.getWidgetDomain()}/in-app-help/${e}/${t}"\n              scrolling='yes' allowFullscreen='true'\n            ></iframe>\n            <a id='help-widget-toggle' style='display: none'>\n              ${this.userIsEligibleForIscChat?this.closedIscWidgetTemplate(!1):this.widgetLinkTemplate()}\n            </a>\n          </div>\n          <a id="in-app-help-close-button" class="hidden">\n            <img src=${As.a} />\n          </a>\n        </div>`:`<div id='chat-widget' data-html2canvas-ignore='true'>\n        <div id='help-widget' class='${this.applyUiClass()}'>\n          <a class='zorse-loading-container ${n}'>\n            <div class='loading loading_1'></div>\n            <div class='loading loading_2'></div>\n            <div class='loading loading_3'></div>\n          </a>\n          <iframe id='zorse-iframe' class='zorse-widget-container hidden' src="${this.getWidgetDomain()}/help-widget-v2/${e}/${t}" scrolling='no' allowFullscreen='true'></iframe>\n          <a id='help-widget-toggle' style='display: none'>\n            ${this.userIsEligibleForIscChat?this.closedIscWidgetTemplate(!1):this.widgetLinkTemplate()}\n          </a>\n        </div>\n      </div>`}getWidgetDomain(){if(this.widgetDomain)return this.widgetDomain;this.isLocal()&&-1===window.location.hostname.indexOf("knowledge.hubspot.com")?this.widgetDomain="//"+window.location.hostname:this.widgetDomain=Fs("app");return this.widgetDomain}isLocal(){return hubspot.zorse.dev||"local"===a.getShort("ZORSE_WIDGET")}isQa(){return a.isQa()}userCanCreateTickets(e,t){return!t||t.friends_and_family?this.isQa()||this.isLocal():!!(e&&e.scopes&&e.scopes.includes)&&e.scopes.includes(po)}chatImageLinkTemplate(){return`<div class='zorse-chat-container zorse-chat-container-${"undefined"!=typeof I18n&&I18n&&I18n.langEnabled&&-1!=["de","ja"].indexOf(I18n.lang)?"long":"short"}-text' style='display: none;'>\n        <img class="logo" src="${Es.a}">\n      </div>`}widgetLinkTemplate(){const e=this.isJapanese()?Ns.a:Ss.a,t=this.isJapanese()?"jp-":"";return`<div class='zorse-magnifying-glass'></div>\n      ${this.chatImageLinkTemplate()}\n      <div id='zorse-button-zorse-notification' class='zorse-notification hidden'>\n        <img id='zorse-button-zorse-notification-avatar' class='zorse-avatar-image'></img>\n        <div id='zorse-button-zorse-notification-count' class='zorse-notification-count'></div>\n      </div>\n      <div id='zorse-button-chat-notification' class='zorse-notification hidden'>\n        <div id='zorse-button-chat-notification-count' class='zorse-notification-count'>1</div>\n      </div>\n      ${this.helpCloseButtonTemplate()}\n      <span class='zorse-help-text-minimized'><img id="help-question-mark-icon" src="${e}" class="zorse-help-${t}question-mark-icon"></span>\n      <span class='zorse-help-text'>${this.getHelpText()}</span>`}maybeIscPopupTemplate(){if(this.userIsEligibleForIscChat&&!localStorage.getItem(yo)){this.autodismissIscBubbleTemplateTimeout=setTimeout(this.closeIscPopup,vo);return`<div id="isc-text-bubble-popup-container">\n          <div id="bubble-box">\n            <div id="bubble-close-button"><svg xmlns="http://www.w3.org/2000/svg" width="10" viewBox="0 0 1000 1000" fill="black"><path d="M29.8 970.2a67.7 67.7 0 0 0 95.7 0L500 595.7l374.5 374.5a67.7 67.7 0 0 0 95.7-95.7L595.7 500l374.5-374.5a67.7 67.7 0 0 0-95.7-95.7L500 404.3 125.5 29.8a67.7 67.7 0 0 0-95.7 95.7L404.3 500 29.8 874.5a67.7 67.7 0 0 0 0 95.7z"/></svg></div>\n          <div>\n              <div id="text-content">${this.translatedIscWelcomeTest()}</div>\n            </div>\n          </div>\n          <svg id="bubble-tail" width="30" height="30" viewbox="0 0 43 30" xmlns="http://www.w3.org/2000/svg">\n            <path d="M20 29.8a79.3 79.3 0 0 1-15.2-14A30.8 30.8 0 0 1 0 .9h43a88.5 88.5 0 0 0-17.7 15c-2.1 3-3.3 7.3-3.7 13.2a1 1 0 0 1-1.6.8z" fill="#fff" fill-rule="evenodd" />\n          </svg>\n        </div>`}return""}closeIscPopup(){localStorage.setItem(yo,"true");clearTimeout(this.autodismissIscBubbleTemplateTimeout);const e=document.getElementById("isc-text-bubble-popup-container");e&&Xs(e,"hidden")}isJapanese(){return"undefined"!=typeof I18n&&I18n&&I18n.langEnabled&&"ja"===I18n.lang}translatedChatText(){if("undefined"!=typeof I18n&&I18n&&I18n.langEnabled&&I18n.lang)switch(I18n.lang){case"de":return"Chatten";case"es":case"fr":return"Chat";case"ja":return"";case"pt":case"pt-br":return"Chat"}return"Chat"}translatedHelpText(){if("undefined"!=typeof I18n&&I18n&&I18n.langEnabled&&I18n.lang)switch(I18n.lang){case"de":return"Hilfe";case"es":return"Ayuda";case"fi":return"Ohje";case"fr":return"Aide";case"ja":return"";case"it":return"Aiuto";case"pl":return"Pomoc";case"pt":case"pt-br":return"Ajuda";case"sv":return"Hjlp"}return"Help"}translatedIscWelcomeTest(){if("undefined"!=typeof I18n&&I18n&&I18n.langEnabled&&I18n.lang)switch(I18n.lang){case"de":return"Hallo! Haben Sie noch Fragen zum Setup? Wir helfen gerne weiter!";case"es":return"Hola, tienes alguna pregunta sobre la configuracin? Estamos aqu para ayudar.";case"fr":return"Bonjour, avez-vous des questions concernant l'installation? Nous sommes l pour vous aider.";case"ja":return"";case"pt":case"pt-br":return"Ol, tem alguma pergunta sobre configurao? Ns estamos aqui para ajudar."}return"Hi there, have any set up questions? We're here to help."}applyUiClass(){const e="deals/board/view";return window.location.href.includes(e)?"widget-ui-2":""}shouldShowHelpCloseButton(){return this.getCurrentUrl().includes("/advanced-builder")}helpCloseButtonTemplate(){return this.shouldShowHelpCloseButton()?`<div id="zorse-help-close-button"><img src=${As.a} /></div>`:""}getCurrentUrl(){return window?window.location.href:""}}var Eo=To;const Co=Dn(h(Te,ht));"function"==typeof window.hubspot.define&&window.hubspot.define("hubapi-prebuilt",[],()=>({apiClient:Co,userInfo:Os}));function So(){const e=new Eo(Co,Os);window.hubspot.zorse.openHelpWidget=t=>{e.openWidget(t)};window.hubspot.zorse.closeHelpWidget=()=>{e.closeWidget()};window.hubspot.zorse.onOpenCloseWidget=t=>e.onOpenCloseWidget(t);window.hubspot.zorse.toggleUI=()=>{const e="/deals/board/view",t=window.location.href;t.includes(e)?window.location.href=t.replace(e,""):window.location.href=t+e};window.hubspot.zorse.minimizeZorseWidgetButton=()=>{window.postMessage({name:"minimize-button"},"*")};window.hubspot.zorse.restoreZorseWidgetButton=()=>{window.postMessage({name:"restore-button"},"*")}}"loading"!==document.readyState?So():document.addEventListener("DOMContentLoaded",()=>{So()})}]);