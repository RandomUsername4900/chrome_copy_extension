(window.webpackJsonp=window.webpackJsonp||[]).push([["bet"],{"5Cvg":function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("Ktcs"),i=s("1V8t"),c=s("0mcA"),l=s("Q6fd"),d=s("vtLt"),u=s("npjq"),b=s("VQUG"),p=s("Xuxj");class j extends o.Component{render(){const{deal:e,quoteCardData:t,logTrackingEvent:s}=this.props;return Object(a.jsx)("div",{children:Object(a.jsxs)(b.a,{align:"baseline",justify:"between",direction:"row",wrap:"wrap",children:[Object(a.jsx)("span",{children:u.a.text("quoteCard.title")}),!!t&&!t.readOnly&&!!t.quoteCardRecords&&t.quoteCardRecords.size>0&&Object(a.jsx)(p.a,{logTrackingEvent:s,dealId:e.dealId,showAsLink:!0})]})})}}j.propTypes={deal:n.a.instanceOf(l.a).isRequired,quoteCardData:n.a.instanceOf(c.a),logTrackingEvent:n.a.func.isRequired};var m=j;s.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return h}));class g extends o.Component{render(){const{deal:e,logTrackingEvent:t,quoteCardData:s}=this.props;return Object(a.jsx)(m,{deal:e,logTrackingEvent:t,quoteCardData:s})}}const O={quoteCardData:{stores:[d.a],deref:({deal:e})=>e?d.a.get(e.dealId):e}};g.propTypes={deal:n.a.instanceOf(l.a).isRequired,quoteCardData:n.a.instanceOf(c.a),logTrackingEvent:n.a.func};const h=1;t.default=Object(i.connect)(O)(g)},"7/Zo":function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("QYOI"),n=s("VfuR"),o=s.n(n),i=s("Ktcs"),c=s("1V8t"),l=s("MQNR"),d=s("P4dz"),u=s("Wf03"),b=s("m9st"),p=s("AuX0"),j=s("LTV0"),m=s("iJaT"),g=s("sl/w"),O=s("F1z2"),h=s("qS8i"),x=s("BiPx"),f=s("6A2w"),C=s("gR5Q"),y=s("Oc1M"),R=s.n(y),S=s("vwKB"),E=s("oxA8"),T=s("A97v"),v=s("x1f2"),I=s("VQUG"),N=s("dKJf");const q=R()(e=>Object(S.a)(e));class A extends i.Component{render(){const{contact:e,duration:t,fromMessage:s,fromEmail:r,fromName:n,timestamp:o,toMessage:i}=this.props,c={type:"hubSpotUserEmail",primaryIdentifier:r};return Object(a.jsxs)(I.a,{align:"center",children:[Object(a.jsx)(v.a,{basis:42,shrink:0,children:Object(a.jsx)(T.a,{lookup:c,size:"sm"})}),Object(a.jsxs)(v.a,{grow:1,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(E.a,{message:s,options:{fromName:n,email:r}}),e&&Object(a.jsx)(E.a,{message:i,options:{to:e}})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(N.a,{use:"help",children:[q(o),t&&Object(a.jsx)(g.a,{message:"activitiesHistory.quickView.duration",options:{duration:Object(S.c)(t)}})]})})]})]})}}A.propTypes={contact:o.a.string,duration:o.a.number,fromEmail:o.a.string.isRequired,fromMessage:o.a.string.isRequired,fromName:o.a.string.isRequired,timestamp:o.a.number.isRequired,toMessage:o.a.string.isRequired};var w=A;class D extends i.Component{rendeLoading(){return Object(a.jsx)(j.a,{grow:!0,minHeight:200})}renderHeader(){const{activity:{engagement:e,metadata:t},contact:s,fromEmail:r,fromName:n}=this.props;return Object(a.jsx)(w,{contact:s,duration:t.get("durationMilliseconds"),fromMessage:"activitiesHistory.quickView.call.from",fromEmail:r,fromName:n,timestamp:e.get("timestamp"),toMessage:"activitiesHistory.quickView.call.to"})}render(){const{activity:{engagement:e,metadata:t},onClose:s}=this.props,r=Object(C.g)(),n=e.get("activityType");return Object(a.jsxs)("div",{children:[Object(a.jsxs)(f.a,{children:[Object(a.jsx)("h4",{children:n||Object(a.jsx)(g.a,{message:"activitiesHistory.types.CALL"})}),Object(a.jsx)(x.a,{onClick:s})]}),Object(a.jsxs)(h.a,{className:"activity-quick-view-container",children:[this.renderHeader(),Object(a.jsx)(O.a,{distance:"small"}),Object(a.jsxs)("div",{className:"m-bottom-4",children:[Object(a.jsxs)("strong",{children:[Object(a.jsx)(g.a,{message:"activitiesHistory.quickView.call.outcome"}),":"]})," ",r.get(t.get("disposition"))]}),Object(a.jsxs)("div",{className:"m-bottom-4",children:[Object(a.jsxs)("strong",{children:[Object(a.jsx)(g.a,{message:"activitiesHistory.quickView.call.type"}),":"]})," ",n]}),Object(a.jsx)("div",{"data-selenium-test":"activity-history-call-body",className:"content-section",dangerouslySetInnerHTML:{__html:t.get("body")}})]})]})}}D.propTypes={activity:o.a.instanceOf(r.Record).isRequired,contact:o.a.string,fromEmail:o.a.string.isRequired,fromName:o.a.string.isRequired,onClose:o.a.func.isRequired};var P=D,M=s("EIJv");const L=e=>{if(!e||e.isEmpty())return null;const t=e.first();return`${t.get("firstName")} ${t.get("lastName")} (${t.get("email")})`};class _ extends i.Component{renderHeader(){const{activity:{engagement:e,metadata:t},fromEmail:s,fromName:r}=this.props;return Object(a.jsx)(w,{contact:L(t.get("to")),fromMessage:"activitiesHistory.quickView.email.from",fromEmail:s,fromName:r,timestamp:e.get("timestamp"),toMessage:"activitiesHistory.quickView.email.to"})}render(){const{activity:{metadata:e},onClose:t}=this.props,s=e.get("subject");return Object(a.jsxs)("div",{children:[Object(a.jsxs)(f.a,{children:[Object(a.jsx)("h4",{children:Object(a.jsx)(M.a,{tooltip:!1,children:s||Object(a.jsx)(g.a,{message:"activitiesHistory.types.EMAIL"})})}),Object(a.jsx)(x.a,{onClick:t})]}),Object(a.jsxs)(h.a,{className:"activity-quick-view-container",children:[this.renderHeader(),Object(a.jsx)(O.a,{distance:"small"}),Object(a.jsx)("h5",{children:s}),Object(a.jsx)("div",{"data-selenium-test":"activity-history-email-body",className:"content-section",dangerouslySetInnerHTML:{__html:e.get("html")}})]})]})}}_.propTypes={activity:o.a.instanceOf(r.Record).isRequired,fromEmail:o.a.string.isRequired,fromName:o.a.string.isRequired,onClose:o.a.func.isRequired};var k=_,V=s("R3K/"),U=s("77dM");const F=e=>{if(e&&!e.isEmpty())return Object(d.m)(e.first())};class H extends i.Component{renderHeader(){const{activity:{engagement:e,metadata:t},attendees:s,fromEmail:r,fromName:n}=this.props,o=F(s),i=t.get("endTime")-t.get("startTime");return Object(a.jsx)(w,{contact:o,duration:i,fromMessage:"activitiesHistory.quickView.meeting.from",fromEmail:r,fromName:n,timestamp:e.get("timestamp"),toMessage:"activitiesHistory.quickView.meeting.to"})}renderAttendee(e){if(!e)return null;const t=Object(d.g)(e,"email"),s=V.a.contact(Object(d.c)(e)),r=Object(d.m)(e);return Object(a.jsxs)(I.a,{align:"center",className:"m-top-1",children:[Object(a.jsx)(v.a,{basis:42,shrink:0,children:Object(a.jsx)(T.a,{email:t,size:"xs"})}),Object(a.jsx)(v.a,{grow:1,children:Object(a.jsx)(U.a,{href:s,children:r})})]},Object(d.c)(e))}renderAttendees(){const{attendees:e}=this.props;return e?Object(a.jsxs)("div",{className:"m-top-3",children:[Object(a.jsx)(N.a,{use:"help",children:Object(a.jsx)(g.a,{message:"activitiesHistory.quickView.meeting.attendees",options:{count:e.count()}})}),Object(a.jsx)("div",{children:e.map(this.renderAttendee)})]}):null}render(){const{activity:{metadata:e},onClose:t}=this.props,s=e.get("title");return Object(a.jsxs)("div",{children:[Object(a.jsxs)(f.a,{children:[Object(a.jsx)("h4",{children:Object(a.jsx)(M.a,{tooltip:!1,children:s||Object(a.jsx)(g.a,{message:"activitiesHistory.types.MEETING"})})}),Object(a.jsx)(x.a,{onClick:t})]}),Object(a.jsxs)(h.a,{className:"activity-quick-view-container",children:[this.renderHeader(),Object(a.jsx)(O.a,{distance:"small"}),Object(a.jsx)("div",{"data-selenium-test":"activity-history-meeting-body",className:"content-section",dangerouslySetInnerHTML:{__html:e.get("body")}}),this.renderAttendees()]})]})}}H.propTypes={activity:o.a.instanceOf(r.Record).isRequired,attendees:o.a.instanceOf(r.List),fromEmail:o.a.string.isRequired,fromName:o.a.string.isRequired};var Q=H,B=s("69TS"),z=s("uMkL"),G=s("HcfS"),K=s("5fTC"),W=s("KO24");class Y extends i.Component{render(){const{labelKey:e,propertyValue:t}=this.props;return Object(a.jsxs)("div",{children:[Object(a.jsx)(W.a,{className:"m-bottom-1",children:Object(a.jsx)(g.a,{message:e})}),Object(a.jsx)(M.a,{children:Object(a.jsx)("span",{children:t})})]})}}Y.propTypes={labelKey:o.a.string.isRequired,propertyValue:o.a.string.isRequired};var J=Y;class $ extends i.Component{getTypeText(e){switch(e){case"CALL":return"contactInteraction.interactionTask.taskCall";case"EMAIL":return"contactInteraction.interactionTask.taskEmail";default:return"contactInteraction.interactionTask.taskToDo"}}getQueueName(){const{activity:e,queues:t}=this.props,s=t.find(t=>t.get("engagementIds").contains(e.engagement.get("id")));return s?s.get("name"):Object(a.jsx)(g.a,{message:"activitiesHistory.quickView.task.noQueueText"})}render(){const{activity:e,owner:t}=this.props;return Object(a.jsxs)(G.a,{className:"p-top-4",children:[Object(a.jsx)(K.a,{size:2,children:Object(a.jsx)(J,{labelKey:"activitiesHistory.quickView.task.typeLabel",propertyValue:Object(a.jsx)(g.a,{message:this.getTypeText(e.metadata.get("taskType"))})})}),Object(a.jsx)(K.a,{size:3,children:Object(a.jsx)(J,{labelKey:"activitiesHistory.quickView.task.assignedToLabel",propertyValue:Object(a.jsx)(B.a,{givenName:t.get("firstName"),familyName:t.get("lastName")})})}),Object(a.jsx)(K.a,{size:4,className:"p-all-0",children:Object(a.jsx)(J,{labelKey:"activitiesHistory.quickView.task.emailReminderLabel",propertyValue:Object(a.jsx)(z.a,{value:e.engagement.get("timestamp"),format:"lll",type:"portalTz"})})}),Object(a.jsx)(K.a,{size:3,children:Object(a.jsx)(J,{labelKey:"activitiesHistory.quickView.task.queueLabel",propertyValue:this.getQueueName()})})]})}}$.propTypes={activity:o.a.instanceOf(r.Record).isRequired,owner:o.a.instanceOf(r.Record).isRequired,queues:o.a.instanceOf(r.Map).isRequired};var X=$,Z=s("13qF"),ee=s("+KD7");const te={NOT_STARTED:{color:ee.BATTLESHIP,background:ee.GYPSUM,border:ee.BATTLESHIP},COMPLETED:{color:ee.OLAF,background:ee.OZ,border:ee.OZ}};class se extends i.Component{render(){const{activity:e}=this.props;let t,s,r;const n=e.metadata.get("status");({color:r,background:t,border:s}="COMPLETED"===n?te.COMPLETED:te.NOT_STARTED);return Object(a.jsxs)(G.a,{children:[Object(a.jsx)(K.a,{size:8,children:Object(a.jsxs)(I.a,{align:"center",direction:"row",justify:"between",children:[Object(a.jsx)(Z.a,{name:"success",color:r,backgroundColor:t,borderColor:s,size:10}),Object(a.jsx)(M.a,{"data-selenium-test":"activity-history-task-subject",className:"p-all-1 m-all-1",children:Object(a.jsx)("strong",{children:e.metadata.get("subject")})})]})}),Object(a.jsx)(K.a,{size:4,className:"p-all-0",children:Object(a.jsx)(J,{labelKey:"activitiesHistory.quickView.task.dueDate",propertyValue:Object(a.jsx)(z.a,{value:e.engagement.get("timestamp"),format:"lll",type:"portalTz"})})})]})}}se.propTypes={activity:o.a.instanceOf(r.Record).isRequired};var ae=se;class re extends i.Component{rendeLoading(){return Object(a.jsx)(j.a,{grow:!0,minHeight:200})}renderTaskBody(){const{activity:e,owner:t,queues:s}=this.props;return Object(a.jsxs)("div",{children:[Object(a.jsx)(O.a,{distance:"small"}),Object(a.jsx)(ae,{activity:e}),Object(a.jsx)(O.a,{distance:"small"}),Object(a.jsx)("div",{"data-selenium-test":"activity-history-task-body",className:"content-section",dangerouslySetInnerHTML:{__html:e.metadata.get("body")}}),Object(a.jsx)(X,{activity:e,owner:t,queues:s})]})}renderActivityHeader(){const{activity:e,fromEmail:t,fromName:s,contact:r}=this.props,n=e.timestamp?e.timestamp:e.lastModifiedDateTime;return Object(a.jsx)(w,{contact:r,fromMessage:"activitiesHistory.quickView.task.from",fromEmail:t,fromName:s,timestamp:n})}render(){const{onClose:e}=this.props;return Object(a.jsxs)("div",{children:[Object(a.jsxs)(f.a,{children:[Object(a.jsx)("h4",{children:Object(a.jsx)(g.a,{message:"activitiesHistory.types.TASK"})}),Object(a.jsx)(x.a,{onClick:e})]}),Object(a.jsxs)(h.a,{className:"task-quick-view-container",children:[this.renderActivityHeader(),this.renderTaskBody()]})]})}}re.propTypes={activity:o.a.instanceOf(r.Record).isRequired,contact:o.a.string,fromEmail:o.a.string.isRequired,fromName:o.a.string.isRequired,owner:o.a.instanceOf(r.Record).isRequired,onClose:o.a.func.isRequired,queues:o.a.instanceOf(r.Map).isRequired};var ne=re;class oe extends i.Component{getActivityContent(){const{activity:e,fromEmail:t,fromName:s,onClose:r,owner:n,queues:o}=this.props;switch(e.data.engagement.get("type")){case"CONVERSATION_SESSION":return null;case"CALL":return Object(a.jsx)(P,{activity:e.data,contact:e.extra,fromEmail:t,fromName:s,onClose:r});case"INCOMING_EMAIL":case"EMAIL":return Object(a.jsx)(k,{activity:e.data,fromEmail:t,fromName:s,onClose:r});case"MEETING":return Object(a.jsx)(Q,{activity:e.data,attendees:e.extra,fromEmail:t,fromName:s,onClose:r});case"TASK":return Object(a.jsx)(ne,{activity:e.data,fromEmail:t,fromName:s,onClose:r,owner:n,queues:o});default:return null}}renderLoading(){return Object(a.jsx)(j.a,{grow:!0,minHeight:200})}render(){const{activity:e,owner:t}=this.props;return Object(a.jsxs)(m.a,{"data-selenium-test":"activity-quick-view-modal",width:750,children:[e&&t?this.getActivityContent():this.renderLoading(),Object(a.jsx)(p.a,{})]})}}oe.propTypes={activity:o.a.instanceOf(r.Record).isRequired,createdBy:o.a.instanceOf(r.Record),fromEmail:o.a.string.isRequired,fromName:o.a.string.isRequired,hubUsers:o.a.instanceOf(r.Map).isRequired,onClose:o.a.func.isRequired,owner:o.a.instanceOf(r.Record),queues:o.a.instanceOf(r.Map).isRequired};var ie=oe,ce=s("folk"),le=s("yZiQ");class de extends i.Component{render(){const{activityData:e,fromEmail:t,fromName:s,onClose:r,owner:n,queues:o}=this.props;return Object(a.jsx)(ie,{activity:e,fromEmail:t,fromName:s,onClose:r,owner:n,queues:o})}}const ue=(e,t,s)=>{switch(e.getIn(["engagement","type"])){case"CALL":{const a=e.metadata.get("calleeObjectType"),r=e.metadata.get("calleeObjectId");if(a&&r)if(a===l.CONTACT){const e=s.get(r);if(e)return`${Object(d.g)(e,"firstname")} ${Object(d.g)(e,"lastname")}`}else if(a===l.COMPANY){const e=t.get(r);if(e)return Object(d.g)(e,"name")}return null}case"MEETING":{const t=e.getIn(["associations","contactIds"]),a=s.get(t);return a?a.filter(e=>e):Object(r.List)()}default:return null}},be={activityData:{stores:[ce.a,u.a,b.a],deref({activityId:e}){const t=ce.a.get(e);if(t){const e=ue(t,u.a,b.a);return Object(r.Record)({data:t,extra:e})()}return null}},owner:{stores:[le.a],deref:({ownerId:e})=>le.a.get(e)}};de.propTypes={activityId:o.a.number.isRequired,activityData:o.a.any,fromEmail:o.a.string.isRequired,fromName:o.a.string.isRequired,onClose:o.a.func.isRequired,ownerId:o.a.number.isRequired,queues:o.a.instanceOf(r.Map).isRequired};t.default=Object(c.connect)(be)(de)},"7y5Z":function(e,t,s){"use strict";s.d(t,"b",(function(){return b}));s.d(t,"a",(function(){return p}));var a=s("g+dq"),r=s.n(a),n=s("RXKb");const o="deal-support-requests/v1/timeline-events",i=e=>`${o}/request-submission/${e}`,c=e=>`${o}/status-update/${e}`,l=({dealId:e,properties:t})=>r.a.post(i(e),{data:t}),d=({dealId:e,note:t,queryParams:s})=>r.a.post(c(e),{data:t,query:s}),u=()=>!0,b=()=>Object(n.a)(d,u),p=()=>Object(n.a)(l,u)},"9cWR":function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("Ktcs"),i=s("1V8t"),c=s("Q6fd"),l=s("P4dz"),d=s("sl/w"),u=s("QYOI"),b=s("69TS"),p=s("DqRu"),j=s("2I7S"),m=s("IS0t"),g=s("/4xn"),O=s("VQUG"),h=s("5zIw"),x=s("o3aL"),f=s("uMkL");const C="--",y="ll",R=1;class S extends o.Component{convertToZeroIndexedMonths(e){return e.update(R,e=>e-1)}render(){const{value:e,format:t,emptyValue:s}=this.props;let r=s||C;if(e&&3===e.size){r=this.convertToZeroIndexedMonths(e).toArray();return Object(a.jsx)(f.a,{value:r,format:t,type:"portalTz"})}return Object(a.jsx)("span",{children:r})}}S.defaultProps={format:y};S.propTypes={value:n.a.instanceOf(u.List),format:n.a.string,emptyValue:n.a.string};var E=S,T=s("77dM"),v=s("4d22");const I=({onRetry:e})=>Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"m-right-1",children:Object(a.jsx)(d.a,{message:"customerSuccessData.quoteCenterErrorState"})}),Object(a.jsx)(p.a,{onClick:e,use:"link",children:Object(a.jsx)(d.a,{message:"customerSuccessData.retry"})})]});I.defaultProps={onRetry:n.a.func.isRequired};var N=s("OmcN"),q=s("/as5");const A=({dealId:e,hasHubletError:t,hubId:s,hublet:r,isHubletLoading:n})=>{const i=Object(q.u)({appHubId:s,dealId:e,hublet:r}),c=Object(o.useCallback)(()=>{Object(N.a)(s)},[s]);return Object(a.jsx)(v.a,{errorState:Object(a.jsx)(I,{onRetry:c}),hasError:t,isLoading:n,numTries:0,numTriesAllowed:3,onRetry:c,children:Object(a.jsx)(T.a,{external:!0,href:i,children:i})})};A.propTypes={dealId:n.a.number.isRequired,hasHubletError:n.a.bool.isRequired,hubId:n.a.number.isRequired,hublet:n.a.string.isRequired,isHubletLoading:n.a.bool.isRequired};const w="ctu_type",D="renewal_type",P="No Auto-Renewal";class M extends o.Component{getHealthCheckColor(e){switch(e){case"GREEN":return"oz";case"ORANGE":return"scheduled";case"RED":return"norman";case"YELLOW":return"marigold";default:return"calypso"}}renderOwnersContent(e){if(!e||0===e.length)return null;const t=Object(a.jsx)("span",{children:this.renderOwners(e)});return this.renderFloatingControl("customerSuccessData.successOwner",t)}renderOwners(e){return e.map(e=>this.renderHubSpotOwner(e))}renderHubDetailslLink(e){return Object(a.jsx)("div",{className:"m-top-5 text-center",children:Object(a.jsx)(O.a,{align:"center",justify:"start",direction:"row",wrap:"wrap",children:Object(a.jsx)(p.a,{className:"center-block",use:"tertiary-light",size:"small",href:Object(q.p)(e),target:"_blank",children:Object(a.jsx)(d.a,{message:"customerSuccessData.viewHubDetails"})})})})}renderHubSpotOwner(e){const t=e.ownerBrief,{hubspotter:s,ownerRole:r,team:n}=t,o=s?s.id:n.id;return Object(a.jsxs)("div",{children:[this.renderHubSpotOwnerName(e)," |"," ",Object(a.jsx)(d.a,{message:"hubSpotContact.hubspotters.type."+r})]},`${o}-${r}`)}renderHubSpotOwnerName(e){const t=e.ownerBrief,{hubspotter:s,team:r}=t;let n="";if(s){const e=s.firstName,t=s.lastName;n=Object(a.jsx)(b.a,{givenName:e,familyName:t})}else r&&(n=r.name);return Object(a.jsx)("strong",{children:n})}renderFloatingControl(e,t){return Object(a.jsx)(g.a,{isStatic:!0,label:Object(a.jsx)(d.a,{message:e}),hideEditIcon:!0,className:"floating-field-with-border",children:t})}renderHealthCheck(e){if(!e)return null;const t=Object(a.jsx)(x.a,{use:this.getHealthCheckColor(e.score),children:Object(a.jsx)(d.a,{message:"healthCheckTypes."+e.type})});return this.renderFloatingControl("customerSuccessData.healthCheck",t)}renderRenewalCommunicationOwner(e){const t=Object(a.jsx)(d.a,{message:"renewalCommunicationOwners."+e});return e&&this.renderFloatingControl("customerSuccessData.renewalCommunicationOwner",t)}renderQuoteCenterLink({dealId:e,hasHubletError:t,hubId:s,hublet:r,isHubletLoading:n,renewalType:o}){const i=o!==P&&o,c=i?Object(q.u)({appHubId:s,dealId:e,hublet:r}):null,l=i&&!t?Object(a.jsx)(j.a,{value:c}):null,u=i?Object(a.jsx)(A,{dealId:e,hasHubletError:t,hubId:s,hublet:r,isHubletLoading:n}):Object(a.jsx)(d.a,{message:"customerSuccessData.quoteCenterNotSupported"});return Object(a.jsx)(g.a,{isStatic:!0,label:Object(a.jsx)(d.a,{message:"customerSuccessData.quoteCenter"}),hideEditIcon:!0,className:"floating-field-with-border",labelProps:{sibling:Object(a.jsx)(h.a,{title:Object(a.jsx)(d.a,{message:"customerSuccessData.quoteCenterHelp"}),tooltipProps:{placement:"right"},className:"p-left-1"})},overlayContent:l,children:u})}render(){const{dealId:e,healthCheck:t,hasHubletError:s,hubId:r,hublet:n,isHubletLoading:o,owners:i,renewalCommunicationOwner:c,renewalDate:l,renewalType:d}=this.props,u=Object(a.jsx)(E,{value:l,format:"l"});return Object(a.jsxs)("div",{children:[Object(a.jsxs)(m.a,{children:[this.renderFloatingControl("customerSuccessData.renewalDate",u),this.renderHealthCheck(t),this.renderOwnersContent(i),this.renderRenewalCommunicationOwner(c),this.renderQuoteCenterLink({dealId:e,hasHubletError:s,hubId:r,hublet:n,isHubletLoading:o,renewalType:d})]}),this.renderHubDetailslLink(r)]})}}M.propTypes={dealId:n.a.number.isRequired,healthCheck:n.a.shape({score:n.a.string.isRequired,type:n.a.string.isRequired}),hasHubletError:n.a.bool.isRequired,hubId:n.a.number.isRequired,hublet:n.a.string.isRequired,isHubletLoading:n.a.bool.isRequired,owners:n.a.array,renewalCommunicationOwner:n.a.string.isRequired,renewalDate:n.a.instanceOf(u.List),renewalType:n.a.string.isRequired};var L=M;const _=Object(u.Record)({error:null,healthCheck:null,hubId:null,owners:Object(u.Map)(),renewalCommunicationOwner:null,renewalDate:[]},"CustomerSuccessDataResponse");_.fromJS=e=>{const t={error:e.error,healthCheck:e.healthCheck,hubId:e.hubId,owners:e.owners,renewalCommunicationOwner:e.renewalCommunicationOwner,renewalDate:Object(u.List)(e.renewalDate)};return new _(t)};var k=_,V=s("vH3O"),U=s("0dUV"),F=s("xHov"),H=s("Eha6"),Q=s("FiiD");const B="bizops-crm-cards/v1/customer-success",z=e=>Object(F.c)(`${B}?dealId=${e}`,{},e=>k.fromJS(e)).catch(e=>{if(e&&404===e.status)return{error:e.message};Object(Q.a)("customer-success",e);throw e}),G=Object(H.a)(z);Object(U.b)({namespace:V.a.CUSTOMER_SUCCESS_DATA,fetch:G});var K=Object(U.a)({namespace:V.a.CUSTOMER_SUCCESS_DATA,idIsValid:e=>"number"==typeof e}).register(),W=s("jwYb"),Y=s("ZXaq");s.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return X}));class J extends o.Component{componentDidUpdate(){const{customerSuccessData:e,hasHubletError:t,hublet:s,isHubletLoading:a}=this.props,{hubId:r}=e||{};!r||s||t||a||Object(N.a)(r)}render(){const{customerSuccessData:e,deal:t,hasHubletError:s,hublet:r,isHubletLoading:n}=this.props;if(!e||!t)return null;let o;if(e.error)o=Object(a.jsx)(d.a,{message:"customerSuccessData.errorMessage"});else{const{healthCheck:i,hubId:c,owners:d,renewalCommunicationOwner:u,renewalDate:b}=e;o=Object(a.jsx)(L,{ctuType:Object(l.g)(t,w),dealId:t.dealId,healthCheck:i,hasHubletError:s,hubId:c,hublet:r,isHubletLoading:n,owners:d,renewalCommunicationOwner:u,renewalDate:b,renewalType:Object(l.g)(t,D)})}return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:o}),Object(a.jsx)(Y.a,{})]})}}const $={customerSuccessData:{stores:[K],deref:({deal:e})=>e?K.get(e.dealId):e},hasHubletError:{stores:[W.a],deref:()=>W.a.get().get("error",!1)},hublet:{stores:[W.a],deref:()=>W.a.get().get("data")},isHubletLoading:{stores:[W.a],deref:()=>W.a.get().get("loading",!0)}};J.propTypes={customerSuccessData:n.a.instanceOf(k),deal:n.a.instanceOf(c.a).isRequired,hasHubletError:n.a.bool.isRequired,hublet:n.a.string.isRequired,isHubletLoading:n.a.bool.isRequired};const X=1;t.default=Object(i.connect)($)(J)},"A1N/":function(e,t,s){"use strict";s.r(t);var a=s("2joo"),r=s("MQNR"),n=s("P4dz"),o=s("QYOI"),i=s("npjq"),c=s("RRvD"),l=s("TvEW"),d=s("Ly8s"),u=s("3y0f"),b=s("pMkv"),p=s("FR0R"),j=s("pa/6");const m=(e,t)=>{Object(d.a)(c.OBJECT_DISASSOCIATION_SUCCEEDED,{objectId:e,associationsRemoved:t,fromObjectType:r.CONTACT,toObjectType:r.COMPANY});Object(d.a)(u.l,{subjectId:t,objectId:e})},g=(e,t)=>{Object(d.a)(c.OBJECT_ASSOCIATION_SUCCEEDED,{objectId:e,associationsAdded:Object(o.List)([t]),fromObjectType:r.CONTACT,toObjectType:r.COMPANY});Object(d.a)(u.d,{subjectId:t,objectId:e})};function O(e,t,s){const a="companiesCard.changeAssociatedCompany.failureReasons";Object(b.a)(e,t,s).then(r=>{if(r.isSuccessful){m(e,t);g(e,s);Object(l.e)([e])}else r.failureReasons.forEach(e=>{switch(e){case"CONTACT_HAS_A_DEAL":case"CONTACT_CANNOT_BE_IN_INITIAL_LIFECYCLE_STAGE":case"NO_VALID_DOMAIN_FOUND":Object(p.a)("danger",i.a.text(`${a}.${e}`));break;default:Object(p.a)("danger",i.a.text(a+".generic"))}})},()=>Object(p.a)("danger",i.a.text(a+".generic"))).catch(Object(j.a)("Error after changing associated company"))}s.d(t,"handleChangeAssociatedCompany",(function(){return h}));const h=(e,t,s,o)=>{const i=Object(n.c)(e),c=Object(n.c)(t),l={alreadyAssociated:t=>Object(n.c)(t)===Object(n.c)(e)};o(r.CONTACT,{action:"Change Associated Company - Action Clicked"});return s({subjectId:Object(n.m)(c),forceRefresh:!1,objectType:r.CONTACT,createOption:!1,disabled:l,stringKey:"companiesCard.profileAssociateModal.changeAssociatedCompany",showConfirmButton:!1,showCancelButton:!1}).then(e=>{o(r.CONTACT,{action:"Change Associated Company - New Company Selected"});O(c,i,e)}).catch(a.a)}},BlXJ:function(e,t,s){"use strict";var a=s("Ly8s"),r=s("j4S9"),n=s("g+dq"),o=s.n(n);const i=e=>"deal-support-requests/v1/support-requests/deal/"+e,c=e=>o.a.get(i(e));var l=s("mEYk"),d=s.n(l);const u=e=>t=>d.a.captureException(t,{extra:{message:e}});s.d(t,"a",(function(){return b}));const b=e=>{Object(a.b)(r.b);return c(e).then(e=>Object(a.b)(r.c,e),e=>Object(a.b)(r.a,e)).catch(u("Error after deal support requests for deal"))}},"LBe/":function(e,t,s){"use strict";var a=s("1V8t"),r=s("QYOI"),n=s("O9ft");const o=Object(r.Map)({data:null,errorFetching:!1,isLoading:!1});t.a=Object(a.defineFactory)().defineName("AssociatedCompaniesStore").defineGetInitialState(()=>o).defineGet(e=>e).defineResponseTo(n.a.ASSOCIATED_COMPANIES_REQUESTED,e=>e.merge(Object(r.Map)({errorFetching:!1,isLoading:!0}))).defineResponseTo(n.a.ASSOCIATED_COMPANIES_RECEIVED,(e,{associatedCompanies:t})=>Object(r.fromJS)({data:t,errorFetching:!1,isLoading:!1})).defineResponseTo(n.a.ASSOCIATED_COMPANIES_FAILED,e=>e.merge(Object(r.Map)({errorFetching:!0,isLoading:!1}))).register()},MPXz:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));s.d(t,"b",(function(){return j}));var a=s("g+dq"),r=s.n(a),n=s("pq4V"),o=s("P4dz"),i=s("1V8t"),c=s("RXKb"),l=s("NldG");const d=e=>"deal-support-requests/v1/request-form-properties/deal/"+e,u=e=>r.a.get(d(e)),b=e=>e,p=()=>Object(c.a)(u,b,void 0,[]),j=e=>{const t=Object(i.useStoreDependency)(n.a,{objectId:e}).get(e);return!!Object(o.g)(t,l.a)}},MslG:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s.d(t,"b",(function(){return i}));var a=s("QgEn"),r=s("Ktcs");const n={createValidationHandler:()=>{},isSaveable:!0},o=Object(r.createContext)(n),i=({children:e})=>{const[t,s]=Object(r.useState)({}),n=Object(r.useMemo)(()=>Object.entries(t).every(([,e])=>!!e),[t]),i=Object(r.useCallback)(e=>({saveable:t})=>{s(s=>Object.assign({},s,{[e]:t}))},[]);return Object(a.jsx)(o.Provider,{value:{createValidationHandler:i,isSaveable:n},children:e})}},NldG:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s.d(t,"c",(function(){return r}));s.d(t,"d",(function(){return n}));s.d(t,"e",(function(){return o}));s.d(t,"f",(function(){return i}));s.d(t,"g",(function(){return c}));s.d(t,"b",(function(){return l}));s.d(t,"h",(function(){return d}));const a="deal_support_request_date_53",r="most_likely_product_s_",n=2e3,o="ise_use_case_53",i="https://wiki.hubspotcentral.net/display/SENG/PreSales+Move+to+53",c={ACTIVE:"Active",REJECTED:"Rejected"},l={ISE_FLOW:"FSP:ISEtoPresales53",SELF_ASSIGN:"FSP:PresalesSelfAssign"},d=["Service Hub Enterprise","Service Hub Professional","Operations Hub Enterprise","Operations Hub Professional"]},RXKb:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s("Ktcs");const r=(e,t,s,r)=>{const[n,o]=Object(a.useState)(r),[i,c]=Object(a.useState)(!1),[l,d]=Object(a.useState)(!1),[u,b]=Object(a.useState)(0);return{data:n,doAsync:Object(a.useCallback)((...a)=>{c(!0);b(e=>e+1);e(...a).then(e=>{o(t(e));d(!1);b(0)},e=>{const t=s&&s(e);if(void 0!==t){o(t);d(!1);b(0)}else d(!0)}).finally(()=>c(!1)).catch(e=>{setTimeout(()=>{throw e})})},[e,s,t]),hasError:l,isLoading:i,numTries:u,setData:o}}},W7Ls:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s("1V8t"),r=s("Ktcs"),n=s("pq4V"),o=s("P4dz");const i=e=>{const t=Object(a.useStoreDependency)(n.a,{objectId:e});return Object(r.useCallback)(e=>Object(o.g)(t,e),[t])}},YwUu:function(e,t){e.exports={click:{name:"click",class:"interaction",properties:{action:"string",screen:"string"},namespace:"card-bet-deal-support-requests-lib",version:"1"},pageview:{name:"pageview",class:"view",properties:{action:"string",screen:"string"},namespace:"card-bet-deal-support-requests-lib",version:"1"},submission:{name:"submission",class:"usage",properties:{action:"string",screen:"string"},namespace:"card-bet-deal-support-requests-lib",version:"1"}}},ZfWq:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("1V8t"),n=s("Ktcs"),o=s("sl/w"),i=s("KO24"),c=s("LTV0"),l=s("gATi"),d=s("/XCP"),u=s("i4yt"),b=s("NfVS"),p=s("77dM"),j=s("NldG");const m=()=>Object(a.jsx)("div",{"data-test-id":"deal-support-request-card-empty-state",children:Object(a.jsx)(b.a,{elements:{Link:p.a},message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.emptyState.message_jsx",options:{linkProps:{external:!0,href:j.f}}})});var g=s("DqRu");const O=({onRetry:e})=>Object(a.jsxs)("div",{"data-test-id":"deal-support-request-card-error-state",children:[Object(a.jsx)("span",{"data-test-id":"error-text",className:"m-right-1",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.errorState.title"})}),Object(a.jsx)(g.a,{"data-test-id":"retry-button",onClick:e,use:"link",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.errorState.retry"})})]}),h=()=>Object(a.jsx)("div",{"data-test-id":"deal-support-request-card-pending-state",children:Object(a.jsx)(b.a,{elements:{Link:p.a},message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.pendingState.message_jsx",options:{linkProps:{external:!0,href:j.f}}})});var x=s("9f1P"),f=s.n(x),C=s("DZQA"),y=s("+KD7"),R=s("EIJv"),S=s("uD3i"),E=s("W7Ls");const T=f.a.span.withConfig({displayName:"DealSupportRequestCardTeamTileProperties__StyledSpan",componentId:"loskca-0"})(["color:",";"],y.SLINKY),v=({dealId:e,isTeamAssigned:t,team:s})=>{const r=Object(E.a)(e),i=Object(S.a)(j.b.SELF_ASSIGN),c=s.properties.filter(e=>e.internalName!==s.propertyNames.rejectionReasonPropertyName);return i&&!t?null:Object(a.jsx)(n.Fragment,{children:c.map(({internalName:t,propertyDefinition:s,value:n})=>Object(a.jsx)("div",{children:Object(a.jsxs)(R.a,{open:!1,children:[Object(a.jsx)(T,{className:"p-right-2",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.propertyLabel",options:{label:s.property.label}})}),Object(a.jsx)(C.a,{getAdditionalPropertyValue:r,objectTypeId:s.objectTypeId,objectId:e.toString(),property:s.property,value:n})]})},t))})};var I=s("OW66"),N=s("Ukhg"),q=s("TKVX"),A=s("hmaQ");const w=({canManageSupport:e,onClick:t})=>e?Object(a.jsx)(g.a,{"data-test-id":"manage-support-button",onClick:t,use:"link",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.dropdownButtonText.manageSupport"})}):Object(a.jsx)(g.a,{"data-test-id":"view-support-button",onClick:t,use:"link",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.dropdownButtonText.viewDetails"})});var D=s("WRZ8"),P=s("CE3l"),M=s("dKJf"),L=s("BiPx"),_=s("pbrb"),k=s("pw7o"),V=s("WwwS"),U=s("fW34"),F=s("AKxL"),H=s("oWZn"),Q=s("vuW9"),B=s("uzdC"),z=s("0vUY");const G=({acceptanceNotes:e,canEdit:t=!0,onAcceptanceNotesChange:s})=>Object(a.jsx)(B.a,{"data-test-id":"acceptance-notes-input",label:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.acceptanceNotes"}),tooltip:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.acceptanceNotesTooltip"}),children:Object(a.jsx)(z.a,{disabled:!t,onChange:s,value:e})});var K=s("lUI8"),W=s("zUU5");const Y=({canEdit:e=!0,hasStatusChanged:t,objectId:s,onPropertyChange:r,onRejectionNotesChange:n,propertyValues:i,rejectionNotes:c,team:l})=>{const{rejectionReasonPropertyName:d}=l.propertyNames,u=l.properties.find(e=>e.internalName===d);return Object(a.jsxs)(a.Fragment,{children:[u&&Object(a.jsx)(K.a,{canEdit:e,formProperty:u,objectId:s,onChange:r,required:!0,value:i[d]}),t&&Object(a.jsx)(B.a,{"data-test-id":"rejection-notes-input",label:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.rejectionNotes"}),required:!0,tooltip:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.rejectionNotesTooltip"}),children:Object(a.jsx)(W.a,{disabled:!e,onChange:n,shrink:!0,value:c})})]})},J=({acceptanceNotes:e,canEdit:t=!0,hasStatusChanged:s,objectId:r,onPropertyChange:o,onAcceptanceNotesChange:i,onRejectionNotesChange:c,propertyValues:l,rejectionNotes:d,team:u})=>Object(a.jsx)("div",{"data-test-id":"manage-support-panel-form",children:u.properties.filter(e=>e.internalName!==u.propertyNames.rejectionReasonPropertyName).map(b=>{const{internalName:p}=b,m=l[p],g=p===u.propertyNames.statusPropertyName,O=g&&m===j.g.REJECTED,h=g&&s&&m===j.g.ACTIVE;return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)(K.a,{canEdit:t,formProperty:b,objectId:r,onChange:o,value:m}),O&&Object(a.jsx)(Y,{hasStatusChanged:s,objectId:r,onPropertyChange:o,onRejectionNotesChange:c,propertyValues:l,rejectionNotes:d,team:u}),h&&Object(a.jsx)(G,{acceptanceNotes:e,canEdit:t,onAcceptanceNotesChange:i})]},p)})});var $=s("BlXJ"),X=s("wMlt"),Z=s("oHHH"),ee=s("7y5Z"),te=s("y5q4"),se=s("aArx"),ae=s("MslG");const re=e=>{const t={};e.forEach(e=>t[e.internalName]=e.value);return t},ne=({canEdit:e=!0,objectId:t,onClose:s,team:r})=>{const i=Object(te.a)(t),[c,l]=Object(n.useState)(re(r.properties)),[d,u]=Object(n.useState)(""),[b,p]=Object(n.useState)(""),{isSaveable:m}=Object(n.useContext)(ae.a),g=d||b,{rejectionReasonPropertyName:O,statusPropertyName:h}=r.propertyNames,x=(r.properties.find(e=>e.internalName===h)||{}).value,f=c[h],C=x!==f,y=C&&f===j.g.REJECTED,R=c[O],S=f===j.g.REJECTED&&!R,E=y&&(!b||S)||!m,{data:T,doAsync:v,hasError:I,isLoading:N}=Object(Z.a)(),{data:q,doAsync:A}=Object(ee.b)(),w=Object(n.useCallback)(()=>{const e=r.properties.filter(e=>e.propertyDefinition.property.readOnlyValue).map(e=>e.internalName);v(t,Object(X.a)({propertyValues:c,readOnlyPropertyNames:e}))},[v,t,c,r.properties]),B=Object(n.useCallback)(e=>l(Object.assign({},c,{},e)),[c]),z=Object(n.useCallback)(({target:{value:e}})=>p(e),[]),G=Object(n.useCallback)(({target:{value:e}})=>u(e),[]);Object(n.useEffect)(()=>{Object(se.c)("manage support panel view")},[]);Object(n.useEffect)(()=>{T&&C&&!q&&A({dealId:t,note:g,queryParams:{rejectionCategory:c[O],statusPropertyInternalName:h,statusPropertyNewValue:f,statusPropertyPreviousValue:x}})},[f,T,C,g,t,x,A,q,c,O,h]);Object(n.useEffect)(()=>{if(T&&(!C||q)){Object(se.d)("manage support form submit");D.a.addAlert({id:"manage-support-success",message:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.successAlertMessage"}),sticky:!1,titleText:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.successAlertTitle"}),type:"success"});Object($.a)(t);q&&i();s()}},[T,C,t,s,q,i]);return Object(a.jsxs)(k.a,{"data-test-id":"manage-support-panel",width:500,children:[Object(a.jsx)(L.a,{onClick:s}),Object(a.jsx)(F.a,{children:Object(a.jsx)(P.a,{children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.title",options:{teamName:r.teamName}})})}),Object(a.jsx)(V.a,{children:Object(a.jsx)(H.a,{children:Object(a.jsx)(J,{acceptanceNotes:d,canEdit:e,hasStatusChanged:C,objectId:t,onAcceptanceNotesChange:G,onPropertyChange:B,onRejectionNotesChange:z,propertyValues:c,rejectionNotes:b,team:r})})}),e&&Object(a.jsxs)(U.a,{children:[Object(a.jsx)(Q.a,{disabled:!E,title:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.missingFieldsWarning"}),children:Object(a.jsx)(_.a,{disabled:E,failed:I,loading:N,onClick:w,size:"small",use:"primary",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.manageSupportPanel.saveDetails"})})}),!N&&I&&Object(a.jsx)(M.a,{className:"m-left-2",use:"error",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.submissionError"})})]})]})};var oe=s("V4AE"),ie=s("g+dq"),ce=s.n(ie),le=s("RXKb");const de=(e,t)=>`deal-support-requests/v1/support-requests/request-team/${t}/deal/${e}`,ue=({involvementNote:e,objectId:t,supportNote:s,teamName:a})=>ce.a.post(de(t,a),{data:{involvementNote:e,supportNote:s}}),be=()=>!0,pe=()=>Object(le.a)(ue,be),je=({objectId:e,onClose:t,teamName:s})=>{const[r,i]=Object(n.useState)(""),[c,l]=Object(n.useState)(""),{data:d,doAsync:u,hasError:b,isLoading:p}=pe(),j=Object(te.a)(e),m=Object(n.useCallback)(()=>{u({involvementNote:c,objectId:e,supportNote:r,teamName:s})},[c,e,u,r,s]),g=Object(n.useCallback)(({target:{value:e}})=>i(e),[]),O=Object(n.useCallback)(({target:{value:e}})=>l(e),[]);Object(n.useEffect)(()=>{Object(se.c)("request team panel view")},[]);Object(n.useEffect)(()=>{if(d){Object(se.d)(s+" team request submit");D.a.addAlert({id:"presales-reassign-manager-submit-success",message:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.successToast.message",options:{teamName:s}}),sticky:!1,titleText:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.successToast.title"}),type:"success"});Object($.a)(e);j();t()}},[e,t,j,d,s]);const h=!r||!c;return Object(a.jsxs)(k.a,{"data-test-id":`request-${s}-team-panel`,width:500,children:[Object(a.jsx)(L.a,{onClick:t}),Object(a.jsx)(F.a,{children:Object(a.jsx)(P.a,{children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.title",options:{teamName:s}})})}),Object(a.jsx)(V.a,{children:Object(a.jsxs)(H.a,{children:[Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.message",options:{teamName:s}}),Object(a.jsx)(B.a,{"data-test-id":"support-field",label:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.whyIsSupportNeeded",options:{teamName:s}}),required:!0,children:Object(a.jsx)(oe.a,{onChange:g,value:r})}),Object(a.jsx)(B.a,{"data-test-id":"involvement-field",label:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.involvementInDeal",options:{teamName:s}}),required:!0,children:Object(a.jsx)(oe.a,{onChange:O,value:c})})]})}),Object(a.jsxs)(U.a,{children:[Object(a.jsx)(Q.a,{disabled:!h,title:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.missingFieldsWarning"}),children:Object(a.jsx)(_.a,{disabled:h,failed:b,loading:p,onClick:m,size:"small",use:"primary",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.confirm"})})}),!p&&b&&Object(a.jsx)(M.a,{className:"m-left-2",use:"error",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.submissionError"})})]})]})},me=({isTeamAssigned:e,onClick:t,otherTeamNames:s,team:r})=>Object(S.a)(j.b.SELF_ASSIGN)?Object(a.jsx)(Q.a,{disabled:!e,placement:"right",title:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestSupportDisabledTooltip"}),children:Object(a.jsx)(g.a,{"data-test-id":`request-${r.teamName}-team-button`,disabled:e,onClick:t(r.teamName),children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestSupport"})},r.teamName)}):Object(a.jsx)(a.Fragment,{children:s.filter(e=>e!==r.teamName).map(e=>Object(a.jsx)(g.a,{"data-test-id":`request-${e}-team-button`,onClick:t(e),children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.requestTeamPanel.dropdownButtonText",options:{teamName:e}})},e))}),ge={MANAGE_SUPPORT:"MANAGE_SUPPORT",REQUEST_TEAM:"REQUEST_TEAM"},Oe=({children:e,isTeamAssigned:t,objectId:s,otherTeamNames:r,team:i})=>{const c=Object(S.a)(j.b.SELF_ASSIGN),[l,d]=Object(n.useState)(),[u,b]=Object(n.useState)(),{scopes:{isPreSalesManager:p,isPreSalesRep:m}}=i,g=m||p,O=!c||p||i.isUserPartOfThisPreSalesTeam,h=Object(n.useCallback)(e=>()=>{d(ge.REQUEST_TEAM);b(e);Object(se.a)(`${ge.REQUEST_TEAM} (${e}) actions dropdown option click`)},[d]),x=Object(n.useCallback)(()=>{d(ge.MANAGE_SUPPORT);Object(se.a)((O?ge.MANAGE_SUPPORT:"VIEW_SUPPORT")+" actions dropdown option click")},[O,d]),f=Object(n.useCallback)(()=>Object(se.a)("open actions dropdown click (pre-sales)"),[]),C=Object(n.useCallback)(()=>{d(void 0);b(void 0)},[d,b]);return g?Object(a.jsx)(q.a,{buttonGroup:Object(a.jsx)(I.a,{children:Object(a.jsx)(N.a,{buttonText:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamActionsDropdown.buttonText"}),buttonUse:"link","data-test-id":i.teamName+"-actions-dropdown-button",onOpenStart:f,children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(w,{canManageSupport:O,onClick:x}),Object(a.jsx)(me,{isTeamAssigned:t,onClick:h,otherTeamNames:r,team:i})]})})}),children:Object(a.jsxs)("div",{children:[e,l===ge.MANAGE_SUPPORT&&Object(a.jsx)(ae.b,{children:Object(a.jsx)(ne,{canEdit:O,objectId:s,onClose:C,team:i})}),l===ge.REQUEST_TEAM&&u&&Object(a.jsx)(je,{objectId:s,onClose:C,teamName:u})]})}):e},he="deal-support-requests/v1/teams/all",xe=()=>ce.a.get(he),fe=e=>e,Ce=()=>{},ye=[],Re=()=>Object(le.a)(xe,fe,Ce,ye);var Se=s("MPXz");s.d(t,"DealSupportRequestCardContent",(function(){return Ie}));const Ee=({allSupportTeams:e,teams:t})=>{const s=t.map(e=>e.teamName);return e.filter(e=>!s.includes(e.teamName)).map(e=>e.teamName)},Te=e=>e.reduce((e,t)=>{if(t.isUserPartOfThisPreSalesTeam)return[t,...e];e.push(t);return e},[]),ve=e=>{const t=e.properties.find(t=>t.internalName===e.propertyNames.statusPropertyName);return!(!t||!t.value)},Ie=({hasError:e,isLoading:t,objectId:s,teams:r})=>{const u=0===r.length,b=Object(Se.b)(s),p=Object(S.a)(j.b.SELF_ASSIGN),{data:g,doAsync:x}=Re(),f=Ee({allSupportTeams:g,teams:r}),C=p?Te(r):r;Object(n.useEffect)(()=>{Object($.a)(s)},[s]);Object(n.useEffect)(()=>{x()},[x]);const y=Object(n.useCallback)(()=>{Object($.a)(s)},[s]);return e?Object(a.jsx)(O,{onRetry:y}):t?Object(a.jsx)(c.a,{"data-test-id":"deal-support-request-card-loading-state",grow:!0}):u?b?Object(a.jsx)(h,{}):Object(a.jsx)(m,{}):Object(a.jsx)("div",{className:"m-top-2","data-test-id":"deal-support-request-card-content",children:C.map(e=>Object(a.jsx)(Oe,{isTeamAssigned:ve(e),objectId:s,otherTeamNames:f,team:e,children:Object(a.jsx)(l.a,{className:"m-bottom-2",compact:!0,"data-test-id":e.teamName,children:Object(a.jsxs)(d.a,{className:"p-all-3",children:[Object(a.jsx)(i.a,{"aria-level":3,"data-test-id":"team-tile-"+e.teamName,className:"m-bottom-2",children:Object(a.jsx)(o.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.teamTileTitle",options:{teamName:e.teamName}})}),Object(a.jsx)(v,{dealId:s,isTeamAssigned:ve(e),team:e})]})})},e.teamName))})},Ne={hasError:{stores:[u.a],deref:()=>u.a.get().hasError},isLoading:{stores:[u.a],deref:()=>u.a.get().isLoading},teams:{stores:[u.a],deref:()=>u.a.get().data}};t.default=Object(r.connect)(Ne)(Ie)},aArx:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));s.d(t,"b",(function(){return d}));s.d(t,"c",(function(){return u}));s.d(t,"d",(function(){return b}));var a=s("pG/d"),r=s("YwUu"),n=s.n(r);const o="Deal Support Requests Card",i="Deal Support Requests Sidebar",c=Object(a.a)({events:n()}),l=e=>{c.track("click",{action:e,screen:o})},d=e=>{c.track("click",{action:e,screen:i})},u=e=>{c.track("pageview",{action:e,screen:i})},b=e=>{c.track("submission",{action:e,screen:i})}},d18H:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("CE3l"),i=s("DqRu"),c=s("qS8i"),l=s("BiPx"),d=s("AuX0"),u=s("6A2w"),b=s("7DYQ"),p=s("LqZr"),j=s("iJaT"),m=s("sl/w");const g=({onClose:e,onConfirm:t})=>Object(a.jsxs)(j.a,{use:"success",width:540,children:[Object(a.jsx)(b.a,{offsetBottom:-50,offsetTop:100,children:Object(a.jsx)(p.a,{name:"trophy",width:190})}),Object(a.jsxs)(u.a,{align:"center",children:[Object(a.jsx)(o.a,{children:Object(a.jsx)(m.a,{message:"closeYourDealModal.title"})}),Object(a.jsx)(l.a,{onClick:e})]}),Object(a.jsx)(c.a,{align:"center",children:Object(a.jsx)(m.a,{message:"closeYourDealModal.body"})}),Object(a.jsxs)(d.a,{align:"center",children:[Object(a.jsx)(i.a,{use:"primary","data-selenium-test":"close-your-deal-modal--confirm-button",onClick:t,children:Object(a.jsx)(m.a,{message:"closeYourDealModal.confirmButton"})}),Object(a.jsx)(i.a,{"data-selenium-test":"close-your-deal-modal--cancel-button",onClick:e,children:Object(a.jsx)(m.a,{message:"closeYourDealModal.cancelButton"})})]})]});g.propTypes={onClose:n.a.func.isRequired,onConfirm:n.a.func.isRequired};t.default=g},fQfm:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("Ktcs"),n=s("nDpY"),o=s.n(n),i=s("wM7O"),c=s("LTV0"),l=s("vuW9"),d=s("3Q2O"),u=s("+rxA"),b=(s("npjq"),s("5PDu")),p=s("P4dz"),j=s("BToK"),m=s("MQNR");function g(e,t,s){const a=j.a.fromJS({objectType:"CONTACT",objectId:e.vid});t(m.CONTACT,{action:"Domain Controls - Reject QL clicked"});return Object(b.a)({domain:Object(p.g)(e,"company_info_domain"),domainInfoKey:a,logTrackingEvent:t,subject:e}).then(()=>{s()}).catch(()=>{})}var O=s("VfuR"),h=s.n(O),x=s("fEg8"),f=s("0xjy");const C="ql-summary-intro-tour",y="recentQlTourStep",R="rejectQlTourStep",S="automatedEmailsTourStep",E=1728e5,T=4;var v=s("b1KR"),I=s("sl/w"),N=s("CE3l"),q=s("DqRu"),A=s("qS8i"),w=s("BiPx"),D=s("AuX0"),P=s("6A2w"),M=s("7DYQ"),L=s("LqZr"),_=s("iJaT"),k=s("1LtB");const V=e=>f.a.logForBizOps(m.CONTACT,e),U=(new Date).getTime()-E,F=()=>{const{tour:e}=Object(r.useContext)(v.a);return{shouldShowTour:Object(r.useCallback)((e,t,s)=>!e&&s<T&&t<U,[]),skipTourOnClose:Object(r.useCallback)(({target:{value:t}})=>{if(!t){const t=e.getStep(),s=e.getConfig().steps.indexOf(t)+1;V({action:`QL Summary Intro Tour - Skipped tour on step ${s}: ${t}`});e.deactivate();Object(k.c)(C,T)}},[e])}};var H=s("pa/6");const Q=e=>f.a.logForBizOps(m.CONTACT,e),B=()=>{const[e,t]=Object(r.useState)(!1),{tour:s}=Object(r.useContext)(v.a),{shouldShowTour:n}=F();Object(r.useEffect)(()=>{Object(k.b)(C).then(({completed:e=!1,lastSkipped:s=0,skipCount:a=0}={})=>{n(e,s,a)&&t(!0)}).catch(Object(H.a)("Error while getting tour details"))},[n]);const o=Object(r.useCallback)(()=>{t(!1)},[]),i=Object(r.useCallback)(()=>{Q({action:"QL Summary Intro Tour - Skipped tour on step 0: modal"});Object(k.c)(C,T);o()},[o]),c=Object(r.useCallback)(()=>{o();s.start(C)},[o,s]);return e&&Object(a.jsxs)(_.a,{use:"info",width:570,children:[Object(a.jsx)(M.a,{offsetBottom:-23,offsetTop:56,children:Object(a.jsx)(L.a,{alt:"Illustration of a megaphone",name:"announcement",width:150})}),Object(a.jsxs)(P.a,{children:[Object(a.jsx)(N.a,{style:{paddingLeft:4,paddingRight:4},children:Object(a.jsx)(I.a,{message:"qlSummaryTour.introModal.title"})}),Object(a.jsx)(w.a,{onClick:i})]}),Object(a.jsx)(A.a,{children:Object(a.jsx)(I.a,{message:"qlSummaryTour.introModal.body"})}),Object(a.jsx)(D.a,{align:"center",children:Object(a.jsx)(q.a,{onClick:c,use:"primary",children:Object(a.jsx)(I.a,{message:"qlSummaryTour.introModal.startTourButton"})})})]})};var z=s("joGc"),G=s("3Shb"),K=s("xaC2"),W=s("feGq");const Y=({target:e})=>{const{skipTourOnClose:t}=F();return Object(a.jsx)(W.a,{attachTo:e,content:{body:Object(a.jsx)(I.a,{message:"qlSummaryTour.recentQlTourStep.body"}),footer:Object(a.jsx)(G.a,{children:Object(a.jsx)(K.a,{use:"primary",children:Object(a.jsx)(I.a,{message:"qlSummaryTour.nextButton"})})}),header:Object(a.jsx)(z.a,{children:Object(a.jsx)(I.a,{message:"qlSummaryTour.recentQlTourStep.header"})})},onOpenChange:t,placement:"right bottom",showCloseButton:!0,showSteps:!0,stepKey:y})};Y.propTypes={target:h.a.instanceOf(Element)};Y.defaultProps={target:null};const J=({target:e})=>{const{skipTourOnClose:t}=F();return Object(a.jsx)(W.a,{attachTo:e,content:{body:Object(a.jsx)(I.a,{message:"qlSummaryTour.rejectQlTourStep.body"}),footer:Object(a.jsx)(G.a,{children:Object(a.jsx)(K.a,{use:"primary",children:Object(a.jsx)(I.a,{message:"qlSummaryTour.nextButton"})})}),header:Object(a.jsx)(z.a,{children:Object(a.jsx)(I.a,{message:"qlSummaryTour.rejectQlTourStep.header"})})},onOpenChange:t,placement:"left bottom",showCloseButton:!0,showSteps:!0,stepKey:R})};J.propTypes={target:h.a.instanceOf(Element)};J.defaultProps={target:null};const $=({target:e})=>{const{skipTourOnClose:t}=F();return Object(a.jsx)(W.a,{attachTo:e,content:{body:Object(a.jsx)(I.a,{message:"qlSummaryTour.automatedEmailsTourStep.body"}),footer:Object(a.jsx)(G.a,{children:Object(a.jsx)(K.a,{use:"primary",children:Object(a.jsx)(I.a,{message:"qlSummaryTour.gotItButton"})})}),header:Object(a.jsx)(z.a,{children:Object(a.jsx)(I.a,{message:"qlSummaryTour.automatedEmailsTourStep.header"})})},onOpenChange:t,placement:"top",showCloseButton:!1,showSteps:!0,stepKey:S})};$.propTypes={target:h.a.instanceOf(Element)};$.defaultProps={target:null};const X=(e,t)=>{try{return e.current.iFrame.ref.current.contentDocument.querySelector(`[data-tour-step="${t}"]`)}catch(e){return null}},Z=e=>f.a.logForBizOps(m.CONTACT,e),ee=()=>{Object(k.a)(C);Z({action:"QL Summary Intro Tour - Completed"})},te=({children:e,iframeRef:t,shouldShowTour:s})=>s?Object(a.jsxs)(x.a,{tour:C,config:{beforeFinish:ee,steps:[y,R,S]},children:[Object(a.jsx)(B,{}),Object(a.jsx)(Y,{target:X(t,"recent-ql")}),Object(a.jsx)(J,{target:X(t,"reject-ql")}),Object(a.jsx)($,{target:X(t,"automated-emails")}),e]}):e;te.propTypes={children:h.a.node.isRequired,iframeRef:h.a.shape({current:h.a.any}),shouldShowTour:h.a.bool.isRequired};var se=s("D2Y9"),ae=s("Dau1"),re=s("jFYk"),ne=s("Q2XP");s.d(t,"default",(function(){return oe}));function oe({contact:e}){const[t,s]=Object(r.useState)(!1),[n,b]=Object(r.useState)(!1),[p,j]=Object(r.useState)(0),[m,O]=Object(r.useState)(!1),[h,x]=Object(r.useState)(!1),[C,y]=Object(r.useState)(),[R,S]=Object(r.useState)({isOpen:!1}),E=Object(r.useRef)(),{currentUserCanEdit:T}=Object(ne.Md)(),v=Object(r.useMemo)(()=>o.a.get(),[]),I=Object(r.useCallback)(t=>{const{type:a,value:r}=t.payload;if("changeTooltip"===a&&E.current){const{isOpen:e,headingText:t,targetSelector:s,title:a}=r,n=E.current.iFrame.ref.current.contentDocument.querySelector(s);S({isOpen:e,headingText:t,target:n,title:a})}else"desiredHeight"===a?j(r):"openPlayBook"===a?Object(u.b)(r):"rejectQL"===a?g(e,f.a.logForBizOps,()=>C.sendReplyMessage(t,"rejectQL",{})):"isUnworked"===a?s(!0):"hasMarketingEmails"===a&&b(!0)},[e,C,E]),N=Object(r.useCallback)(e=>{O(!0);y(e)},[]),q=Object(r.useCallback)(()=>{x(!0)},[]);return e?h?Object(a.jsx)(i.a,{type:"badRequest"}):Object(a.jsxs)("div",{children:[m?null:Object(a.jsx)(c.a,{layout:"centered"}),Object(a.jsx)(l.a,{open:R.isOpen,title:R.title,headingText:R.headingText,target:R.target,children:Object(a.jsx)("div",{})}),Object(a.jsx)(te,{iframeRef:E,shouldShowTour:t&&n,children:Object(a.jsx)(d.a,{appName:"ql-visibility-ui",height:p,ref:E,name:"ql-visibility-ui",onInitError:q,onMessage:I,onReady:N,onReadyError:q,scrolling:!1,src:`/ql-visibility/${v}/contact/${e.vid}`,width:"100%",embeddedPassthruProps:{canEditContact:T,queryParams:Object(se.parse)(Object(ae.parseUrl)(Object(re.a)()).query)}})})]}):null}},hhVA:function(e,t,s){"use strict";s.r(t);s.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return d}));var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("Ktcs"),i=s("MQNR"),c=s("/as5");class l extends o.Component{constructor(e){super(e);this.handleMessage=this.handleMessage.bind(this)}componentDidMount(){window.addEventListener("message",this.handleMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handleMessage)}handleMessage(e){if(e.data&&e.data.action&&"string"==typeof e.data.action&&e.data.source==="https://"+Object(c.z)())switch(e.data.action){case"close":this.props.onConfirm();break;case"createContact":this.handleContactCreated(e.data)}}handleContactCreated(e){const{onContactCreated:t}=this.props;t&&this.isValidData(e)&&t(e)}isValidData(e){return e.companyId&&e.companyId===this.props.subjectId}composeUrl(){const{objectType:e,subjectId:t}=this.props,s=e===i.COMPANY&&t?"&companyId="+t:"";return`${Object(c.g)()}?source=crm${s}`}render(){return Object(a.jsx)("iframe",{src:this.composeUrl(),width:"1000",height:"600",frameBorder:"0","data-selenium-test-bizops":"bizops-contact-cta-iframe",style:{marginLeft:"-40px",marginTop:"-25px",marginBottom:"-8px"}})}}l.propTypes={objectType:n.a.oneOf([i.COMPANY]).isRequired,subjectId:n.a.string.isRequired,onContactCreated:n.a.func,onConfirm:n.a.func};const d=1;t.default=l},i4yt:function(e,t,s){"use strict";var a=s("1V8t"),r=s("j4S9");const n={data:[],hasError:!1,isLoading:!0};t.a=Object(a.defineFactory)().defineName("DealSupportRequestStore").defineGetInitialState(()=>n).defineGet(e=>e).defineResponseTo(r.b,e=>Object.assign({},e,{isLoading:!0})).defineResponseTo(r.c,(e,t)=>Object.assign({},e,{data:t,isLoading:!1,hasError:!1})).defineResponseTo(r.a,e=>Object.assign({},e,{hasError:!0,isLoading:!1})).register()},j4S9:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s.d(t,"b",(function(){return r}));s.d(t,"c",(function(){return n}));const a="GET_DEAL_SUPPORT_REQUEST_ERROR",r="GET_DEAL_SUPPORT_REQUEST_START",n="GET_DEAL_SUPPORT_REQUEST_SUCCESS"},lUI8:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var a=s("QgEn"),r=s("Ktcs"),n=s("oT1Z"),o=s("W7Ls"),i=s("MslG");const c=({canEdit:e=!0,formProperty:t,label:s,objectId:c,onChange:l,required:d=!1,value:u})=>{const{propertyDefinition:{objectTypeId:b,property:p}}=t,j=Object(o.a)(c),{createValidationHandler:m}=Object(r.useContext)(i.a);return Object(a.jsx)("div",{"data-test-id":t.internalName+"-property",children:Object(a.jsx)(n.a,{"data-test-id":"property-input",formControlProps:{label:s||p.label,required:d},getAdditionalPropertyValue:j,objectId:c.toString(),objectTypeId:b,onChange:l,onValidationChange:m(t.internalName),property:p,readOnly:!e,value:u})})}},n0E6:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("Ktcs"),i=s("1V8t"),c=s("QYOI"),l=s.n(c),d=s("LTV0"),u=s("Jraf"),b=s("MQNR");const p={EMAIL_CAM_CLICKED:"Lead Registration - Email CAM Clicked",RE_REGISTER_CLICKED:"Lead Registration - Re-register Clicked",REGISTER_CLICKED:"Lead Registration - Register Clicked",SEND_TO_PAYWALL:"Lead Registration - Send to paywall"};const j="partner-deal-registration-write";var m=s("DqRu"),g=s("QvWB"),O=s("Pvgq"),h=s("sl/w"),x=s("oxA8"),f=s("LqZr");const C=["REGISTERED","REREGISTERED"],y=["REGISTERED","REREGISTERED","UNAVAILABLE"],R=["INVALID_DATA","REGISTERED","REREGISTERED","UNAVAILABLE"];function S(e){return C.indexOf(e.toUpperCase())>-1}function E(e){return R.indexOf(e.toUpperCase())>-1}function T(e){return y.indexOf(e.toUpperCase())>-1}const v=(e,t)=>`/contacts/${e}/contact/${t}`;var I=s("FeM/"),N=s("npjq");const q=e=>N.a.moment(new Date(e)).utc().portalTz().format("ll"),A=Object(c.Record)({requestId:null,requestDomain:null,hubId:null,vid:null,resultType:null,unavailableReason:null,hasOpportunity:null,processedAt:null},"RegistrationResult");A.fromJS=e=>new A(e);var w=A;const D="https://www.hubspot.com/solutions-partner-resource-center/sales-rules",P="UNAVAILABLE",M={CUSTOMER:"CUSTOMER",OWNED:"OWNED",REGISTERED:"REGISTERED",ACTIVE_PARTNER:"ACTIVE_PARTNER"};class L extends o.Component{constructor(e){super(e);this.handleEmailCamClick=()=>{const{logTrackingEvent:e}=this.props;e(b.CONTACT,{action:p.EMAIL_CAM_CLICKED})};this.renderRegisteredByAnotherContact=()=>{const{registeredTo:e,domain:t}=this.props;return Object(a.jsx)("section",{children:Object(a.jsx)("article",{children:Object(a.jsx)("p",{children:Object(a.jsx)(x.a,{message:"leadRegistration.registeredToAnotherContact",options:{domain:t,link:e}})})})})};this.renderSummary=()=>{const{status:e,canRegister:t,onRegister:s}=this.props;return Object(a.jsxs)("section",{children:[this.shallRenderUnavailableReasons()?this.renderUnavailableReasons():this.renderOtherStatuses(),t&&Object(a.jsxs)(m.a,{onClick:s,use:"link",children:[Object(a.jsx)(h.a,{message:S(e)?"leadRegistration.requestReRegistration":"leadRegistration.retryRegistration"}),Object(a.jsx)(g.a,{className:"small",name:"down"})]}),T(e.toUpperCase())&&this.renderCommunicationSection()]})};this.state={}}shallRenderUnavailableReasons(){const{showUnavailableReasons:e,latestResult:t}=this.props;return e&&t&&t.resultType===P&&(t.unavailableReason===M.CUSTOMER||t.unavailableReason===M.OWNED||t.unavailableReason===M.REGISTERED||t.unavailableReason===M.ACTIVE_PARTNER)}renderUnavailableReason(e,t,s,r){return Object(a.jsxs)(I.a,{children:[Object(a.jsx)("header",{style:{width:"100%",textAlign:"center"},children:Object(a.jsx)(O.a,{children:Object(a.jsx)(h.a,{message:s})})}),Object(a.jsx)("article",{children:Object(a.jsx)("p",{children:Object(a.jsx)(x.a,{message:r,options:{domain:e,processedAt:q(t),link:D}})})})]})}renderUnavailableReasons(){const{latestResult:e}=this.props,t=e.requestDomain,s=e.processedAt,a=e.unavailableReason;return e.hasOpportunity?a===M.REGISTERED?this.renderUnavailableReason(t,s,"leadRegistration.registrationStatuses.bestPartnerWin","leadRegistration.registrationStatusMessages.bestPartnerWin"):this.renderUnavailableReason(t,s,"leadRegistration.registrationStatuses.partnerCollab","leadRegistration.registrationStatusMessages.partnerCollab"):this.renderUnavailableReason(t,s,"leadRegistration.registrationStatuses.noOpportunity","leadRegistration.registrationStatusMessages.noOpportunity")}renderOtherStatuses(){const{domain:e,status:t,expiryDate:s}=this.props,r=t.replace(/ /g,"_").toLowerCase().replace("reregistered","registered");return Object(a.jsxs)(I.a,{children:[Object(a.jsxs)("header",{style:{width:"100%",textAlign:"center"},children:[Object(a.jsx)(O.a,{children:Object(a.jsx)(h.a,{message:"leadRegistration.registrationStatuses."+r})}),Object(a.jsx)("div",{children:S(t)&&Object(a.jsx)(f.a,{name:"success",width:"30%","data-test-id":"lead-reg-summary-ui-illustration"})})]}),Object(a.jsx)("article",{children:Object(a.jsx)("p",{children:Object(a.jsx)(x.a,{message:"leadRegistration.registrationStatusMessages."+r,options:{domain:e,link:D,expiryDate:s?q(parseInt(s,10)):null}})})})]})}renderCommunicationSection(){const{contacts:e}=this.props,t=e?e.find(e=>"CHANNEL_ACCOUNT_MANAGER"===e.get("role")||"SALES_PARTNER_OWNER"===e.get("role")):null;return t?Object(a.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(a.jsx)("h6",{children:Object(a.jsx)(h.a,{message:"leadRegistration.communicationLabel"+t.get("role")})}),Object(a.jsxs)("div",{children:[t.get("firstName")," ",t.get("lastName")]}),Object(a.jsx)("div",{children:t.get("emailAddress")}),Object(a.jsx)("div",{style:{width:"100%",textAlign:"center",paddingTop:"20px"},children:Object(a.jsx)(m.a,{href:"mailto:"+t.get("emailAddress"),"data-test-id":"mail-button",use:"tertiary-light",onClick:this.handleEmailCamClick,external:!0,children:Object(a.jsx)(h.a,{message:"leadRegistration.email"+t.get("role")})})})]}):Object(a.jsx)("div",{})}render(){const{registeredTo:e}=this.props;return e?this.renderRegisteredByAnotherContact():this.renderSummary()}}L.propTypes={status:n.a.string.isRequired,domain:n.a.string,expiryDate:n.a.number,contacts:n.a.object,registeredTo:n.a.string,canRegister:n.a.bool.isRequired,onRegister:n.a.func.isRequired,logTrackingEvent:n.a.func.isRequired,latestResult:n.a.instanceOf(w),showUnavailableReasons:n.a.bool};var _=L,k=s("LZPL"),V=s.n(k),U=s("nDpY"),F=s.n(U),H=s("yYAF");const Q=e=>Object(H.getFullUrl)("app",{envOverride:V.a.getShort(),hubletOverride:e}),B=()=>`${Q()}/upgrade/${F.a.get()}/partner-program`,z="https://www.hubspot.com/data-privacy/gdpr",G=(e,t)=>{t?window.open(e,"_blank"):window.location=e};var K=s("V4AE"),W=s("RvQm"),Y=s("77dM"),J=s("HcfS"),$=s("5fTC"),X=s("u30b"),Z=s("DSKb"),ee=s("vuW9");class te extends o.Component{constructor(e){super(e);this.onChange=(e,t)=>{const{formChanges:s}=this.state;s[e]=Array.isArray(t)?t.join(";"):t;this.setState({formChanges:s})};this.handleSave=()=>{const{onSave:e,paying:t,status:s,logTrackingEvent:a}=this.props,r=S(s);if(t){a(b.CONTACT,{action:r?p.RE_REGISTER_CLICKED:p.REGISTER_CLICKED});e(this.getFormValues())}else this.sendToPaywall()};this.sendToPaywall=()=>{const{logTrackingEvent:e}=this.props;e(b.CONTACT,{action:p.SEND_TO_PAYWALL});G(B(),!0)};this.handleCancel=()=>{this.setState({formChanges:{},showForm:!1})};this.renderGdprControl=e=>{const{contactProperties:t,settings:s}=this.props;if(e)return Object(a.jsx)(Z.a,{id:"hs_legal_basis",multi:!0,onChange:e=>this.onChange("hs_legal_basis",e.target.value),value:this.getPropertyValue("hs_legal_basis"),options:this.getSelectOptions(s.get("hsLegalBasisOptions")),placeholder:Object(a.jsx)(h.a,{message:"leadRegistration.form.gdprSelectOption"}),formControlProps:{required:!0}});const r=t.get("hs_legal_basis")?t.get("hs_legal_basis").replace(";",", "):"";return Object(a.jsx)("div",{id:"hs_legal_basis",children:r})};this.renderRegistrationButton=(e,t,s)=>{const{paying:r,settings:n}=this.props,o=n.get("isOverCapacity"),i=!r,c=i?"leadRegistration.notPaying":"leadRegistration.overCapacity",l=(!o||s)&&!i;return Object(a.jsx)(ee.a,{title:Object(a.jsx)(h.a,{message:c}),disabled:l,children:Object(a.jsxs)(m.a,{id:"registrationButton",use:"tertiary-light",onClick:this.handleSave,disabled:!this.isFormValid()||o&&!s||!t,children:[Object(a.jsx)(h.a,{message:e}),i&&Object(a.jsx)(X.a,{"data-test-id":"lockbadge"})]})})};this.state={formChanges:{}}}getPropertyValue(e){const{formChanges:t}=this.state,{contactProperties:s}=this.props;return t.hasOwnProperty(e)?t[e]:s.get(e)}isValidProperty(e){return!(!e||null===e||""===e)}isFormValid(){return 0===this.getFormValues().valueSeq().filter(e=>null===e||""===e).toArray().length}getFormValues(){const{settings:e}=this.props,t=Object.assign(this.props.contactProperties.toJS(),this.state.formChanges);e.get("gdprEnabled")||delete t.hs_legal_basis;return l.a.fromJS(t)}isFormModified(){const{formChanges:e}=this.state,{status:t}=this.props,s=void 0===t,a=0===Object.keys(e).length;return!((!s||a)&&(s||a))}getSelectOptions(e){const t=[],s=e.valueSeq().toArray();for(const e of s)t.push({value:e.get("value"),text:e.get("label")});return t}renderField(e,t){return e?Object(a.jsx)(K.a,{required:!0,id:t,"data-test-id":t,value:this.getPropertyValue(t),onChange:e=>this.onChange(t,e.target.value)}):Object(a.jsx)("div",{id:t,children:this.getPropertyValue(t)})}renderCancelButton(){return Object(a.jsx)(m.a,{id:"cancelButton",onClick:()=>this.handleCancel(),disabled:!this.isFormModified(),children:Object(a.jsx)(h.a,{message:"leadRegistration.cancelButton"})})}renderForm(e){const{settings:t,invalidWebsite:s,status:r}=this.props,n=S(r);return Object(a.jsxs)(J.a,{children:[Object(a.jsxs)($.a,{size:{xs:12},children:[Object(a.jsxs)(W.a,{htmlFor:"email",children:[Object(a.jsx)(h.a,{message:"leadRegistration.form.email"})," *"]}),this.renderField(e,"email")]}),Object(a.jsxs)($.a,{size:{xs:6},children:[Object(a.jsxs)(W.a,{htmlFor:"firstName",children:[Object(a.jsx)(h.a,{message:"leadRegistration.form.firstname"})," *"]}),this.renderField(e,"firstname")]}),Object(a.jsxs)($.a,{size:{xs:6},children:[Object(a.jsxs)(W.a,{htmlFor:"email",children:[Object(a.jsx)(h.a,{message:"leadRegistration.form.lastname"})," *"]}),this.renderField(e,"lastname")]}),Object(a.jsxs)($.a,{size:{xs:12},children:[Object(a.jsxs)(W.a,{htmlFor:"company",children:[Object(a.jsx)(h.a,{message:"leadRegistration.form.company"})," *"]}),this.renderField(e,"company")]}),Object(a.jsxs)($.a,{size:{xs:12},children:[Object(a.jsxs)(W.a,{htmlFor:"website",children:[Object(a.jsx)(h.a,{message:"leadRegistration.form.website"})," *"]}),this.renderField(e,"website"),s&&Object(a.jsx)(h.a,{id:"invalidWebsite",message:"leadRegistration.invalidWebsite"})]}),Object(a.jsx)($.a,{size:{xs:12},children:t.get("gdprEnabled")&&Object(a.jsxs)("div",{children:[Object(a.jsxs)(W.a,{htmlFor:"hs_legal_basis",children:[Object(a.jsx)(h.a,{message:"leadRegistration.form.hs_legal_basis"}),"*"]}),this.renderGdprControl(e)]})}),Object(a.jsxs)($.a,{style:{paddingTop:"15px",paddingBottom:"15px"},size:{xs:12},children:[Object(a.jsx)(h.a,{message:"leadRegistration.gdprDescription"})," ",Object(a.jsx)(Y.a,{external:!0,href:z,children:Object(a.jsx)(h.a,{message:"leadRegistration.gdprLink"})})]}),n&&Object(a.jsx)($.a,{size:{xs:6},children:this.renderRegistrationButton("leadRegistration.reregistrationButton",e,n)}),n&&Object(a.jsx)($.a,{size:{xs:6},children:this.renderCancelButton()}),!n&&Object(a.jsx)($.a,{size:{xs:12},style:{textAlign:"center"},children:this.renderRegistrationButton("leadRegistration.requestRegistrationButton",e,n)})]})}render(){const{editMode:e}=this.props;return this.renderForm(e)}}te.propTypes={contactProperties:n.a.object.isRequired,editMode:n.a.bool.isRequired,settings:n.a.object.isRequired,invalidWebsite:n.a.bool.isRequired,status:n.a.string.isRequired,onSave:n.a.func.isRequired,paying:n.a.bool.isRequired,logTrackingEvent:n.a.func.isRequired};te.defaultProps={paying:!1};var se=te;const ae="WEBSITE_VALIDATION_CHECK_REQUEST",re="WEBSITE_VALIDATION_CHECK_RESPONSE",ne="WEBSITE_VALIDATION_CHECK_FAILURE",oe="REGISTER_DOMAIN_REQUEST",ie="REGISTER_DOMAIN_RESPONSE",ce="REGISTER_DOMAIN_FAILURE",le="DOMAIN_STATUS_REQUEST",de="DOMAIN_STATUS_RESPONSE",ue="DOMAIN_STATUS_FAILURE",be="HUBSPOT_CONTACTS_REQUEST",pe="HUBSPOT_CONTACTS_RESPONSE",je="HUBSPOT_CONTACTS_FAILURE",me="PARTNER_PAYING_STATUS_REQUEST",ge="PARTNER_PAYING_STATUS_RESPONSE",Oe="PARTNER_PAYING_STATUS_FAILURE",he="GET_LATEST_RESULT_REQUESTED",xe="GET_LATEST_RESULT_FULFILLED",fe="GET_LATEST_RESULT_FAILED";var Ce=Object(i.defineFactory)().defineName("LEAD_REGISTRATION").defineGetInitialState(()=>Object(c.fromJS)({})).defineGet(e=>e).defineResponseTo(oe,e=>e.set("isLoadingDomainRegistration",!0).set("registeredDomain",null)).defineResponseTo(ie,(e,t)=>e.set("isLoadingDomainRegistration",!1).set("registeredDomain",t)).defineResponseTo(ce,(e,t)=>e.set("isLoadingDomainRegistration",!1).set("registeredDomainError",t)).defineResponseTo(le,e=>e.set("isLoadingDomainStatus",!0).set("domainStatus",null)).defineResponseTo(de,(e,t)=>e.set("isLoadingDomainStatus",!1).set("domainStatus",t)).defineResponseTo(ue,(e,t)=>e.set("isLoadingDomainStatus",!1).set("domainStatusError",t)).defineResponseTo(ae,e=>e.set("isLoadingWebsiteCheck",!0).set("websiteValid",!1)).defineResponseTo(re,(e,t)=>e.set("isLoadingWebsiteCheck",!1).set("websiteValid",t.websiteValid)).defineResponseTo(ne,(e,t)=>e.set("isLoadingWebsiteCheck",!1).set("websiteValidError",t)).defineResponseTo(be,e=>e.set("isLoadingContacts",!0)).defineResponseTo(pe,(e,t)=>e.set("isLoadingContacts",!1).set("contacts",t)).defineResponseTo(je,(e,t)=>e.set("isLoadingContacts",!1).set("contactsError",t)).defineResponseTo(me,e=>e.set("isLoadingPayingCheck",!0).set("paying",!1)).defineResponseTo(ge,(e,t)=>e.set("isLoadingPayingCheck",!1).set("paying",t)).defineResponseTo(Oe,(e,t)=>e.set("isLoadingPayingCheck",!1).set("payingCheckError",t)).defineResponseTo(he,e=>e.set("isLoadingLatestResult",!0).set("latestResult",null)).defineResponseTo(xe,(e,t)=>e.set("isLoadingLatestResult",!1).set("latestResult",w.fromJS(t))).defineResponseTo(fe,(e,t)=>e.set("isLoadingLatestResult",!1).set("latestResult",null).set("latestResultError",t)).register(),ye=s("AgF4"),Re=s("Gc2C"),Se=(e,t)=>{Object(Re.a)("string"==typeof e,"dispatch: expected actionType to be a string but got %s",e);ye.a.dispatch({actionType:e,data:t})},Ee=s("xHov");const Te="HTTP://",ve="partner-registration/",Ie=ve+"v1/registrations/",Ne=ve+"v1/registrations/website/validate?website=",qe=ve+"v2/registrations/domain-status",Ae=ve+"v1/partners/lead-registration-authorized",we=e=>{const t=encodeURIComponent(e);return Object(Ee.c)(`${Ne}${t}`)},De=e=>Object(Ee.e)(`${Ie}${e}?source=CRM_UI`),Pe=e=>{const t=encodeURIComponent(e.toUpperCase().replace(Te,""));return Object(Ee.c)(`${qe}/${t}`)},Me=()=>Object(Ee.c)(Ae),Le=e=>Object(Ee.c)(`${ve}/v2/registrations/latest-result/${e}`),_e="partner-dashboard/"+"v1/hubspot-team",ke=()=>Object(Ee.c)(_e);function Ve(e){Se(he);return Le(e).then(e=>Se(xe,e)).catch(e=>Se(fe,e))}function Ue(e){De(e).then(t=>{Se(ie,t);return Ve(e)})}function Fe(){Se(ie,null)}function He(e,t){Se(oe);Se(ae);return we(e).then(e=>{const s=null!==e.get("domain");Se(re,{websiteValid:s});return s?Ue(t):Se(ce,{websiteValid:s})})}function Qe(e){Se(le);Pe(e).then(e=>{Se(de,e)}).catch(e=>{Se(ue,e)})}function Be(e){if(e){Se(ae);we(e).then(e=>{const t=null!==e.get("domain");Se(re,{websiteValid:t});t&&Qe(e.get("domain"))}).catch(e=>{Se(ne,e)})}else Se(de,null)}function ze(){Se(be);ke().then(e=>{Se(pe,e)}).catch(e=>{Se(je,e)})}function Ge(){Se(me);Me().then(e=>{Se(ge,e)}).catch(e=>{Se(Oe,e)})}var Ke=s("iVgY"),We=s("0BTv"),Ye=s("dWuh"),Je=s("pOGK"),$e=s("ieDw");i.DispatcherInstance.set(ye.a);function Xe({handleClose:e,entryPoint:t=""}){const[s,r]=Object(o.useState)({showModal:!1,registrationResult:null}),n=e=>r({showModal:!0,registrationResult:e});return Object(a.jsx)($e.b,{entryPoint:t,children:Object(a.jsxs)(Ke.a,{"data-test-id":"deal-reg-panel",onEsc:e,width:"540px",children:[s.showModal&&s.registrationResult&&Object(a.jsx)(We.a,{leadRegistrationResult:s.registrationResult,onClose:()=>{r({showModal:!1,registrationResult:null});e()}}),Object(a.jsx)(Je.a,{handleClose:e,handleRegistrationFailure:n}),Object(a.jsx)(Ye.a,{})]})})}var Ze=s("T1mR"),et=s("VQUG");function tt({status:e}){const[t,s]=Object(o.useState)(!1),r="UNAVAILABLE"===e?"warning":"info",n="UNAVAILABLE"===e?"leadRegistration.dealReg.cta.alreadyRegisteredText":"leadRegistration.dealReg.cta.text",i=Object(Ze.a)();return Object(a.jsxs)("div",{className:"m-bottom-7",children:[t&&Object(a.jsx)(Xe,{handleClose:()=>s(!1),entryPoint:"lead-registration"}),Object(a.jsxs)(u.a,{type:r,titleText:Object(a.jsx)(h.a,{message:"leadRegistration.dealReg.cta.header"}),closeable:!1,className:"p-y-4 m-y-2",children:[Object(a.jsx)(h.a,{message:n,className:"m-y-1"}),Object(a.jsxs)(et.a,{justify:"around",className:"m-top-2",children:[Object(a.jsx)(Y.a,{href:"https://knowledge.hubspot.com/partner-tools/create-shared-partner-deals",use:"on-bright",external:!0,children:Object(a.jsx)(h.a,{message:"leadRegistration.dealReg.cta.buttons.learnMore"})}),Object(a.jsx)(ee.a,{title:Object(a.jsx)(h.a,{message:"leadRegistration.dealReg.cta.tooltipText"}),disabled:!i,children:Object(a.jsx)(m.a,{use:"tertiary",size:"xs",onClick:()=>{i||s(!0)},disabled:i,children:Object(a.jsx)(h.a,{message:"leadRegistration.dealReg.cta.buttons.register"})})})]})]})]})}tt.propTypes={status:n.a.string.isRequired};var st=s("GgP/"),at=s.n(st);s.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return it}));const rt="AVAILABLE";class nt extends o.Component{constructor(e){super(e);this.handleSave=e=>{const{vid:t,onSave:s}=this.props;this.setState({showForm:!1});s(e,()=>{He(e.get("website"),t)})};this.handleShowForm=()=>{this.setState({showForm:!0})};this.getContactVidToDisplay=(e,t,s)=>s&&s!==t?v(e,s):null;this.state={hasDealRegScope:!1}}componentDidMount(){const{contactProperties:e,vid:t,showUnavailableReasons:s}=this.props;ze();Be(e.get("website"));Fe();Ge();s&&Ve(t);at()().then(({user:e})=>{this.setState({hasDealRegScope:e.scopes.includes(j)})})}getRegisteredDomain(){const{leadRegistrationStore:e}=this.props;return e.get("registeredDomain")?e.get("registeredDomain").set("status",e.get("registeredDomain").get("type")):e.get("domainStatus")&&e.get("domainStatus").get("registeredDomain")?e.get("domainStatus").get("registeredDomain").set("status","REGISTERED").set("lastRegisteredVid",e.get("domainStatus").get("lastRegisteredVid")):e.get("domainStatus")?l.a.fromJS({status:e.get("domainStatus").get("status")}):null}renderErrorMessage(){const{leadRegistrationStore:e}=this.props,t=e.get("registeredDomainError"),s=e.get("payingCheckError"),r=e.get("contactsError");return t?Object(a.jsx)(u.a,{titleText:Object(a.jsx)(h.a,{message:"leadRegistration.registrationStatuses.invalid_domain"}),type:"danger",children:Object(a.jsx)(h.a,{message:"leadRegistration.registrationStatusMessages.invalid_domain"})}):r||s?Object(a.jsx)(u.a,{titleText:Object(a.jsx)(h.a,{message:"leadRegistration.apiError"}),type:"danger",children:Object(a.jsx)(h.a,{message:"leadRegistration.apiErrorTryAgain"})}):null}renderLeadRegistrationSummary(e,t){const{portalId:s,vid:r,contactProperties:n,leadRegistrationStore:o,logTrackingEvent:i,showUnavailableReasons:c}=this.props,l=o.get("latestResult"),d=n.get("website"),u=d?d.replace("http://",""):"";return Object(a.jsx)(_,{status:t,domain:u,registeredTo:this.getContactVidToDisplay(s,r,e.get("lastRegisteredVid")),expiryDate:e?e.get("expiresAt"):null,contacts:o.get("contacts"),canRegister:E(t),onRegister:this.handleShowForm,logTrackingEvent:i,latestResult:l,showUnavailableReasons:c})}renderLeadRegistrationForm(e){const{settings:t,contactProperties:s,leadRegistrationStore:r,logTrackingEvent:n}=this.props,o=r.get("paying"),i=!s.get("website")||r.get("websiteValid");return Object(a.jsx)(se,{contactProperties:s,editMode:!0,settings:t,invalidWebsite:!i,status:e,onSave:this.handleSave,paying:o,logTrackingEvent:n})}render(){const{leadRegistrationStore:e}=this.props,{showForm:t}=this.state;if(e.get("isLoadingContacts")||e.get("isLoadingDomainRegistration")||e.get("isLoadingWebsiteCheck")||e.get("isLoadingDomainStatus")||e.get("isLoadingPayingCheck")||e.get("isLoadingLatestResult"))return Object(a.jsx)(d.a,{grow:!0});const s=this.getRegisteredDomain(),r=s?s.get("status"):rt;return t||r===rt?Object(a.jsxs)("div",{children:[this.state.hasDealRegScope&&Object(a.jsx)(tt,{status:r}),this.renderErrorMessage(),this.renderLeadRegistrationForm(r)]}):Object(a.jsxs)("div",{children:[this.state.hasDealRegScope&&Object(a.jsx)(tt,{status:r}),this.renderLeadRegistrationSummary(s,r)]})}}nt.propTypes={portalId:n.a.number.isRequired,vid:n.a.number.isRequired,contactProperties:n.a.object.isRequired,settings:n.a.object.isRequired,onSave:n.a.func.isRequired,leadRegistrationStore:n.a.object.isRequired,logTrackingEvent:n.a.func.isRequired,showUnavailableReasons:n.a.bool};const ot={leadRegistrationStore:{stores:[Ce],deref:()=>Ce.get()}},it=1;t.default=Object(i.connect)(ot)(nt)},nOTs:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("66eB"),i=s("1V8t"),c=s("Ktcs"),l=s("T2JF"),d=s("Wf03"),u=s("Zwtj"),b=s("Q6fd"),p=s("7gk9"),j=s("E7+s"),m=s("MQNR"),g=s("Ly8s"),O=s("O9ft"),h=s("xHov"),x=s("QYOI");const f=Object(x.Record)({billingPeriod:NaN,commitmentTerms:NaN,discount:NaN,discountPercentage:NaN,mrr:NaN,isEmpty:!1},"SubscriptionMrrInfo");f.fromJS=e=>{const t=!e.commitmentTerms&&!e.billingPeriod&&!e.mrr,s=Object.assign({isEmpty:t},e);return new f(s)};var C=f;const y=Object(x.Record)({currency:null,customerPrimaryQuoteMrrInfo:null,customerPriorMrrInfo:null,customerScheduledMrrInfo:null,hubSpotRecognizedForecastedMrr:NaN,hubSpotRecognizedPrimaryQuoteMrrInfo:null,hubSpotRecognizedPriorMrrInfo:null,hubSpotRecognizedScheduledMrrInfo:null,isLoading:!1,errorFetching:!1},"ContractChangeMrrInfo");y.fromJS=e=>{const{currency:t=null,customerPriorMrrInfo:s,customerScheduledMrrInfo:a,customerPrimaryQuoteMrrInfo:r,hubSpotRecognizedForecastedMrr:n,hubSpotRecognizedPriorMrrInfo:o,hubSpotRecognizedScheduledMrrInfo:i,hubSpotRecognizedPrimaryQuoteMrrInfo:c,isLoading:l=!1,errorFetching:d=!1}=e;return new y({currency:t,customerPrimaryQuoteMrrInfo:r?C.fromJS(r):null,customerPriorMrrInfo:s?C.fromJS(s):null,customerScheduledMrrInfo:a?C.fromJS(a):null,hubSpotRecognizedForecastedMrr:n,hubSpotRecognizedPrimaryQuoteMrrInfo:c?C.fromJS(c):null,hubSpotRecognizedPriorMrrInfo:o?C.fromJS(o):null,hubSpotRecognizedScheduledMrrInfo:i?C.fromJS(i):null,isLoading:l,errorFetching:d})};var R=y;const S="bizops-renewal-summary/v1/mrr-info",E=e=>Object(h.c)(`${S}/crm-deal/${e}`,{},e=>R.fromJS(e));var T=s("pa/6"),v=s("W4L3");function I(){Object(g.b)(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_CLEAR)}function N(e){Object(v.a)(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_REQUESTED);E(e).then(e=>{Object(v.a)(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_RECEIVED,e)},e=>{console.error(e);Object(v.a)(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_FAILED)}).catch(Object(T.a)("Error after getting contract change MRR info"))}var q=s("+KD7");const A=(e,t)=>{const s=t-e;return{diff:s,percentage:0!==e?s/e*100:s}};var w=s("g8ce"),D=s("sl/w"),P=s("XMVY"),M=s("JWMD"),L=s("PW/O"),_=s("HTXA"),k=s("gsqH"),V=s("h/3h");class U extends c.Component{render(){const{currency:e,labelKey:t,mrr:s,priorMrr:r,calculateDifference:n}=this.props,o=n&&void 0!==r?A(r,s):null,i=o?Object(a.jsxs)(_.a,{children:[0!==o.percentage&&Object(a.jsx)(M.a,{use:o.percentage>0?"increase":"decrease"}),Object(a.jsx)("span",{className:"p-right-1",children:Object(a.jsx)(P.a,{value:Math.abs(o.percentage),precision:2})}),"(",Object(a.jsx)(w.a,{value:o.diff,currencyCode:e}),")"]}):null;return Object(a.jsxs)(k.a,{children:[Object(a.jsx)(V.a,{children:Object(a.jsx)(D.a,{message:"contractChangeMrrInfo."+t,style:{color:q.SLINKY}})}),Object(a.jsx)(L.a,{children:Object(a.jsx)(w.a,{value:s,currencyCode:e})}),i]})}}U.propTypes={currency:n.a.string.isRequired,labelKey:n.a.string.isRequired,mrr:n.a.number.isRequired,priorMrr:n.a.number,calculateDifference:n.a.bool};U.defaultProps={calculateDifference:!0};var F=U,H=s("UW18");class Q extends c.Component{renderHeaderItem(e,t,s,r,n){return Object(a.jsx)(F,{currency:t,labelKey:e,mrr:s,priorMrr:r,calculateDifference:n})}render(){const{contractChangeMrrInfo:e}=this.props,{currency:t,customerPriorMrrInfo:s,customerScheduledMrrInfo:r,customerPrimaryQuoteMrrInfo:n,hubSpotRecognizedForecastedMrr:o}=e;return Object(a.jsxs)(H.a,{className:"p-top-0",children:[this.renderHeaderItem("priorMrr",t,s.mrr),this.renderHeaderItem("scheduledMrr",t,r.mrr,s.mrr),!n.isEmpty&&this.renderHeaderItem("primaryQuoteMrr",t,n.mrr,s.mrr),this.renderHeaderItem("forecastedMrr",t,o,s.mrr,!1)]})}}Q.propTypes={contractChangeMrrInfo:n.a.instanceOf(R)};var B=Q,z=s("mLvQ"),G=s("dKJf"),K=s("VQUG");const W="contractChangeMrrInfo",Y=W+".rows";class J extends c.Component{renderChangeArrow(e){return Object(a.jsx)(M.a,{size:12,use:e>=0?"increase":"decrease"})}renderDiffComponent(e,t){return e?Object(a.jsxs)(G.a,{use:"help",children:[0!==e.percentage&&this.renderChangeArrow(e.percentage),Object(a.jsx)("span",{className:"p-right-1",children:Object(a.jsx)(P.a,{value:Math.abs(e.percentage),precision:2})}),"(",Object(a.jsx)(w.a,{value:e.diff,currencyCode:t}),")"]}):null}render(){const{currency:e,hubSpotRecognized:t,labelKey:s,mrrInfo:r,priorMrrInfo:n}=this.props,o=n?A(n.mrr,r.mrr):null,i=n?{diff:r.discount-n.discount,percentage:r.discountPercentage-n.discountPercentage}:null,c=this.renderDiffComponent(o,e),l=this.renderDiffComponent(i,e);return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"text-left titlecase table-row-title",children:Object(a.jsx)(D.a,{message:`${Y}.${s}`,style:{color:q.SLINKY}})}),Object(a.jsx)("td",{className:"text-right",children:Object(a.jsxs)(K.a,{align:"end",justify:"start",direction:"column",wrap:"wrap",children:[Object(a.jsx)(w.a,{value:r.mrr,currencyCode:e}),c,Object(a.jsx)(G.a,{use:"help",children:Object(a.jsx)(z.a,{message:W+".recognizedAmount",options:{amount:Object(a.jsx)(w.a,{value:t.mrr,currencyCode:e})}})})]})}),Object(a.jsxs)("td",{className:"text-right",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"p-right-1",children:Object(a.jsx)(P.a,{value:r.discountPercentage,precision:2,className:"p-right-2"})}),"(",Object(a.jsx)(w.a,{value:r.discount,currencyCode:e}),")"]}),l]}),Object(a.jsx)("td",{className:"text-right",children:Object(a.jsxs)(K.a,{align:"end",justify:"start",direction:"column",wrap:"wrap",children:[Object(a.jsx)(w.a,{value:r.mrr*r.billingPeriod,currencyCode:e}),Object(a.jsx)(G.a,{use:"help",children:Object(a.jsx)(D.a,{message:W+".everyMonths",options:{count:r.billingPeriod},style:{color:q.SLINKY}})})]})}),Object(a.jsx)("td",{className:"text-right",children:Object(a.jsx)(D.a,{message:W+".commitmentMonths",options:{count:r.commitmentTerms},style:{color:q.SLINKY}})})]})}}J.propTypes={currency:n.a.string.isRequired,hubSpotRecognized:n.a.instanceOf(C).isRequired,labelKey:n.a.string.isRequired,mrrInfo:n.a.instanceOf(C).isRequired,priorMrrInfo:n.a.instanceOf(C)};var $=J,X=s("6buU");const Z="contractChangeMrrInfo.columns";class ee extends c.Component{render(){const{contractChangeMrrInfo:e}=this.props,{currency:t,customerPriorMrrInfo:s,customerScheduledMrrInfo:r,customerPrimaryQuoteMrrInfo:n,hubSpotRecognizedPriorMrrInfo:o,hubSpotRecognizedScheduledMrrInfo:i,hubSpotRecognizedPrimaryQuoteMrrInfo:c}=e;return Object(a.jsxs)(X.a,{className:"mrr-info-table",condensed:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{}),Object(a.jsx)("th",{className:"text-right uppercase table-column-title",children:Object(a.jsx)(D.a,{message:Z+".mrr",style:{color:q.SLINKY}})}),Object(a.jsx)("th",{className:"text-right uppercase table-column-title",children:Object(a.jsx)(D.a,{message:Z+".discount",style:{color:q.SLINKY}})}),Object(a.jsx)("th",{className:"text-right uppercase table-column-title",children:Object(a.jsx)(D.a,{message:Z+".invoice",style:{color:q.SLINKY}})}),Object(a.jsx)("th",{className:"text-right uppercase table-column-title",children:Object(a.jsx)(D.a,{message:Z+".commitment",style:{color:q.SLINKY}})})]})}),Object(a.jsxs)("tbody",{children:[Object(a.jsx)($,{currency:t,hubSpotRecognized:o,labelKey:"prior",mrrInfo:s}),Object(a.jsx)($,{currency:t,hubSpotRecognized:i,labelKey:"scheduled",mrrInfo:r,priorMrrInfo:s}),!n.isEmpty&&Object(a.jsx)($,{currency:t,hubSpotRecognized:c,labelKey:"primaryQuote",mrrInfo:n,priorMrrInfo:s})]})]})}}ee.propTypes={contractChangeMrrInfo:n.a.instanceOf(R).isRequired};var te=ee,se=s("witE"),ae=s("WAUT"),re=s("co4r"),ne=s("wM7O"),oe=s("5qWo");class ie extends c.Component{renderContent(){const{contractChangeMrrInfo:e}=this.props;return e.errorFetching?Object(a.jsx)(ne.a,{title:Object(a.jsx)(D.a,{message:"contractChangeMrrInfo.error.noRenewalFound.title"}),children:Object(a.jsx)(D.a,{message:"contractChangeMrrInfo.error.noRenewalFound.message"})}):e.isLoading?Object(a.jsx)(oe.a,{contextual:!0}):Object(a.jsxs)("div",{children:[Object(a.jsx)(B,{contractChangeMrrInfo:e}),Object(a.jsx)(te,{contractChangeMrrInfo:e})]})}render(){return Object(a.jsxs)(ae.a,{className:"contractChangeMrrInfoCard",compact:!0,children:[Object(a.jsx)(se.a,{title:Object(a.jsx)(D.a,{message:"contractChangeMrrInfo.title"})}),Object(a.jsx)(re.a,{children:this.renderContent()})]})}}ie.propTypes={contractChangeMrrInfo:n.a.instanceOf(R)};var ce=ie;const le=Object(x.fromJS)({contractChangeMrrInfo:R.fromJS({isLoading:!0})});var de=Object(i.defineFactory)().defineName("ContractChangeMrrInfoStore").defineGetInitialState(()=>le).defineGet(e=>e.get("contractChangeMrrInfo")).defineResponseTo(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_CLEAR,e=>e.setIn(["contractChangeMrrInfo"],null)).defineResponseTo(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_REQUESTED,e=>e.get("contractChangeMrrInfo")?e.setIn(["contractChangeMrrInfo","isLoading"],!0):e).defineResponseTo(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_RECEIVED,(e,t)=>e.setIn(["contractChangeMrrInfo"],t).setIn(["contractChangeMrrInfo","isLoading"],!1)).defineResponseTo(O.a.RENEWAL_SUMMARY_CONTRACT_CHANGE_MRR_INFO_FAILED,e=>e.setIn(["contractChangeMrrInfo"],R.fromJS({errorFetching:!0}))).register(),ue=s("LTV0");class be extends c.Component{componentDidMount(){const{dealId:e}=this.props;N(e)}componentWillUnmount(){I()}render(){const{contractChangeMrrInfo:e}=this.props;return e?Object(a.jsx)(ce,{contractChangeMrrInfo:e}):Object(a.jsx)(ue.a,{grow:!0,minHeight:200})}}const pe={contractChangeMrrInfo:{stores:[de],deref:()=>de.get()}};be.propTypes={dealId:n.a.number.isRequired,contractChangeMrrInfo:n.a.instanceOf(R)};var je=Object(i.connect)(pe)(be),me=s("Jdq1"),ge=s("ecpH"),Oe=s("j6Gt"),he=s("9XgP"),xe=s("ZXaq"),fe=s("UEeD");s.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return Re}));s.d(t,"WrappedComponent",(function(){return Ce}));const Ce=({company:e,deal:t,handleOpenActivityQuickViewModal:s,handleOpenPortalUsersPanel:r,handleUpdateBizOpsStores:n,logTrackingEvent:o})=>{const i=Object(c.useCallback)(e=>o(m.DEAL,e),[o]);if(!t)return null;const{dealId:l}=t,d=e&&e.get("companyId");return Object(a.jsx)(fe.a.Provider,{value:{logTrackingEvent:i},children:Object(a.jsx)(ge.a.Provider,{value:{handleOpenActivityQuickViewModal:s,handleOpenPortalUsersPanel:r,handleUpdateBizOpsStores:n},children:Object(a.jsxs)("div",{children:[Object(a.jsx)(xe.a,{className:"m-bottom-4"}),Object(a.jsx)(je,{dealId:l}),Object(a.jsx)(me.a,{crmCompanyId:d,dealId:l,index:1,isDetailsExpanded:!0,isDraggable:!1}),Object(a.jsx)(Oe.a,{crmCompanyId:d,index:2,isDraggable:!1})]})})})},ye={company:{stores:[l.a,d.a],deref({deal:e}){const t=l.a.get({objectType:m.DEAL,objectId:e.dealId,associationType:p.x});return Object(j.d)(t)?j.b:t&&0!==t.get("results").size?d.a.get(t.get("results").first()):j.a}}};Ce.propTypes={company:n.a.instanceOf(u.a),deal:n.a.instanceOf(b.a),handleOpenActivityQuickViewModal:n.a.func,handleOpenPortalUsersPanel:n.a.func,handleUpdateBizOpsStores:n.a.func,logTrackingEvent:n.a.func};Ce.defaultProps={handleOpenActivityQuickViewModal:o.a,handleOpenPortalUsersPanel:o.a,handleUpdateBizOpsStores:o.a,logTrackingEvent:o.a};const Re=1;t.default=Object(he.c)(Object(i.connect)(ye)(Ce))},nmbJ:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("Ktcs"),i=s("1V8t"),c=s("LTV0"),l=s("sl/w"),d=s("npjq"),u=s("nDpY"),b=s.n(u),p=s("hmaQ"),j=s("FeM/"),m=s("77dM"),g=s("QYOI");function O(e){return e.properties.reduce((e,t)=>{e[t.name]=t.value;return e},{})}function h(e,t){const s=t.map(e=>e.vid);s.push(e);return encodeURIComponent(JSON.stringify(Object(g.Map)({property:"hs_object_id",operator:"IN",values:s}).toJS()))}var x=s("69TS"),f=s("jlrW"),C=s("yUDr"),y=s("C3PU"),R=s("A97v"),S=s("VQUG"),E=s("dKJf"),T=s("R3K/");class v extends o.Component{renderAvatar(e){return Object(a.jsx)(R.a,{lookup:{type:"email",primaryIdentifier:e},portalId:b.a.get(),size:"md",source:"explorer"})}renderName(e,t,s){return Object(a.jsx)(m.a,{className:"related-contact-badge__property",href:T.a.contact(e),children:Object(a.jsx)(x.a,{familyName:s,givenName:t})})}renderJobTitle(e){return e?Object(a.jsx)(E.a,{className:"related-contact-badge__property",children:e}):null}renderEmail(e){return Object(a.jsx)(E.a,{className:"related-contact-badge__property",children:Object(a.jsx)(m.a,{external:!0,href:"mailto:"+e,children:e})})}render(){const{contactVid:e,email:t,firstName:s,lastName:r,jobTitle:n}=this.props;return Object(a.jsxs)(f.a,{children:[Object(a.jsx)(C.a,{children:this.renderAvatar(t)}),Object(a.jsx)(y.a,{children:Object(a.jsxs)(S.a,{align:"stretch",direction:"column",children:[this.renderName(e,s,r),this.renderJobTitle(n),this.renderEmail(t)]})})]},e)}}v.propTypes={contactVid:n.a.number.isRequired,email:n.a.string.isRequired,firstName:n.a.string,lastName:n.a.string,jobTitle:n.a.string};var I=v,N=s("OnVB"),q=s("YrDX"),A=s("yZiQ");class w extends o.Component{renderRecentConversionDate(e){const t=d.a.moment.userTz(parseInt(e,10)).format("lll z");return null!=e?this.renderProperty(d.a.text("relatedContacts.recentConversionLabel"),t):null}renderProperty(e,t){return Object(a.jsxs)("div",{className:"additional-properties__list-item",children:[Object(a.jsx)("dt",{className:"additional-properties__label",children:e}),Object(a.jsx)("dd",{children:t})]})}renderPartnerAccountName(e){return null!=e&&""!==e?this.renderProperty(d.a.text("relatedContacts.partnerAccountNameLabel"),e):null}renderHubspotOwner(e){return e?this.renderProperty(d.a.text("relatedContacts.hubspotOwnerLabel"),Object(N.format)(e)):null}render(){const{propertyMap:e,owner:t}=this.props;return Object(a.jsxs)(q.a,{children:[this.renderHubspotOwner(t),this.renderPartnerAccountName(e.domain_partner_account),this.renderRecentConversionDate(e.recent_conversion_date)]})}}const D={owner:{stores:[A.a],deref({propertyMap:e}){const t=e.hubspot_owner_id;return A.a.get(t)}}};w.propTypes={propertyMap:n.a.object.isRequired};var P=Object(i.connect)(D)(w),M=s("F1z2");class L extends o.Component{renderContactBadge(e,t){return Object(a.jsx)(I,{contactVid:e,firstName:t.firstname,lastName:t.lastname,email:t.email,jobTitle:t.jobtitle})}renderAdditionalProperties(e){return Object(a.jsx)(P,{propertyMap:e})}render(){const{relatedContact:e}=this.props,t=O(e);return Object(a.jsxs)("div",{children:[this.renderContactBadge(e.vid,t),this.renderAdditionalProperties(t),Object(a.jsx)(M.a,{className:"related-contacts__divider"})]})}}L.propTypes={relatedContact:n.a.object.isRequired};var _=L,k=s("MQNR");class V extends o.Component{handleRelatedContactsLinkClicked(){const{logTrackingEvent:e}=this.props;e(k.CONTACT,{action:"Related Contacts - View All Contacts Clicked"})}renderRelatedContactsList(e){const t=e.slice(0,3).map(e=>Object(a.jsx)(_,{relatedContact:e},e.vid));return Object(a.jsx)(j.a,{children:Object(a.jsx)(p.a,{children:t})})}renderRelatedContactsLink(e,t){const s=`/contacts/${b.a.get()}/contacts/list/view/all/?filters=[${h(e,t)}]`,r=d.a.text("relatedContacts.viewAllContactsText",{contactCount:t.length+1});return Object(a.jsx)(m.a,{external:!0,href:s,"data-selenium-test":"BizOpsRelatedContactsViewAll",onClick:()=>this.handleRelatedContactsLinkClicked(),children:r})}render(){const{contactVid:e,relatedContacts:t}=this.props;return Object(a.jsxs)("div",{children:[this.renderRelatedContactsList(t),this.renderRelatedContactsLink(e,t)]})}}V.propTypes={relatedContacts:n.a.array.isRequired,contactVid:n.a.number.isRequired,logTrackingEvent:n.a.func.isRequired};var U=V,F=s("vH3O"),H=s("0dUV"),Q=s("T17E"),B=s("AgF4"),z=s("E7+s");Object(H.b)({namespace:F.a.CONTACT_RELATED_CONTACTS,fetch:Q.b});var G=Object(H.a)({namespace:F.a.CONTACT_RELATED_CONTACTS,idIsValid:e=>"number"==typeof e}).defineName("RelatedContactsByContactStore").defineResponseTo(F.a.CONTACT_RELATED_CONTACTS_FETCH_FAILED,(e,{objectId:t})=>e.updateIn([t],z.a)).register(B.a),K=s("jasT"),W=s("vxpp"),Y=s("ZXaq");s.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return X}));class J extends o.Component{renderRelatedContacts(){const{relatedContacts:e,logTrackingEvent:t,contactVid:s}=this.props;return 0===e.length?Object(a.jsx)(l.a,{"data-selenium-test":"BizOpsRelatedContactsAbsent",message:"relatedContacts.noRelatedContacts"}):Object(a.jsx)(U,{relatedContacts:e,contactVid:s,logTrackingEvent:t})}renderContent(){const{relatedContacts:e}=this.props;return Object(z.d)(e)?Object(a.jsx)(c.a,{grow:!0}):Object(z.c)(e)?Object(a.jsx)(K.a,{dataReagan:"reagan-bet-related-contacts-error"}):Object(a.jsx)("div",{"data-selenium-test":"related-contacts-content",className:"reagan-bet-related-contacts-success",children:this.renderRelatedContacts()})}render(){return Object(a.jsxs)("div",{children:[this.renderContent(),Object(a.jsx)(Y.a,{})]})}}const $={relatedContacts:{stores:[G],deref:({contactVid:e})=>G.get(e)}};J.propTypes={contactVid:n.a.number.isRequired,relatedContacts:n.a.array,logTrackingEvent:n.a.func.isRequired};const X=1;t.default=Object(i.connect)($)(Object(W.a)({successSelectors:".reagan-bet-related-contacts-success",errorSelectors:".reagan-bet-related-contacts-error",selectorName:"BET:RelatedContactsCard"})(J))},oHHH:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s("g+dq"),r=s.n(a),n=s("RXKb");const o=e=>"deals/v1/deal/"+e,i=(e,t)=>r.a.put(o(e),{data:{dealId:e,properties:t}}),c=e=>e,l=()=>Object(n.a)(i,c)},pNZg:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("Ktcs"),n=s("sl/w"),o=s("DqRu"),i=s("Ukhg"),c=s("hmaQ"),l=s("LTV0"),d=s("vuW9"),u=s("WRZ8"),b=s("NfVS"),p=s("CE3l"),j=s("dKJf"),m=s("BiPx"),g=s("wM7O"),O=s("77dM"),h=s("pbrb"),x=s("pw7o"),f=s("WwwS"),C=s("fW34"),y=s("AKxL"),R=s("oWZn"),S=s("WJYQ"),E=s("F1z2"),T=s("tBa9"),v=s("NldG");const I=e=>(e||"").split(";"),N=e=>{const t=e[v.c];return t?I(t):[]},q=({currentlySelectedProducts:e,formProperty:t})=>{const s=t.hubSpotProductRequiredValues.filter(t=>e.includes(t));return s&&s.length&&s[0]},A=({currentlySelectedProducts:e,formProperty:t})=>t.hubSpotProductRequiredValues.some(t=>e.includes(t)),w=e=>0===e.hubSpotProductRequiredValues.filter(e=>e).length,D=({formProperties:e,shouldShowIseFields:t,propertyValues:s})=>{const a=N(s);return e.reduce((e,s)=>{if(s.internalName===v.e&&!t)return e;(w(s)||A({currentlySelectedProducts:a,formProperty:s}))&&e.push(s.internalName);return e},[])},P=({properties:e,propertiesToBeSubmitted:t,propertyValues:s})=>e.reduce((e,a)=>{t.includes(a.internalName)&&e.push({label:a.label||a.propertyDefinition.property.label,value:s[a.internalName]});return e},[]),M=({properties:e,propertyValues:t})=>e.map(e=>({label:e.propertyDefinition.property.label,value:t[e.internalName]})),L=()=>({name:v.a,value:(new Date).setUTCHours(0,0,0,0).toString()}),_=(e,t)=>e.reduce((e,s)=>{e[s]=t[s];return e},{}),k=e=>e.reduce((e,t)=>{e[t.internalName]=t.currentPropertyValue;return e},{});var V=s("lUI8"),U=s("VQUG"),F=s("kAwc"),H=s("8REs"),Q=s("uD3i"),B=s("aArx");const z=({isSelectedProductsEmpty:e})=>{const t=Object(Q.a)(v.b.ISE_FLOW),s=Object(r.useCallback)(()=>Object(B.b)("Product validation overlay - Learn more link click"),[]);return t?Object(a.jsx)(F.a,{contextual:!0,"data-test-id":"properties-overlay",use:"light",width:350,children:Object(a.jsx)(U.a,{align:"start",justify:"center",children:e&&Object(a.jsx)(H.a,{children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.selectProductsOverlay"})})})}):Object(a.jsx)(F.a,{contextual:!0,"data-test-id":e?"properties-overlay":"invalid-deal-product-config-overlay",use:"light",width:350,children:Object(a.jsx)(U.a,{align:"start",justify:"center",children:Object(a.jsx)(H.a,{children:e?Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.selectProductsOverlay"}):Object(a.jsx)(b.a,{elements:{Link:O.a},message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.invalidDealProductOverlay_jsx",options:{linkProps:{external:!0,href:v.f,onClick:s}}})})})})},G=({formProperties:e,hasSubmittedRequest:t=!1,objectId:s,onPropertyChange:o,propertyValues:i})=>{const c=N(i),l=e.filter(e=>e.internalName!==v.c&&e.internalName!==v.e&&w(e)),d=e.reduce((e,t)=>{const s=q({currentlySelectedProducts:c,formProperty:t});s&&(e[s]=[...e[s]||[],t]);return e},{});return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("div",{"data-test-id":"product-specific-properties",children:Object.keys(d).map(e=>Object(a.jsxs)("div",{className:"m-top-4",children:[Object(a.jsx)("b",{children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.productDetailsLabel",options:{product:e}})}),d[e].map(e=>Object(a.jsx)(V.a,{canEdit:!t,formProperty:e,label:e.label,objectId:s,onChange:o,required:!t,value:i[e.internalName]},e.internalName))]},e))}),Object(a.jsx)(E.a,{}),Object(a.jsx)("div",{"data-test-id":"generic-properties",children:l.map(e=>Object(a.jsx)(V.a,{canEdit:!t,formProperty:e,label:e.label,objectId:s,onChange:o,required:!t,value:i[e.internalName]},e.internalName))})]})},K=({formProperties:e,isDealProductConfigValid:t,isUngatedToIseFlow:s,objectId:r,onPropertyChange:o,propertyValues:i,shouldShowIseFields:c})=>{const l=!!N(i).length;let d,u,b=!t||!l;if(s){d=e.find(e=>e.internalName===v.e);u=i[v.e];b=!l}const p=e.find(e=>e.internalName===v.c),j=i[v.c];return Object(a.jsxs)("div",{"data-test-id":"dsr-form",children:[p&&Object(a.jsx)("div",{"data-test-id":"hubspot-products-property",children:Object(a.jsx)(V.a,{formProperty:p,objectId:r,onChange:o,required:!0,value:j})}),Object(a.jsxs)(T.a,{className:"m-top-3",overlay:b?Object(a.jsx)(z,{isSelectedProductsEmpty:!l}):null,children:[Object(a.jsx)(G,{formProperties:e,objectId:r,onPropertyChange:o,propertyValues:i}),c&&Object(a.jsxs)("div",{"data-test-id":"ise-flow-fields",children:[d&&Object(a.jsx)(V.a,{formProperty:d,label:d.label,objectId:r,onChange:o,required:!0,value:u}),Object(a.jsx)(E.a,{}),Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.iseRouting"})]})]})]})};var W=s("MPXz"),Y=s("oHHH"),J=s("BlXJ"),$=s("wMlt"),X=s("MslG"),Z=s("7y5Z"),ee=s("y5q4"),te=s("g+dq"),se=s.n(te),ae=s("RXKb");const re=e=>`deal-support-requests/v1/form-validation/deals/${e}/validate`,ne=(e,t)=>se.a.get(re(e),{query:{productNames:t}}),oe=e=>e,ie=()=>Object(ae.a)(ne,oe),ce=({dealAmount:e,isUngatedToIseFlow:t,objectId:s,onClose:o})=>{const i=Object(ee.a)(s),{data:c,doAsync:E,hasError:T,isLoading:q}=Object(W.a)(),{data:A,doAsync:w,hasError:M,isLoading:k}=Object(Y.a)(),{data:V,doAsync:U}=ie(),{data:F,doAsync:H,isLoading:Q}=Object(Z.a)(),[z,G]=Object(r.useState)({}),[te,se]=Object(r.useState)(!0),[ae,re]=Object(r.useState)(!1),{isSaveable:ne}=Object(r.useContext)(X.a),oe=!k&&M,ce=!!e&&e<v.d,le=t&&ce&&!ae,de=D({formProperties:c,shouldShowIseFields:le,propertyValues:z}),ue=Object(r.useCallback)(()=>{const e=_(de,z),t=[...Object($.a)({propertyValues:e}),L()];w(s,t)},[de,w,s,z]),be=Object(r.useCallback)(e=>{let a=z;const r=Object.keys(e)[0];if(r===v.c){const n=I(e[r]),o=n.some(e=>v.h.includes(e));re(o);t&&o&&(a=Object.assign({},z,{[v.e]:null}));t||U(s,n)}return G(Object.assign({},a,{},e))},[t,s,z,U]);Object(r.useEffect)(()=>{E(s)},[E,s]);Object(r.useEffect)(()=>{Object(B.c)("deal support request panel view")},[]);Object(r.useEffect)(()=>{if(A&&!F&&!Q){const e=P({properties:c,propertiesToBeSubmitted:de,propertyValues:z});H({dealId:s,properties:e})}},[de,A,c,F,Q,s,H,z]);Object(r.useEffect)(()=>{if(A&&F){Object(B.d)("deal support request form submit");u.a.addAlert({id:"deal-support-request-submit-success",message:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.successToast.message"}),sticky:!1,titleText:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.successToast.title"}),type:"success"});S.c([s]);Object(J.a)(s);i();o()}},[A,F,s,o,i]);Object(r.useEffect)(()=>{if(c.length&&!Object.keys(z).length){const e=c.reduce((e,t)=>{e[t.internalName]=t.currentPropertyValue;return e},{});if(!t){const t=N(e);t.length&&U(s,t)}G(e)}},[c,t,s,z,U]);Object(r.useEffect)(()=>{const e=de.some(e=>!z[e]);se(e)},[de,z]);const pe=!ne||te;return Object(a.jsxs)(x.a,{"data-test-id":"dsr-form-panel",width:500,children:[Object(a.jsx)(m.a,{onClick:o}),Object(a.jsx)(y.a,{children:Object(a.jsx)(p.a,{children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.title"})})}),Object(a.jsx)(f.a,{children:Object(a.jsxs)(R.a,{children:[Object(a.jsx)("p",{children:Object(a.jsx)(b.a,{elements:{Link:O.a},message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.message_jsx",options:{linkProps:{external:!0,href:v.f}}})}),q&&!T&&Object(a.jsx)(l.a,{"data-test-id":"dsr-panel-loading-state",grow:!0}),T&&!q&&Object(a.jsx)(g.a,{"data-test-id":"dsr-panel-error-state",title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.errorState.title"}),type:"badRequest",children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.errorState.message"})}),!q&&!T&&Object(a.jsx)(K,{formProperties:c,isDealProductConfigValid:V,isUngatedToIseFlow:t,objectId:s,onPropertyChange:be,propertyValues:z,shouldShowIseFields:le})]})}),Object(a.jsxs)(C.a,{children:[Object(a.jsx)(d.a,{disabled:!pe,title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.missingFieldsWarning"}),children:Object(a.jsx)(h.a,{"data-selenium-test":"dsr-submit-button",disabled:pe,failed:M,loading:k,onClick:ue,size:"small",use:"primary",children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.submitButton"})})}),oe&&Object(a.jsx)(j.a,{className:"m-left-2",use:"error",children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.submissionError"})})]})]})},le=e=>`deal-support-requests/v1/support-requests/deal/${e}/permissions`,de=e=>se.a.get(le(e)),ue=e=>e,be=()=>Object(ae.a)(de,ue),pe=e=>`deal-support-requests/v1/support-requests/deal/${e}/escalation-properties`,je=e=>se.a.get(pe(e)),me=e=>e,ge=()=>{},Oe={properties:{},propertyNames:{}},he=()=>Object(ae.a)(je,me,ge,Oe),xe=e=>"deal-support-requests/v1/support-escalation/deal/"+e,fe=({objectId:e,properties:t})=>se.a.put(xe(e),{data:t}),Ce=()=>!0,ye=()=>Object(ae.a)(fe,Ce);var Re=s("4eMT");const Se=({children:e,shouldNotRenderFields:t,shouldUseAccordion:s})=>t?null:s?Object(a.jsx)(Re.a,{contentClassName:"p-left-0",title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.seeRequestDetailsLabel"}),children:e}):Object(a.jsx)(a.Fragment,{children:e}),Ee=({escalationProperties:e,formProperties:t,hasSubmittedRequest:s,isDealSelfAssigned:r,objectId:o,onPropertyChange:i,propertyValues:c,shouldShowIseFields:l})=>{const d=N(c),u=t.find(e=>e.internalName===v.c),b=c[v.c],p=!!d.length,j=!r&&!s&&u,m=t.find(e=>e.internalName===v.e),g=c[v.e];return Object(a.jsxs)("div",{"data-test-id":"sales-manager-escalation-form",children:[j&&Object(a.jsx)("div",{"data-test-id":"hubspot-products-property",children:Object(a.jsx)(V.a,{formProperty:u,objectId:o,onChange:i,required:!0,value:b})}),Object(a.jsxs)(T.a,{className:"m-top-3",overlay:p||r?null:Object(a.jsx)(z,{isSelectedProductsEmpty:!p}),children:[Object(a.jsxs)(Se,{shouldNotRenderFields:r,shouldUseAccordion:s,children:[s&&u&&Object(a.jsx)("div",{"data-test-id":"hubspot-products-property",children:Object(a.jsx)(V.a,{canEdit:!1,formProperty:u,objectId:o,onChange:i,required:!1,value:b})}),Object(a.jsx)(G,{formProperties:t,hasSubmittedRequest:s,objectId:o,onPropertyChange:i,propertyValues:c}),l&&Object(a.jsxs)("div",{"data-test-id":"ise-flow-fields",children:[m&&Object(a.jsx)(V.a,{canEdit:!s,formProperty:m,label:m.label,objectId:o,onChange:i,required:!0,value:g}),Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestPanel.iseRouting"})]})]}),Object(a.jsx)(E.a,{}),Object(a.jsx)("div",{"data-test-id":"escalation-properties",children:Object.keys(e).map(t=>{const s=e[t],{internalName:r}=s;return Object(a.jsx)(V.a,{formProperty:s,label:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.escalationPropertyLabels."+t}),objectId:o,onChange:i,required:!0,value:c[r]},r)})})]})]})};var Te=s("1V8t"),ve=s("i4yt");const Ie=e=>{const t=e.propertyNames.statusPropertyName,s=e.properties.find(e=>e.internalName===t);return!(!s||!s.value)},Ne=()=>{const{data:e}=Object(Te.useStoreDependency)(ve.a);return e.filter(Ie).length>0},qe=e=>{const t=Object(Q.a)(v.b.SELF_ASSIGN),s=Ne();return t&&s&&!e},Ae=({dealAmount:e,hasSubmittedRequest:t,isUngatedToIseFlow:s,objectId:o,onClose:i})=>{Object(r.useEffect)(()=>{Object(J.a)(o)},[o]);const c=Object(ee.a)(o),{data:E,doAsync:T,hasError:N,isLoading:q}=Object(W.a)(),{data:A,doAsync:w,isLoading:V}=he(),{data:U,doAsync:F,hasError:H,isLoading:Q}=Object(Y.a)(),{data:z,doAsync:G,hasError:K,isLoading:Z}=ye(),{properties:te,propertyNames:{escalationCategoryPropertyName:se,escalationReasonPropertyName:ae}}=A,re=q||V,ne=qe(t),oe=!Q&&H||!Z&&K,[ie,ce]=Object(r.useState)({}),[le,de]=Object(r.useState)(!0),{isSaveable:ue}=Object(r.useContext)(X.a),be=ie[se],pe=ie[ae],je=ie[v.c],me=(e||0)<v.d,ge=I(je||"").some(e=>v.h.includes(e)),Oe=s&&me&&!ge,xe=D({formProperties:E,propertyValues:ie,shouldShowIseFields:Oe}),fe=ne||t,Ce=Object(r.useCallback)(()=>{const e=[...fe?[]:xe,se,ae],t=_(e,ie);F(o,[...Object($.a)({propertyValues:t}),...fe?[]:[L()]]);const s=P({properties:E,propertiesToBeSubmitted:e,propertyValues:ie}),a=M({properties:Object.values(te),propertiesToBeSubmitted:e,propertyValues:ie});G({objectId:o,properties:[...fe?[]:s,...a]})},[xe,fe,F,G,se,te,ae,E,o,ie]),Re=Object(r.useCallback)(e=>{let t=ie;const a=Object.keys(e)[0];if(a===v.c){const r=I(e[a]).some(e=>v.h.includes(e));s&&r&&(t=Object.assign({},ie,{[v.e]:null}))}return ce(Object.assign({},t,{},e))},[s,ie]);Object(r.useEffect)(()=>{T(o)},[T,o]);Object(r.useEffect)(()=>{w(o)},[w,o]);Object(r.useEffect)(()=>{Object(B.c)("sales manager escalation panel view")},[]);Object(r.useEffect)(()=>{if(U&&z){Object(B.d)("sales manager escalation form submit");u.a.addAlert({id:"deal-support-request-submit-success",message:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.successToast.message"}),sticky:!1,titleText:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.successToast.title"}),type:"success"});S.c([o]);Object(J.a)(o);c();i()}},[U,z,o,i,c]);Object(r.useEffect)(()=>{E.length&&!Object.keys(ie).length&&ce(k(E))},[E,o,ie]);Object(r.useEffect)(()=>{const e=!fe&&xe.some(e=>!ie[e]);de(e||!be||!pe)},[xe,fe,be,pe,ie]);const Se=!ue||le;return Object(a.jsxs)(x.a,{"data-test-id":"sales-manager-escalation-panel",width:500,children:[Object(a.jsx)(m.a,{onClick:i}),Object(a.jsx)(y.a,{children:Object(a.jsx)(p.a,{children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.title"})})}),Object(a.jsx)(f.a,{children:Object(a.jsxs)(R.a,{children:[Object(a.jsx)("p",{children:Object(a.jsx)(b.a,{elements:{Link:O.a},message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.salesManagerEscalationMessage_jsx",options:{linkProps:{external:!0,href:v.f}}})}),Object(a.jsx)("p",{children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.salesManagerEscalationMessage2"})}),re&&!N&&Object(a.jsx)(l.a,{"data-test-id":"sales-manager-escalation-panel-loading-state",grow:!0}),N&&!re&&Object(a.jsx)(g.a,{"data-test-id":"sales-manager-escalation-panel-error-state",title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.errorState.title"}),type:"badRequest",children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.salesManagerEscalationPanel.errorState.message"})}),!re&&!N&&Object(a.jsx)(Ee,{escalationProperties:te,formProperties:E,hasSubmittedRequest:t,isDealSelfAssigned:ne,objectId:o,onPropertyChange:Re,propertyValues:ie,shouldShowIseFields:Oe})]})}),Object(a.jsxs)(C.a,{children:[Object(a.jsx)(d.a,{disabled:!Se,title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.missingFieldsWarning"}),children:Object(a.jsx)(h.a,{"data-selenium-test":"dsr-escalate-button",disabled:Se,failed:H||K,loading:Q||Z,onClick:Ce,size:"small",use:"primary",children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.submitButton"})})}),oe&&Object(a.jsx)(j.a,{className:"m-left-2",use:"error",children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.submissionError"})})]})]})};var we=s("pq4V"),De=s("P4dz");const Pe=(e,t)=>{const s=Object(Te.useStoreDependency)(we.a,{objectId:e}).get(e);return Object(De.g)(s,t)},Me=e=>{const t=Pe(e,"amount");return t?parseInt(t,10):null};s.d(t,"DealSupportRequestCardActions",(function(){return ke}));const Le=e=>0===e?Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.disabled.zero"}):null===e?Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.disabled.null"}):void 0,_e={DEAL_SUPPORT_REQUEST:"DEAL_SUPPORT_REQUEST",SALES_MANAGER_ESCALATION:"SALES_MANAGER_ESCALATION"},ke=({objectId:e})=>{const[t,s]=Object(r.useState)(),u=Me(e),b=Object(Q.a)(v.b.ISE_FLOW),p=Object(W.b)(e),{data:j,doAsync:m,isLoading:g}=be();Object(r.useEffect)(()=>{m(e)},[m,e]);const O=Object(r.useCallback)(()=>s(void 0),[]),h=Object(r.useCallback)(e=>()=>{Object(B.a)(e+" actions dropdown option click");s(e)},[]),x=Object(r.useCallback)(()=>Object(B.a)("open actions dropdown click (sales)"),[]),{hasManagerEscalation:f,scopes:C}=j||{},{isSalesRep:y,isSalesManager:R}=C||{},S=R||y;if(g||!j)return Object(a.jsx)(l.a,{grow:!0});if(!S)return null;const E=b&&!u;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{disabled:!E,placement:"right",title:Le(u),children:Object(a.jsx)(i.a,{buttonText:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.actionsButton"}),buttonClassName:"p-right-0",buttonUse:"transparent","data-test-id":"dsr-card-actions-dropdown",disabled:E,onOpenStart:x,children:Object(a.jsxs)(c.a,{children:[R&&Object(a.jsx)(d.a,{disabled:!f,title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.alreadyEscalatedTooltip"}),children:Object(a.jsx)(o.a,{disabled:f,onClick:h(_e.SALES_MANAGER_ESCALATION),children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.submitEscalation"})})}),!R&&Object(a.jsx)(d.a,{disabled:!p,title:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.submitRequestTooltip"}),children:Object(a.jsx)(o.a,{disabled:p,onClick:h(_e.DEAL_SUPPORT_REQUEST),children:Object(a.jsx)(n.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.actionsDropdown.submitRequest"})})})]})})}),t===_e.DEAL_SUPPORT_REQUEST&&Object(a.jsx)(X.b,{children:Object(a.jsx)(ce,{dealAmount:u,isUngatedToIseFlow:b,objectId:e,onClose:O})}),t===_e.SALES_MANAGER_ESCALATION&&Object(a.jsx)(X.b,{children:Object(a.jsx)(Ae,{dealAmount:u,hasSubmittedRequest:p,isUngatedToIseFlow:b,objectId:e,onClose:O})})]})};t.default=ke},uD3i:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s("1V8t"),r=s("G/lG");const n=e=>({stores:[r.default],deref:()=>r.default.get(e)}),o=e=>Object(a.useStoreDependency)(n(e))},ui3J:function(e,t,s){"use strict";s.r(t);var a=s("QgEn"),r=s("VfuR"),n=s.n(r),o=s("1V8t"),i=s("Ktcs"),c=s("sl/w"),l=s("LBe/"),d=s("Ly8s"),u=s("O9ft"),b=s("g+dq"),p=s.n(b);const j="bizops-crm-cards/v1/bet-company-grouping-proxy";function m(e){return p.a.get(`${j}/${e}`)}const g=e=>{Object(d.b)(u.a.ASSOCIATED_COMPANIES_REQUESTED);return m(e).then(e=>Object(d.b)(u.a.ASSOCIATED_COMPANIES_RECEIVED,{associatedCompanies:e}),()=>Object(d.b)(u.a.ASSOCIATED_COMPANIES_FAILED))},O=({subjectId:e,totalCount:t})=>{Object(i.useEffect)(()=>{g(e)},[e]);return Object(a.jsx)("span",{children:Object(a.jsx)(c.a,{message:"associatedCompaniesSidebarCard.title",options:{count:t}})})},h={totalCount:{stores:[l.a],deref(){const e=l.a.get().getIn(["data","totalGroupMembers"],0);return e>0?e-1:0}}};O.propTypes={subjectId:n.a.string.isRequired,totalCount:n.a.number.isRequired};t.default=Object(o.connect)(h)(O)},v2S9:function(e,t,s){"use strict";s.r(t);s.d(t,"BetDealSupportRequestCardTitle",(function(){return n}));var a=s("QgEn"),r=s("sl/w");const n=()=>Object(a.jsx)(r.a,{message:"card-bet-deal-support-requests-lib.betDealSupportRequestCard.title"});t.default=n},wMlt:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=({propertyValues:e,readOnlyPropertyNames:t=[]})=>Object.keys(e).reduce((s,a)=>{t.find(e=>e===a)||s.push({name:a,value:e[a]});return s},[])},wzqa:function(e,t,s){"use strict";var a=s("bahz"),r=s("Kuny"),n=s("HUxZ");s("iLMn");const o=e=>{const t=Object(a.a)();t.setLocale({langEnabled:!0});return Object(n.a)([t.register(e),Object(r.a)(t)])};t.a=o},y5q4:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s("QYOI"),r=s("Ktcs"),n=s("MQNR"),o=s("Q2XP");const i=e=>{const{data:t}=Object(o.pd)({subjectId:e.toString(),objectTypeOrId:n.DEAL}),s=t&&Object(o.Pc)(t.crmObject.timeline.filterGroups);return Object(r.useCallback)(()=>Object(o.Fc)(Object(a.fromJS)({eventOptions:s,objectType:n.DEAL,subjectId:e.toString()})),[s,e])}},yzxv:function(e,t,s){"use strict";s.r(t);var a=s("dPcB"),r=s("QYOI"),n=s("1V8t"),o=s("LBe/"),i=s("Wf03"),c=s("yZiQ"),l=s("QgEn"),d=s("sl/w"),u=s("c/Td"),b=s.n(u),p=s("VfuR"),j=s.n(p),m=s("Ktcs"),g=s("VQUG"),O=s("77dM"),h=s("LTV0"),x=s("oxA8"),f=s("A97v"),C=s("wd43"),y=s("gATi"),R=s("/XCP"),S=s("EIJv"),E=s("R3K/"),T=s("DqRu");function v({onClick:e}){return Object(l.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px"},children:Object(l.jsx)(T.a,{onClick:e,use:"tertiary-light",size:"xs",children:Object(l.jsx)(d.a,{message:"associatedCompaniesSidebarCard.previewButton"})})})}var I=s("C4Oi"),N=s("/as5"),q=s("0xjy");function A({company:e,objectType:t,onCompanyNameClick:s,onDomainClick:a,onPreviewClick:r}){const[n,o]=Object(m.useState)(!1),i=Object(m.useCallback)(()=>o(!0),[]),c=Object(m.useCallback)(()=>o(!1),[]),d=e.get("companyId"),u=e.get("domain"),b=n&&d,p=Object(m.useCallback)(()=>{r(d.toString(),t);q.a.logForBizOps(t,{action:"Associated Companies Card - preview button clicked"})},[d,t,r]),j=Object(m.useMemo)(()=>[["companyOwner",e.get("owner")],["companyInfoTerritory",e.get("territory")],["domainStatus",e.get("domainStatus")]],[e]);return Object(l.jsx)(y.a,{className:"m-bottom-3 m-top-0 p-y-2 p-x-3",onMouseEnter:i,onMouseLeave:c,children:Object(l.jsxs)(R.a,{className:"p-all-0",children:[b&&Object(l.jsx)(v,{onClick:p}),Object(l.jsxs)(C.a,{align:"center",itemLeft:Object(l.jsx)(f.a,{domain:u}),spacing:"extra-small",style:{lineHeight:1.2},children:[Object(l.jsx)(O.a,{disabled:!d,href:E.a.company(d),onClick:s,truncate:!0,children:e.get("name")||I.g}),Object(l.jsx)(O.a,{disabled:!u,external:!0,href:Object(N.A)(u),onClick:a,truncate:!0,children:u||I.g})]}),j.map(([e,t])=>Object(l.jsx)("div",{children:Object(l.jsx)(S.a,{children:Object(l.jsx)(x.a,{message:"associatedCompaniesSidebarCard."+e,options:{value:t||I.g}})})},e))]})})}A.propTypes={company:b.a.mapContains({companyId:j.a.number,domain:j.a.string,domainStatus:j.a.string,name:j.a.string,owner:j.a.string,territory:j.a.string}).isRequired,onCompanyNameClick:j.a.func,onDomainClick:j.a.func};A.defaultProps={onCompanyNameClick:()=>{},onDomainClick:()=>{}};var w=s("leqx"),D=s("ZXaq");const P=5,M=({associatedCompanies:e,bizCoId:t,groupId:s,isLoading:a,objectType:r,onPreviewRecord:n,totalCount:o})=>{const i=Object(m.useCallback)(e=>{q.a.logForBizOps(r,{action:`Associated Companies Card - ${e} clicked`})},[r]),c=Object(m.useCallback)(()=>i("domain"),[i]),u=Object(m.useCallback)(()=>i("company name"),[i]),b=Object(m.useCallback)(()=>i("view all"),[i]);return a?Object(l.jsx)(h.a,{grow:!0}):o?Object(l.jsxs)(g.a,{align:"stretch",direction:"column",children:[e.map((e,t)=>Object(l.jsx)(A,{company:e,objectType:r,onCompanyNameClick:u,onDomainClick:c,onPreviewClick:n},t)),!!s&&o>P&&Object(l.jsx)(O.a,{"data-test-id":"view-all-link",disabled:!t,external:!0,href:Object(N.h)(s),onClick:b,children:Object(l.jsx)(d.a,{message:"associatedCompaniesSidebarCard.viewAllLink",options:{count:o}})}),Object(l.jsx)(D.a,{})]}):Object(l.jsx)(d.a,{message:"associatedCompaniesSidebarCard.emptyState"})};M.propTypes={associatedCompanies:b.a.listOf(b.a.mapContains({companyId:j.a.number})).isRequired,bizCoId:j.a.number,groupId:j.a.number,isLoading:j.a.bool.isRequired,objectType:w.a.isRequired,onPreviewRecord:j.a.func.isRequired,totalCount:j.a.number.isRequired};M.defaultProps={bizCoId:void 0,groupId:void 0};const L=e=>t=>e.getIn(["properties",t,"value"]),_={associatedCompanies:{stores:[i.a,o.a,c.a],deref(){const e=o.a.get().getIn(["data","groupMembersPage"])||Object(r.List)();if(e.isEmpty())return Object(r.List)();const t=Object(r.OrderedMap)(e.groupBy(e=>e.get("crmCompanyId"))).reverse(),s=Object(r.List)(i.a.get(t.keySeq().filter(e=>e).toArray()));return t.toList().flatMap(e=>e.map(e=>{if(!e.get("crmCompanyId"))return Object(r.Map)({domain:(e.get("bizCoDomains")||Object(r.List)()).first()});const t=s.find(t=>t&&t.get("companyId")===e.get("crmCompanyId"))||Object(r.Map)(),n=L(t),o=c.a.get(n("hubspot_owner_id"));return Object(r.Map)({companyId:t.get("companyId"),domain:n("cleaned_domain"),domainStatus:n("domain_status"),name:n("name"),owner:o&&Object(a.a)({firstName:o.get("firstName"),lastName:o.get("lastName")}),territory:n("company_info_territory")})}))}},bizCoId:{stores:[o.a],deref:()=>o.a.get().getIn(["data","bizCoId"])},groupId:{stores:[o.a],deref:()=>o.a.get().getIn(["data","groupMembersPage",0,"bizCoGroupAssociation","groupId"])},isLoading:{stores:[o.a],deref:()=>o.a.get().get("isLoading")},totalCount:{stores:[o.a],deref(){const e=o.a.get().getIn(["data","totalGroupMembers"],0);return e>0?e-1:0}}};t.default=Object(n.connect)(_)(M)}}]);
//# sourceMappingURL=bet.js.map